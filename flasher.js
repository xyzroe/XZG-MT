"use strict";(()=>{var Hc=Object.create;var Kn=Object.defineProperty;var Oc=Object.getOwnPropertyDescriptor;var Gc=Object.getOwnPropertyNames;var Nc=Object.getPrototypeOf,Yc=Object.prototype.hasOwnProperty;var D=(i,e)=>()=>(i&&(e=i(i=0)),e);var Te=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),ke=(i,e)=>{for(var t in e)Kn(i,t,{get:e[t],enumerable:!0})},Qa=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Gc(e))!Yc.call(i,r)&&r!==t&&Kn(i,r,{get:()=>e[r],enumerable:!(n=Oc(e,r))||n.enumerable});return i};var Fe=(i,e,t)=>(t=i!=null?Hc(Nc(i)):{},Qa(e||!i||!i.__esModule?Kn(t,"default",{value:i,enumerable:!0}):t,i)),Ha=i=>Qa(Kn({},"__esModule",{value:!0}),i);var Z,Oa=D(()=>{Z=class extends Error{}});function Ei(i){let e=i.length;for(;--e>=0;)i[e]=0}function Xr(i,e,t,n,r){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=r,this.has_stree=i&&i.length}function $r(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function Xe(i,e,t,n,r){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=r}function WA(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=er,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(PA*2),this.dyn_dtree=new Uint16Array((2*vA+1)*2),this.bl_tree=new Uint16Array((2*UA+1)*2),Bt(this.dyn_ltree),Bt(this.dyn_dtree),Bt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(LA+1),this.heap=new Uint16Array(2*ds+1),Bt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ds+1),Bt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function d0(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function fn(i){this.options=tr.assign({level:m0,method:C0,chunkSize:16384,windowBits:15,memLevel:8,strategy:x0},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jo,this.strm.avail_out=0;let t=qi.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==$n)throw new Error(Nt[t]);if(e.header&&qi.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=ln.string2buf(e.dictionary):Vo.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=qi.deflateSetDictionary(this.strm,n),t!==$n)throw new Error(Nt[t]);this._dict_set=!0}}function Ss(i,e){let t=new fn(e);if(t.push(i,!0),t.err)throw t.msg||Nt[t.err];return t.result}function B0(i,e){return e=e||{},e.raw=!0,Ss(i,e)}function I0(i,e){return e=e||{},e.gzip=!0,Ss(i,e)}function z0(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ch(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function dn(i){this.options=tr.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jo,this.strm.avail_out=0;let t=ot.inflateInit2(this.strm,e.windowBits);if(t!==cn)throw new Error(Nt[t]);if(this.header=new Ah,ot.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ln.string2buf(e.dictionary):al.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ot.inflateSetDictionary(this.strm,e.dictionary),t!==cn)))throw new Error(Nt[t])}function _s(i,e){let t=new dn(e);if(t.push(i),t.err)throw t.msg||Nt[t.err];return t.result}function uh(i,e){return e=e||{},e.raw=!0,_s(i,e)}var Kc,bo,Wc,zc,Jc,ms,An,tn,di,xs,yo,Ht,Zr,Vc,Cs,Ro,Do,Mo,As,Zn,jc,To,Zc,at,$i,nn,rn,Bs,Xn,ko,Fo,vo,Uo,sn,ue,$e,Po,Xc,$c,Lo,qc,Qo,Ho,Ga,qr,Na,hs,Ya,Ka,eA,tA,iA,Wa,nA,Oo,rA,sA,aA,oA,lA,cA,AA,hA,fA,dA,an,gA,uA,EA,ee,Nt,wi,wA,fs,pA,St,mA,_t,xA,CA,ve,za,ae,Ja,qe,BA,es,IA,SA,Wn,_A,bA,yA,RA,er,DA,MA,TA,kA,FA,ds,vA,UA,PA,LA,v,It,et,QA,gi,Is,gs,us,Es,ws,Ot,Zi,de,pi,Yt,mi,HA,Gt,Va,Bt,OA,GA,bt,Be,Ie,U,ji,ps,Go,ui,No,ts,hi,NA,YA,Xi,KA,hn,Yo,Ko,zA,Wo,JA,VA,jA,ZA,XA,$A,qA,e0,t0,i0,n0,r0,s0,qi,a0,o0,l0,tr,zo,on,c0,A0,h0,f0,ln,Jo,Vo,g0,u0,E0,w0,$n,p0,m0,x0,C0,S0,_0,b0,y0,R0,D0,zn,M0,T0,fi,ja,Za,Xa,is,$a,k0,F0,v0,U0,P0,en,L0,jo,Zo,qa,Q0,Jn,Kt,H0,O0,Ue,Xo,$o,G0,eo,ir,to,io,no,ro,so,ao,oo,lo,co,qn,st,ns,Ao,rs,ho,fo,go,uo,Vn,jn,Eo,wo,po,mo,xo,ss,Co,Bo,H,qo,el,N0,Y0,K0,W0,Io,Wt,tl,il,nl,rl,J0,So,as,os,V0,sl,j0,Z0,X0,$0,q0,eh,th,ih,nh,rh,sh,ah,oh,lh,ot,Ah,al,hh,fh,cn,ls,cs,dh,_o,gh,Eh,wh,ph,mh,xh,Ch,Bd,Bh,Id,Sd,Ih,_d,bd,yd,ol,ll,cl=D(()=>{Kc=0,bo=1,Wc=2,zc=3,Jc=258,ms=29,An=256,tn=An+1+ms,di=30,xs=19,yo=2*tn+1,Ht=15,Zr=16,Vc=7,Cs=256,Ro=16,Do=17,Mo=18,As=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Zn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),To=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zc=512,at=new Array((tn+2)*2);Ei(at);$i=new Array(di*2);Ei($i);nn=new Array(Zc);Ei(nn);rn=new Array(Jc-zc+1);Ei(rn);Bs=new Array(ms);Ei(Bs);Xn=new Array(di);Ei(Xn);Uo=i=>i<256?nn[i]:nn[256+(i>>>7)],sn=(i,e)=>{i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255},ue=(i,e,t)=>{i.bi_valid>Zr-t?(i.bi_buf|=e<<i.bi_valid&65535,sn(i,i.bi_buf),i.bi_buf=e>>Zr-i.bi_valid,i.bi_valid+=t-Zr):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},$e=(i,e,t)=>{ue(i,t[e*2],t[e*2+1])},Po=(i,e)=>{let t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1},Xc=i=>{i.bi_valid===16?(sn(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},$c=(i,e)=>{let t=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,A,h,d,f,g,w=0;for(d=0;d<=Ht;d++)i.bl_count[d]=0;for(t[i.heap[i.heap_max]*2+1]=0,l=i.heap_max+1;l<yo;l++)A=i.heap[l],d=t[t[A*2+1]*2+1]+1,d>c&&(d=c,w++),t[A*2+1]=d,!(A>n)&&(i.bl_count[d]++,f=0,A>=o&&(f=a[A-o]),g=t[A*2],i.opt_len+=g*(d+f),s&&(i.static_len+=g*(r[A*2+1]+f)));if(w!==0){do{for(d=c-1;i.bl_count[d]===0;)d--;i.bl_count[d]--,i.bl_count[d+1]+=2,i.bl_count[c]--,w-=2}while(w>0);for(d=c;d!==0;d--)for(A=i.bl_count[d];A!==0;)h=i.heap[--l],!(h>n)&&(t[h*2+1]!==d&&(i.opt_len+=(d-t[h*2+1])*t[h*2],t[h*2+1]=d),A--)}},Lo=(i,e,t)=>{let n=new Array(Ht+1),r=0,s,a;for(s=1;s<=Ht;s++)r=r+t[s-1]<<1,n[s]=r;for(a=0;a<=e;a++){let o=i[a*2+1];o!==0&&(i[a*2]=Po(n[o]++,o))}},qc=()=>{let i,e,t,n,r,s=new Array(Ht+1);for(t=0,n=0;n<ms-1;n++)for(Bs[n]=t,i=0;i<1<<As[n];i++)rn[t++]=n;for(rn[t-1]=n,r=0,n=0;n<16;n++)for(Xn[n]=r,i=0;i<1<<Zn[n];i++)nn[r++]=n;for(r>>=7;n<di;n++)for(Xn[n]=r<<7,i=0;i<1<<Zn[n]-7;i++)nn[256+r++]=n;for(e=0;e<=Ht;e++)s[e]=0;for(i=0;i<=143;)at[i*2+1]=8,i++,s[8]++;for(;i<=255;)at[i*2+1]=9,i++,s[9]++;for(;i<=279;)at[i*2+1]=7,i++,s[7]++;for(;i<=287;)at[i*2+1]=8,i++,s[8]++;for(Lo(at,tn+1,s),i=0;i<di;i++)$i[i*2+1]=5,$i[i*2]=Po(i,5);ko=new Xr(at,As,An+1,tn,Ht),Fo=new Xr($i,Zn,0,di,Ht),vo=new Xr(new Array(0),jc,0,xs,Vc)},Qo=i=>{let e;for(e=0;e<tn;e++)i.dyn_ltree[e*2]=0;for(e=0;e<di;e++)i.dyn_dtree[e*2]=0;for(e=0;e<xs;e++)i.bl_tree[e*2]=0;i.dyn_ltree[Cs*2]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},Ho=i=>{i.bi_valid>8?sn(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},Ga=(i,e,t,n)=>{let r=e*2,s=t*2;return i[r]<i[s]||i[r]===i[s]&&n[e]<=n[t]},qr=(i,e,t)=>{let n=i.heap[t],r=t<<1;for(;r<=i.heap_len&&(r<i.heap_len&&Ga(e,i.heap[r+1],i.heap[r],i.depth)&&r++,!Ga(e,n,i.heap[r],i.depth));)i.heap[t]=i.heap[r],t=r,r<<=1;i.heap[t]=n},Na=(i,e,t)=>{let n,r,s=0,a,o;if(i.sym_next!==0)do n=i.pending_buf[i.sym_buf+s++]&255,n+=(i.pending_buf[i.sym_buf+s++]&255)<<8,r=i.pending_buf[i.sym_buf+s++],n===0?$e(i,r,e):(a=rn[r],$e(i,a+An+1,e),o=As[a],o!==0&&(r-=Bs[a],ue(i,r,o)),n--,a=Uo(n),$e(i,a,t),o=Zn[a],o!==0&&(n-=Xn[a],ue(i,n,o)));while(s<i.sym_next);$e(i,Cs,e)},hs=(i,e)=>{let t=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems,a,o,c=-1,l;for(i.heap_len=0,i.heap_max=yo,a=0;a<s;a++)t[a*2]!==0?(i.heap[++i.heap_len]=c=a,i.depth[a]=0):t[a*2+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,t[l*2]=1,i.depth[l]=0,i.opt_len--,r&&(i.static_len-=n[l*2+1]);for(e.max_code=c,a=i.heap_len>>1;a>=1;a--)qr(i,t,a);l=s;do a=i.heap[1],i.heap[1]=i.heap[i.heap_len--],qr(i,t,1),o=i.heap[1],i.heap[--i.heap_max]=a,i.heap[--i.heap_max]=o,t[l*2]=t[a*2]+t[o*2],i.depth[l]=(i.depth[a]>=i.depth[o]?i.depth[a]:i.depth[o])+1,t[a*2+1]=t[o*2+1]=l,i.heap[1]=l++,qr(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],$c(i,e),Lo(t,c,i.bl_count)},Ya=(i,e,t)=>{let n,r=-1,s,a=e[0*2+1],o=0,c=7,l=4;for(a===0&&(c=138,l=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)&&(o<l?i.bl_tree[s*2]+=o:s!==0?(s!==r&&i.bl_tree[s*2]++,i.bl_tree[Ro*2]++):o<=10?i.bl_tree[Do*2]++:i.bl_tree[Mo*2]++,o=0,r=s,a===0?(c=138,l=3):s===a?(c=6,l=3):(c=7,l=4))},Ka=(i,e,t)=>{let n,r=-1,s,a=e[0*2+1],o=0,c=7,l=4;for(a===0&&(c=138,l=3),n=0;n<=t;n++)if(s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)){if(o<l)do $e(i,s,i.bl_tree);while(--o!==0);else s!==0?(s!==r&&($e(i,s,i.bl_tree),o--),$e(i,Ro,i.bl_tree),ue(i,o-3,2)):o<=10?($e(i,Do,i.bl_tree),ue(i,o-3,3)):($e(i,Mo,i.bl_tree),ue(i,o-11,7));o=0,r=s,a===0?(c=138,l=3):s===a?(c=6,l=3):(c=7,l=4)}},eA=i=>{let e;for(Ya(i,i.dyn_ltree,i.l_desc.max_code),Ya(i,i.dyn_dtree,i.d_desc.max_code),hs(i,i.bl_desc),e=xs-1;e>=3&&i.bl_tree[To[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e},tA=(i,e,t,n)=>{let r;for(ue(i,e-257,5),ue(i,t-1,5),ue(i,n-4,4),r=0;r<n;r++)ue(i,i.bl_tree[To[r]*2+1],3);Ka(i,i.dyn_ltree,e-1),Ka(i,i.dyn_dtree,t-1)},iA=i=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return 0;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return 1;for(t=32;t<An;t++)if(i.dyn_ltree[t*2]!==0)return 1;return 0},Wa=!1,nA=i=>{Wa||(qc(),Wa=!0),i.l_desc=new $r(i.dyn_ltree,ko),i.d_desc=new $r(i.dyn_dtree,Fo),i.bl_desc=new $r(i.bl_tree,vo),i.bi_buf=0,i.bi_valid=0,Qo(i)},Oo=(i,e,t,n)=>{ue(i,(Kc<<1)+(n?1:0),3),Ho(i),sn(i,t),sn(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t},rA=i=>{ue(i,bo<<1,3),$e(i,Cs,at),Xc(i)},sA=(i,e,t,n)=>{let r,s,a=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=iA(i)),hs(i,i.l_desc),hs(i,i.d_desc),a=eA(i),r=i.opt_len+3+7>>>3,s=i.static_len+3+7>>>3,s<=r&&(r=s)):r=s=t+5,t+4<=r&&e!==-1?Oo(i,e,t,n):i.strategy===4||s===r?(ue(i,(bo<<1)+(n?1:0),3),Na(i,at,$i)):(ue(i,(Wc<<1)+(n?1:0),3),tA(i,i.l_desc.max_code+1,i.d_desc.max_code+1,a+1),Na(i,i.dyn_ltree,i.dyn_dtree)),Qo(i),n&&Ho(i)},aA=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(rn[t]+An+1)*2]++,i.dyn_dtree[Uo(e)*2]++),i.sym_next===i.sym_end),oA=nA,lA=Oo,cA=sA,AA=aA,hA=rA,fA={_tr_init:oA,_tr_stored_block:lA,_tr_flush_block:cA,_tr_tally:AA,_tr_align:hA},dA=(i,e,t,n)=>{let r=i&65535|0,s=i>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do r=r+e[n++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0},an=dA,gA=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},uA=new Uint32Array(gA()),EA=(i,e,t,n)=>{let r=uA,s=n+t;i^=-1;for(let a=n;a<s;a++)i=i>>>8^r[(i^e[a])&255];return i^-1},ee=EA,Nt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:wA,_tr_stored_block:fs,_tr_flush_block:pA,_tr_tally:St,_tr_align:mA}=fA,{Z_NO_FLUSH:_t,Z_PARTIAL_FLUSH:xA,Z_FULL_FLUSH:CA,Z_FINISH:ve,Z_BLOCK:za,Z_OK:ae,Z_STREAM_END:Ja,Z_STREAM_ERROR:qe,Z_DATA_ERROR:BA,Z_BUF_ERROR:es,Z_DEFAULT_COMPRESSION:IA,Z_FILTERED:SA,Z_HUFFMAN_ONLY:Wn,Z_RLE:_A,Z_FIXED:bA,Z_DEFAULT_STRATEGY:yA,Z_UNKNOWN:RA,Z_DEFLATED:er}=wi,DA=9,MA=15,TA=8,kA=29,FA=256,ds=FA+1+kA,vA=30,UA=19,PA=2*ds+1,LA=15,v=3,It=258,et=It+v+1,QA=32,gi=42,Is=57,gs=69,us=73,Es=91,ws=103,Ot=113,Zi=666,de=1,pi=2,Yt=3,mi=4,HA=3,Gt=(i,e)=>(i.msg=Nt[e],e),Va=i=>i*2-(i>4?9:0),Bt=i=>{let e=i.length;for(;--e>=0;)i[e]=0},OA=i=>{let e,t,n,r=i.w_size;e=i.hash_size,n=e;do t=i.head[--n],i.head[n]=t>=r?t-r:0;while(--e);e=r,n=e;do t=i.prev[--n],i.prev[n]=t>=r?t-r:0;while(--e)},GA=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask,bt=GA,Be=i=>{let e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Ie=(i,e)=>{pA(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,Be(i.strm)},U=(i,e)=>{i.pending_buf[i.pending++]=e},ji=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255},ps=(i,e,t,n)=>{let r=i.avail_in;return r>n&&(r=n),r===0?0:(i.avail_in-=r,e.set(i.input.subarray(i.next_in,i.next_in+r),t),i.state.wrap===1?i.adler=an(i.adler,e,r,t):i.state.wrap===2&&(i.adler=ee(i.adler,e,r,t)),i.next_in+=r,i.total_in+=r,r)},Go=(i,e)=>{let t=i.max_chain_length,n=i.strstart,r,s,a=i.prev_length,o=i.nice_match,c=i.strstart>i.w_size-et?i.strstart-(i.w_size-et):0,l=i.window,A=i.w_mask,h=i.prev,d=i.strstart+It,f=l[n+a-1],g=l[n+a];i.prev_length>=i.good_match&&(t>>=2),o>i.lookahead&&(o=i.lookahead);do if(r=e,!(l[r+a]!==g||l[r+a-1]!==f||l[r]!==l[n]||l[++r]!==l[n+1])){n+=2,r++;do;while(l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&l[++n]===l[++r]&&n<d);if(s=It-(d-n),n=d-It,s>a){if(i.match_start=e,a=s,s>=o)break;f=l[n+a-1],g=l[n+a]}}while((e=h[e&A])>c&&--t!==0);return a<=i.lookahead?a:i.lookahead},ui=i=>{let e=i.w_size,t,n,r;do{if(n=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-et)&&(i.window.set(i.window.subarray(e,e+e-n),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),OA(i),n+=e),i.strm.avail_in===0)break;if(t=ps(i.strm,i.window,i.strstart+i.lookahead,n),i.lookahead+=t,i.lookahead+i.insert>=v)for(r=i.strstart-i.insert,i.ins_h=i.window[r],i.ins_h=bt(i,i.ins_h,i.window[r+1]);i.insert&&(i.ins_h=bt(i,i.ins_h,i.window[r+v-1]),i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++,i.insert--,!(i.lookahead+i.insert<v)););}while(i.lookahead<et&&i.strm.avail_in!==0)},No=(i,e)=>{let t=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,n,r,s,a=0,o=i.strm.avail_in;do{if(n=65535,s=i.bi_valid+42>>3,i.strm.avail_out<s||(s=i.strm.avail_out-s,r=i.strstart-i.block_start,n>r+i.strm.avail_in&&(n=r+i.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&e!==ve||e===_t||n!==r+i.strm.avail_in)))break;a=e===ve&&n===r+i.strm.avail_in?1:0,fs(i,0,0,a),i.pending_buf[i.pending-4]=n,i.pending_buf[i.pending-3]=n>>8,i.pending_buf[i.pending-2]=~n,i.pending_buf[i.pending-1]=~n>>8,Be(i.strm),r&&(r>n&&(r=n),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+r),i.strm.next_out),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r,i.block_start+=r,n-=r),n&&(ps(i.strm,i.strm.output,i.strm.next_out,n),i.strm.next_out+=n,i.strm.avail_out-=n,i.strm.total_out+=n)}while(a===0);return o-=i.strm.avail_in,o&&(o>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=o&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-o,i.strm.next_in),i.strstart),i.strstart+=o,i.insert+=o>i.w_size-i.insert?i.w_size-i.insert:o),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),a?mi:e!==_t&&e!==ve&&i.strm.avail_in===0&&i.strstart===i.block_start?pi:(s=i.window_size-i.strstart,i.strm.avail_in>s&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,s+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),s>i.strm.avail_in&&(s=i.strm.avail_in),s&&(ps(i.strm,i.window,i.strstart,s),i.strstart+=s,i.insert+=s>i.w_size-i.insert?i.w_size-i.insert:s),i.high_water<i.strstart&&(i.high_water=i.strstart),s=i.bi_valid+42>>3,s=i.pending_buf_size-s>65535?65535:i.pending_buf_size-s,t=s>i.w_size?i.w_size:s,r=i.strstart-i.block_start,(r>=t||(r||e===ve)&&e!==_t&&i.strm.avail_in===0&&r<=s)&&(n=r>s?s:r,a=e===ve&&i.strm.avail_in===0&&n===r?1:0,fs(i,i.block_start,n,a),i.block_start+=n,Be(i.strm)),a?Yt:de)},ts=(i,e)=>{let t,n;for(;;){if(i.lookahead<et){if(ui(i),i.lookahead<et&&e===_t)return de;if(i.lookahead===0)break}if(t=0,i.lookahead>=v&&(i.ins_h=bt(i,i.ins_h,i.window[i.strstart+v-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-et&&(i.match_length=Go(i,t)),i.match_length>=v)if(n=St(i,i.strstart-i.match_start,i.match_length-v),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=v){i.match_length--;do i.strstart++,i.ins_h=bt(i,i.ins_h,i.window[i.strstart+v-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=bt(i,i.ins_h,i.window[i.strstart+1]);else n=St(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(Ie(i,!1),i.strm.avail_out===0))return de}return i.insert=i.strstart<v-1?i.strstart:v-1,e===ve?(Ie(i,!0),i.strm.avail_out===0?Yt:mi):i.sym_next&&(Ie(i,!1),i.strm.avail_out===0)?de:pi},hi=(i,e)=>{let t,n,r;for(;;){if(i.lookahead<et){if(ui(i),i.lookahead<et&&e===_t)return de;if(i.lookahead===0)break}if(t=0,i.lookahead>=v&&(i.ins_h=bt(i,i.ins_h,i.window[i.strstart+v-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=v-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-et&&(i.match_length=Go(i,t),i.match_length<=5&&(i.strategy===SA||i.match_length===v&&i.strstart-i.match_start>4096)&&(i.match_length=v-1)),i.prev_length>=v&&i.match_length<=i.prev_length){r=i.strstart+i.lookahead-v,n=St(i,i.strstart-1-i.prev_match,i.prev_length-v),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=r&&(i.ins_h=bt(i,i.ins_h,i.window[i.strstart+v-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=v-1,i.strstart++,n&&(Ie(i,!1),i.strm.avail_out===0))return de}else if(i.match_available){if(n=St(i,0,i.window[i.strstart-1]),n&&Ie(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return de}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=St(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<v-1?i.strstart:v-1,e===ve?(Ie(i,!0),i.strm.avail_out===0?Yt:mi):i.sym_next&&(Ie(i,!1),i.strm.avail_out===0)?de:pi},NA=(i,e)=>{let t,n,r,s,a=i.window;for(;;){if(i.lookahead<=It){if(ui(i),i.lookahead<=It&&e===_t)return de;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=v&&i.strstart>0&&(r=i.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){s=i.strstart+It;do;while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);i.match_length=It-(s-r),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=v?(t=St(i,1,i.match_length-v),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=St(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(Ie(i,!1),i.strm.avail_out===0))return de}return i.insert=0,e===ve?(Ie(i,!0),i.strm.avail_out===0?Yt:mi):i.sym_next&&(Ie(i,!1),i.strm.avail_out===0)?de:pi},YA=(i,e)=>{let t;for(;;){if(i.lookahead===0&&(ui(i),i.lookahead===0)){if(e===_t)return de;break}if(i.match_length=0,t=St(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(Ie(i,!1),i.strm.avail_out===0))return de}return i.insert=0,e===ve?(Ie(i,!0),i.strm.avail_out===0?Yt:mi):i.sym_next&&(Ie(i,!1),i.strm.avail_out===0)?de:pi};Xi=[new Xe(0,0,0,0,No),new Xe(4,4,8,4,ts),new Xe(4,5,16,8,ts),new Xe(4,6,32,32,ts),new Xe(4,4,16,16,hi),new Xe(8,16,32,32,hi),new Xe(8,16,128,128,hi),new Xe(8,32,128,256,hi),new Xe(32,128,258,1024,hi),new Xe(32,258,258,4096,hi)],KA=i=>{i.window_size=2*i.w_size,Bt(i.head),i.max_lazy_match=Xi[i.level].max_lazy,i.good_match=Xi[i.level].good_length,i.nice_match=Xi[i.level].nice_length,i.max_chain_length=Xi[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=v-1,i.match_available=0,i.ins_h=0};hn=i=>{if(!i)return 1;let e=i.state;return!e||e.strm!==i||e.status!==gi&&e.status!==Is&&e.status!==gs&&e.status!==us&&e.status!==Es&&e.status!==ws&&e.status!==Ot&&e.status!==Zi?1:0},Yo=i=>{if(hn(i))return Gt(i,qe);i.total_in=i.total_out=0,i.data_type=RA;let e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Is:e.wrap?gi:Ot,i.adler=e.wrap===2?0:1,e.last_flush=-2,wA(e),ae},Ko=i=>{let e=Yo(i);return e===ae&&KA(i.state),e},zA=(i,e)=>hn(i)||i.state.wrap!==2?qe:(i.state.gzhead=e,ae),Wo=(i,e,t,n,r,s)=>{if(!i)return qe;let a=1;if(e===IA&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>DA||t!==er||n<8||n>15||e<0||e>9||s<0||s>bA||n===8&&a!==1)return Gt(i,qe);n===8&&(n=9);let o=new WA;return i.state=o,o.strm=i,o.status=gi,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+v-1)/v),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=s,o.method=t,Ko(i)},JA=(i,e)=>Wo(i,e,er,MA,TA,yA),VA=(i,e)=>{if(hn(i)||e>za||e<0)return i?Gt(i,qe):qe;let t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===Zi&&e!==ve)return Gt(i,i.avail_out===0?es:qe);let n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Be(i),i.avail_out===0)return t.last_flush=-1,ae}else if(i.avail_in===0&&Va(e)<=Va(n)&&e!==ve)return Gt(i,es);if(t.status===Zi&&i.avail_in!==0)return Gt(i,es);if(t.status===gi&&t.wrap===0&&(t.status=Ot),t.status===gi){let r=er+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Wn||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,r|=s<<6,t.strstart!==0&&(r|=QA),r+=31-r%31,ji(t,r),t.strstart!==0&&(ji(t,i.adler>>>16),ji(t,i.adler&65535)),i.adler=1,t.status=Ot,Be(i),t.pending!==0)return t.last_flush=-1,ae}if(t.status===Is){if(i.adler=0,U(t,31),U(t,139),U(t,8),t.gzhead)U(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),U(t,t.gzhead.time&255),U(t,t.gzhead.time>>8&255),U(t,t.gzhead.time>>16&255),U(t,t.gzhead.time>>24&255),U(t,t.level===9?2:t.strategy>=Wn||t.level<2?4:0),U(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(U(t,t.gzhead.extra.length&255),U(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=ee(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=gs;else if(U(t,0),U(t,0),U(t,0),U(t,0),U(t,0),U(t,t.level===9?2:t.strategy>=Wn||t.level<2?4:0),U(t,HA),t.status=Ot,Be(i),t.pending!==0)return t.last_flush=-1,ae}if(t.status===gs){if(t.gzhead.extra){let r=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=o,Be(i),t.pending!==0)return t.last_flush=-1,ae;r=0,s-=o}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=us}if(t.status===us){if(t.gzhead.name){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r)),Be(i),t.pending!==0)return t.last_flush=-1,ae;r=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,U(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=Es}if(t.status===Es){if(t.gzhead.comment){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r)),Be(i),t.pending!==0)return t.last_flush=-1,ae;r=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,U(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(i.adler=ee(i.adler,t.pending_buf,t.pending-r,r))}t.status=ws}if(t.status===ws){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Be(i),t.pending!==0))return t.last_flush=-1,ae;U(t,i.adler&255),U(t,i.adler>>8&255),i.adler=0}if(t.status=Ot,Be(i),t.pending!==0)return t.last_flush=-1,ae}if(i.avail_in!==0||t.lookahead!==0||e!==_t&&t.status!==Zi){let r=t.level===0?No(t,e):t.strategy===Wn?YA(t,e):t.strategy===_A?NA(t,e):Xi[t.level].func(t,e);if((r===Yt||r===mi)&&(t.status=Zi),r===de||r===Yt)return i.avail_out===0&&(t.last_flush=-1),ae;if(r===pi&&(e===xA?mA(t):e!==za&&(fs(t,0,0,!1),e===CA&&(Bt(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Be(i),i.avail_out===0))return t.last_flush=-1,ae}return e!==ve?ae:t.wrap<=0?Ja:(t.wrap===2?(U(t,i.adler&255),U(t,i.adler>>8&255),U(t,i.adler>>16&255),U(t,i.adler>>24&255),U(t,i.total_in&255),U(t,i.total_in>>8&255),U(t,i.total_in>>16&255),U(t,i.total_in>>24&255)):(ji(t,i.adler>>>16),ji(t,i.adler&65535)),Be(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ae:Ja)},jA=i=>{if(hn(i))return qe;let e=i.state.status;return i.state=null,e===Ot?Gt(i,BA):ae},ZA=(i,e)=>{let t=e.length;if(hn(i))return qe;let n=i.state,r=n.wrap;if(r===2||r===1&&n.status!==gi||n.lookahead)return qe;if(r===1&&(i.adler=an(i.adler,e,t,0)),n.wrap=0,t>=n.w_size){r===0&&(Bt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(t-n.w_size,t),0),e=c,t=n.w_size}let s=i.avail_in,a=i.next_in,o=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,ui(n);n.lookahead>=v;){let c=n.strstart,l=n.lookahead-(v-1);do n.ins_h=bt(n,n.ins_h,n.window[c+v-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--l);n.strstart=c,n.lookahead=v-1,ui(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=v-1,n.match_available=0,i.next_in=a,i.input=o,i.avail_in=s,n.wrap=r,ae},XA=JA,$A=Wo,qA=Ko,e0=Yo,t0=zA,i0=VA,n0=jA,r0=ZA,s0="pako deflate (from Nodeca project)",qi={deflateInit:XA,deflateInit2:$A,deflateReset:qA,deflateResetKeep:e0,deflateSetHeader:t0,deflate:i0,deflateEnd:n0,deflateSetDictionary:r0,deflateInfo:s0},a0=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),o0=function(i){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)a0(t,n)&&(i[n]=t[n])}}return i},l0=i=>{let e=0;for(let n=0,r=i.length;n<r;n++)e+=i[n].length;let t=new Uint8Array(e);for(let n=0,r=0,s=i.length;n<s;n++){let a=i[n];t.set(a,r),r+=a.length}return t},tr={assign:o0,flattenChunks:l0},zo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zo=!1}on=new Uint8Array(256);for(let i=0;i<256;i++)on[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;on[254]=on[254]=1;c0=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,r,s,a=i.length,o=0;for(r=0;r<a;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e},A0=(i,e)=>{if(e<65534&&i.subarray&&zo)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t},h0=(i,e)=>{let t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,r,s=new Array(t*2);for(r=0,n=0;n<t;){let a=i[n++];if(a<128){s[r++]=a;continue}let o=on[a];if(o>4){s[r++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<t;)a=a<<6|i[n++]&63,o--;if(o>1){s[r++]=65533;continue}a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|a&1023)}return A0(s,r)},f0=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+on[i[t]]>e?t:e},ln={string2buf:c0,buf2string:h0,utf8border:f0};Jo=d0,Vo=Object.prototype.toString,{Z_NO_FLUSH:g0,Z_SYNC_FLUSH:u0,Z_FULL_FLUSH:E0,Z_FINISH:w0,Z_OK:$n,Z_STREAM_END:p0,Z_DEFAULT_COMPRESSION:m0,Z_DEFAULT_STRATEGY:x0,Z_DEFLATED:C0}=wi;fn.prototype.push=function(i,e){let t=this.strm,n=this.options.chunkSize,r,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?w0:g0,typeof i=="string"?t.input=ln.string2buf(i):Vo.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===u0||s===E0)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=qi.deflate(t,s),r===p0)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=qi.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===$n;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};fn.prototype.onData=function(i){this.chunks.push(i)};fn.prototype.onEnd=function(i){i===$n&&(this.result=tr.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};S0=fn,_0=Ss,b0=B0,y0=I0,R0=wi,D0={Deflate:S0,deflate:_0,deflateRaw:b0,gzip:y0,constants:R0},zn=16209,M0=16191,T0=function(e,t){let n,r,s,a,o,c,l,A,h,d,f,g,w,m,C,I,p,B,_,P,S,T,M,b,k=e.state;n=e.next_in,M=e.input,r=n+(e.avail_in-5),s=e.next_out,b=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),c=k.dmax,l=k.wsize,A=k.whave,h=k.wnext,d=k.window,f=k.hold,g=k.bits,w=k.lencode,m=k.distcode,C=(1<<k.lenbits)-1,I=(1<<k.distbits)-1;e:do{g<15&&(f+=M[n++]<<g,g+=8,f+=M[n++]<<g,g+=8),p=w[f&C];t:for(;;){if(B=p>>>24,f>>>=B,g-=B,B=p>>>16&255,B===0)b[s++]=p&65535;else if(B&16){_=p&65535,B&=15,B&&(g<B&&(f+=M[n++]<<g,g+=8),_+=f&(1<<B)-1,f>>>=B,g-=B),g<15&&(f+=M[n++]<<g,g+=8,f+=M[n++]<<g,g+=8),p=m[f&I];i:for(;;){if(B=p>>>24,f>>>=B,g-=B,B=p>>>16&255,B&16){if(P=p&65535,B&=15,g<B&&(f+=M[n++]<<g,g+=8,g<B&&(f+=M[n++]<<g,g+=8)),P+=f&(1<<B)-1,P>c){e.msg="invalid distance too far back",k.mode=zn;break e}if(f>>>=B,g-=B,B=s-a,P>B){if(B=P-B,B>A&&k.sane){e.msg="invalid distance too far back",k.mode=zn;break e}if(S=0,T=d,h===0){if(S+=l-B,B<_){_-=B;do b[s++]=d[S++];while(--B);S=s-P,T=b}}else if(h<B){if(S+=l+h-B,B-=h,B<_){_-=B;do b[s++]=d[S++];while(--B);if(S=0,h<_){B=h,_-=B;do b[s++]=d[S++];while(--B);S=s-P,T=b}}}else if(S+=h-B,B<_){_-=B;do b[s++]=d[S++];while(--B);S=s-P,T=b}for(;_>2;)b[s++]=T[S++],b[s++]=T[S++],b[s++]=T[S++],_-=3;_&&(b[s++]=T[S++],_>1&&(b[s++]=T[S++]))}else{S=s-P;do b[s++]=b[S++],b[s++]=b[S++],b[s++]=b[S++],_-=3;while(_>2);_&&(b[s++]=b[S++],_>1&&(b[s++]=b[S++]))}}else if(B&64){e.msg="invalid distance code",k.mode=zn;break e}else{p=m[(p&65535)+(f&(1<<B)-1)];continue i}break}}else if(B&64)if(B&32){k.mode=M0;break e}else{e.msg="invalid literal/length code",k.mode=zn;break e}else{p=w[(p&65535)+(f&(1<<B)-1)];continue t}break}}while(n<r&&s<o);_=g>>3,n-=_,g-=_<<3,f&=(1<<g)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=s<o?257+(o-s):257-(s-o),k.hold=f,k.bits=g},fi=15,ja=852,Za=592,Xa=0,is=1,$a=2,k0=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),F0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),v0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),U0=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),P0=(i,e,t,n,r,s,a,o)=>{let c=o.bits,l=0,A=0,h=0,d=0,f=0,g=0,w=0,m=0,C=0,I=0,p,B,_,P,S,T=null,M,b=new Uint16Array(fi+1),k=new Uint16Array(fi+1),rt=null,jr,Ai,Yn;for(l=0;l<=fi;l++)b[l]=0;for(A=0;A<n;A++)b[e[t+A]]++;for(f=c,d=fi;d>=1&&b[d]===0;d--);if(f>d&&(f=d),d===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,o.bits=1,0;for(h=1;h<d&&b[h]===0;h++);for(f<h&&(f=h),m=1,l=1;l<=fi;l++)if(m<<=1,m-=b[l],m<0)return-1;if(m>0&&(i===Xa||d!==1))return-1;for(k[1]=0,l=1;l<fi;l++)k[l+1]=k[l]+b[l];for(A=0;A<n;A++)e[t+A]!==0&&(a[k[e[t+A]]++]=A);if(i===Xa?(T=rt=a,M=20):i===is?(T=k0,rt=F0,M=257):(T=v0,rt=U0,M=0),I=0,A=0,l=h,S=s,g=f,w=0,_=-1,C=1<<f,P=C-1,i===is&&C>ja||i===$a&&C>Za)return 1;for(;;){jr=l-w,a[A]+1<M?(Ai=0,Yn=a[A]):a[A]>=M?(Ai=rt[a[A]-M],Yn=T[a[A]-M]):(Ai=96,Yn=0),p=1<<l-w,B=1<<g,h=B;do B-=p,r[S+(I>>w)+B]=jr<<24|Ai<<16|Yn|0;while(B!==0);for(p=1<<l-1;I&p;)p>>=1;if(p!==0?(I&=p-1,I+=p):I=0,A++,--b[l]===0){if(l===d)break;l=e[t+a[A]]}if(l>f&&(I&P)!==_){for(w===0&&(w=f),S+=h,g=l-w,m=1<<g;g+w<d&&(m-=b[g+w],!(m<=0));)g++,m<<=1;if(C+=1<<g,i===is&&C>ja||i===$a&&C>Za)return 1;_=I&P,r[_]=f<<24|g<<16|S-s|0}}return I!==0&&(r[S+I]=l-w<<24|64<<16|0),o.bits=f,0},en=P0,L0=0,jo=1,Zo=2,{Z_FINISH:qa,Z_BLOCK:Q0,Z_TREES:Jn,Z_OK:Kt,Z_STREAM_END:H0,Z_NEED_DICT:O0,Z_STREAM_ERROR:Ue,Z_DATA_ERROR:Xo,Z_MEM_ERROR:$o,Z_BUF_ERROR:G0,Z_DEFLATED:eo}=wi,ir=16180,to=16181,io=16182,no=16183,ro=16184,so=16185,ao=16186,oo=16187,lo=16188,co=16189,qn=16190,st=16191,ns=16192,Ao=16193,rs=16194,ho=16195,fo=16196,go=16197,uo=16198,Vn=16199,jn=16200,Eo=16201,wo=16202,po=16203,mo=16204,xo=16205,ss=16206,Co=16207,Bo=16208,H=16209,qo=16210,el=16211,N0=852,Y0=592,K0=15,W0=K0,Io=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);Wt=i=>{if(!i)return 1;let e=i.state;return!e||e.strm!==i||e.mode<ir||e.mode>el?1:0},tl=i=>{if(Wt(i))return Ue;let e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=ir,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(N0),e.distcode=e.distdyn=new Int32Array(Y0),e.sane=1,e.back=-1,Kt},il=i=>{if(Wt(i))return Ue;let e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,tl(i)},nl=(i,e)=>{let t;if(Wt(i))return Ue;let n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ue:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,il(i))},rl=(i,e)=>{if(!i)return Ue;let t=new z0;i.state=t,t.strm=i,t.window=null,t.mode=ir;let n=nl(i,e);return n!==Kt&&(i.state=null),n},J0=i=>rl(i,W0),So=!0,V0=i=>{if(So){as=new Int32Array(512),os=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(en(jo,i.lens,0,288,as,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;en(Zo,i.lens,0,32,os,0,i.work,{bits:5}),So=!1}i.lencode=as,i.lenbits=9,i.distcode=os,i.distbits=5},sl=(i,e,t,n)=>{let r,s=i.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),s.window.set(e.subarray(t-n,t-n+r),s.wnext),n-=r,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},j0=(i,e)=>{let t,n,r,s,a,o,c,l,A,h,d,f,g,w,m=0,C,I,p,B,_,P,S,T,M=new Uint8Array(4),b,k,rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wt(i)||!i.output||!i.input&&i.avail_in!==0)return Ue;t=i.state,t.mode===st&&(t.mode=ns),a=i.next_out,r=i.output,c=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,l=t.hold,A=t.bits,h=o,d=c,T=Kt;e:for(;;)switch(t.mode){case ir:if(t.wrap===0){t.mode=ns;break}for(;A<16;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,M[0]=l&255,M[1]=l>>>8&255,t.check=ee(t.check,M,2,0),l=0,A=0,t.mode=to;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){i.msg="incorrect header check",t.mode=H;break}if((l&15)!==eo){i.msg="unknown compression method",t.mode=H;break}if(l>>>=4,A-=4,S=(l&15)+8,t.wbits===0&&(t.wbits=S),S>15||S>t.wbits){i.msg="invalid window size",t.mode=H;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=l&512?co:st,l=0,A=0;break;case to:for(;A<16;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(t.flags=l,(t.flags&255)!==eo){i.msg="unknown compression method",t.mode=H;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=H;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,t.check=ee(t.check,M,2,0)),l=0,A=0,t.mode=io;case io:for(;A<32;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,t.check=ee(t.check,M,4,0)),l=0,A=0,t.mode=no;case no:for(;A<16;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,t.check=ee(t.check,M,2,0)),l=0,A=0,t.mode=ro;case ro:if(t.flags&1024){for(;A<16;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,t.check=ee(t.check,M,2,0)),l=0,A=0}else t.head&&(t.head.extra=null);t.mode=so;case so:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+f),S)),t.flags&512&&t.wrap&4&&(t.check=ee(t.check,n,f,s)),o-=f,s+=f,t.length-=f),t.length))break e;t.length=0,t.mode=ao;case ao:if(t.flags&2048){if(o===0)break e;f=0;do S=n[s+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=ee(t.check,n,f,s)),o-=f,s+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=oo;case oo:if(t.flags&4096){if(o===0)break e;f=0;do S=n[s+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=ee(t.check,n,f,s)),o-=f,s+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=lo;case lo:if(t.flags&512){for(;A<16;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(t.wrap&4&&l!==(t.check&65535)){i.msg="header crc mismatch",t.mode=H;break}l=0,A=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=st;break;case co:for(;A<32;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}i.adler=t.check=Io(l),l=0,A=0,t.mode=qn;case qn:if(t.havedict===0)return i.next_out=a,i.avail_out=c,i.next_in=s,i.avail_in=o,t.hold=l,t.bits=A,O0;i.adler=t.check=1,t.mode=st;case st:if(e===Q0||e===Jn)break e;case ns:if(t.last){l>>>=A&7,A-=A&7,t.mode=ss;break}for(;A<3;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}switch(t.last=l&1,l>>>=1,A-=1,l&3){case 0:t.mode=Ao;break;case 1:if(V0(t),t.mode=Vn,e===Jn){l>>>=2,A-=2;break e}break;case 2:t.mode=fo;break;case 3:i.msg="invalid block type",t.mode=H}l>>>=2,A-=2;break;case Ao:for(l>>>=A&7,A-=A&7;A<32;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if((l&65535)!==(l>>>16^65535)){i.msg="invalid stored block lengths",t.mode=H;break}if(t.length=l&65535,l=0,A=0,t.mode=rs,e===Jn)break e;case rs:t.mode=ho;case ho:if(f=t.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;r.set(n.subarray(s,s+f),a),o-=f,s+=f,c-=f,a+=f,t.length-=f;break}t.mode=st;break;case fo:for(;A<14;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(t.nlen=(l&31)+257,l>>>=5,A-=5,t.ndist=(l&31)+1,l>>>=5,A-=5,t.ncode=(l&15)+4,l>>>=4,A-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=H;break}t.have=0,t.mode=go;case go:for(;t.have<t.ncode;){for(;A<3;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.lens[rt[t.have++]]=l&7,l>>>=3,A-=3}for(;t.have<19;)t.lens[rt[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,b={bits:t.lenbits},T=en(L0,t.lens,0,19,t.lencode,0,t.work,b),t.lenbits=b.bits,T){i.msg="invalid code lengths set",t.mode=H;break}t.have=0,t.mode=uo;case uo:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[l&(1<<t.lenbits)-1],C=m>>>24,I=m>>>16&255,p=m&65535,!(C<=A);){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(p<16)l>>>=C,A-=C,t.lens[t.have++]=p;else{if(p===16){for(k=C+2;A<k;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(l>>>=C,A-=C,t.have===0){i.msg="invalid bit length repeat",t.mode=H;break}S=t.lens[t.have-1],f=3+(l&3),l>>>=2,A-=2}else if(p===17){for(k=C+3;A<k;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}l>>>=C,A-=C,S=0,f=3+(l&7),l>>>=3,A-=3}else{for(k=C+7;A<k;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}l>>>=C,A-=C,S=0,f=11+(l&127),l>>>=7,A-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=H;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===H)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=H;break}if(t.lenbits=9,b={bits:t.lenbits},T=en(jo,t.lens,0,t.nlen,t.lencode,0,t.work,b),t.lenbits=b.bits,T){i.msg="invalid literal/lengths set",t.mode=H;break}if(t.distbits=6,t.distcode=t.distdyn,b={bits:t.distbits},T=en(Zo,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,b),t.distbits=b.bits,T){i.msg="invalid distances set",t.mode=H;break}if(t.mode=Vn,e===Jn)break e;case Vn:t.mode=jn;case jn:if(o>=6&&c>=258){i.next_out=a,i.avail_out=c,i.next_in=s,i.avail_in=o,t.hold=l,t.bits=A,T0(i,d),a=i.next_out,r=i.output,c=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,l=t.hold,A=t.bits,t.mode===st&&(t.back=-1);break}for(t.back=0;m=t.lencode[l&(1<<t.lenbits)-1],C=m>>>24,I=m>>>16&255,p=m&65535,!(C<=A);){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(I&&!(I&240)){for(B=C,_=I,P=p;m=t.lencode[P+((l&(1<<B+_)-1)>>B)],C=m>>>24,I=m>>>16&255,p=m&65535,!(B+C<=A);){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}l>>>=B,A-=B,t.back+=B}if(l>>>=C,A-=C,t.back+=C,t.length=p,I===0){t.mode=xo;break}if(I&32){t.back=-1,t.mode=st;break}if(I&64){i.msg="invalid literal/length code",t.mode=H;break}t.extra=I&15,t.mode=Eo;case Eo:if(t.extra){for(k=t.extra;A<k;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,A-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=wo;case wo:for(;m=t.distcode[l&(1<<t.distbits)-1],C=m>>>24,I=m>>>16&255,p=m&65535,!(C<=A);){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(!(I&240)){for(B=C,_=I,P=p;m=t.distcode[P+((l&(1<<B+_)-1)>>B)],C=m>>>24,I=m>>>16&255,p=m&65535,!(B+C<=A);){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}l>>>=B,A-=B,t.back+=B}if(l>>>=C,A-=C,t.back+=C,I&64){i.msg="invalid distance code",t.mode=H;break}t.offset=p,t.extra=I&15,t.mode=po;case po:if(t.extra){for(k=t.extra;A<k;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,A-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=H;break}t.mode=mo;case mo:if(c===0)break e;if(f=d-c,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=H;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),w=t.window}else w=r,g=a-t.offset,f=t.length;f>c&&(f=c),c-=f,t.length-=f;do r[a++]=w[g++];while(--f);t.length===0&&(t.mode=jn);break;case xo:if(c===0)break e;r[a++]=t.length,c--,t.mode=jn;break;case ss:if(t.wrap){for(;A<32;){if(o===0)break e;o--,l|=n[s++]<<A,A+=8}if(d-=c,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ee(t.check,r,d,a-d):an(t.check,r,d,a-d)),d=c,t.wrap&4&&(t.flags?l:Io(l))!==t.check){i.msg="incorrect data check",t.mode=H;break}l=0,A=0}t.mode=Co;case Co:if(t.wrap&&t.flags){for(;A<32;){if(o===0)break e;o--,l+=n[s++]<<A,A+=8}if(t.wrap&4&&l!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=H;break}l=0,A=0}t.mode=Bo;case Bo:T=H0;break e;case H:T=Xo;break e;case qo:return $o;case el:default:return Ue}return i.next_out=a,i.avail_out=c,i.next_in=s,i.avail_in=o,t.hold=l,t.bits=A,(t.wsize||d!==i.avail_out&&t.mode<H&&(t.mode<ss||e!==qa))&&sl(i,i.output,i.next_out,d-i.avail_out),h-=i.avail_in,d-=i.avail_out,i.total_in+=h,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ee(t.check,r,d,i.next_out-d):an(t.check,r,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===st?128:0)+(t.mode===Vn||t.mode===rs?256:0),(h===0&&d===0||e===qa)&&T===Kt&&(T=G0),T},Z0=i=>{if(Wt(i))return Ue;let e=i.state;return e.window&&(e.window=null),i.state=null,Kt},X0=(i,e)=>{if(Wt(i))return Ue;let t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Kt):Ue},$0=(i,e)=>{let t=e.length,n,r,s;return Wt(i)||(n=i.state,n.wrap!==0&&n.mode!==qn)?Ue:n.mode===qn&&(r=1,r=an(r,e,t,0),r!==n.check)?Xo:(s=sl(i,e,t,t),s?(n.mode=qo,$o):(n.havedict=1,Kt))},q0=il,eh=nl,th=tl,ih=J0,nh=rl,rh=j0,sh=Z0,ah=X0,oh=$0,lh="pako inflate (from Nodeca project)",ot={inflateReset:q0,inflateReset2:eh,inflateResetKeep:th,inflateInit:ih,inflateInit2:nh,inflate:rh,inflateEnd:sh,inflateGetHeader:ah,inflateSetDictionary:oh,inflateInfo:lh};Ah=ch,al=Object.prototype.toString,{Z_NO_FLUSH:hh,Z_FINISH:fh,Z_OK:cn,Z_STREAM_END:ls,Z_NEED_DICT:cs,Z_STREAM_ERROR:dh,Z_DATA_ERROR:_o,Z_MEM_ERROR:gh}=wi;dn.prototype.push=function(i,e){let t=this.strm,n=this.options.chunkSize,r=this.options.dictionary,s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?fh:hh,al.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=ot.inflate(t,a),s===cs&&r&&(s=ot.inflateSetDictionary(t,r),s===cn?s=ot.inflate(t,a):s===_o&&(s=cs));t.avail_in>0&&s===ls&&t.state.wrap>0&&i[t.next_in]!==0;)ot.inflateReset(t),s=ot.inflate(t,a);switch(s){case dh:case _o:case cs:case gh:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===ls))if(this.options.to==="string"){let c=ln.utf8border(t.output,t.next_out),l=t.next_out-c,A=ln.buf2string(t.output,c);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(A)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===cn&&o===0)){if(s===ls)return s=ot.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};dn.prototype.onData=function(i){this.chunks.push(i)};dn.prototype.onEnd=function(i){i===cn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=tr.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};Eh=dn,wh=_s,ph=uh,mh=_s,xh=wi,Ch={Inflate:Eh,inflate:wh,inflateRaw:ph,ungzip:mh,constants:xh},{Deflate:Bd,deflate:Bh,deflateRaw:Id,gzip:Sd}=D0,{Inflate:Ih,inflate:_d,inflateRaw:bd,ungzip:yd}=Ch,ol=Bh,ll=Ih});var zt,bs=D(()=>{zt=class{constructor(e,t=!1,n=!0){this.device=e,this.tracing=t,this.slipReaderEnabled=!1,this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this.buffer=new Uint8Array(0),this.SLIP_END=192,this.SLIP_ESC=219,this.SLIP_ESC_END=220,this.SLIP_ESC_ESC=221,this._DTR_state=!1,this.slipReaderEnabled=n}getInfo(){let e=this.device.getInfo();return e.usbVendorId&&e.usbProductId?`WebSerial VendorID 0x${e.usbVendorId.toString(16)} ProductID 0x${e.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(e){let r=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${e}`;console.log(r),this.traceLog+=r+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(e){console.error("Failed to copy text:",e)}}hexify(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(e,t=!0){if(t&&e.length>16){let n="",r=e;for(;r.length>0;){let s=r.slice(0,16),a=String.fromCharCode(...s).split("").map(o=>o===" "||o>=" "&&o<="~"&&o!=="  "?o:".").join("");r=r.slice(16),n+=`
    ${this.hexify(s.slice(0,8))} ${this.hexify(s.slice(8))} | ${a}`}return n}else return this.hexify(e)}slipWriter(e){let t=[];t.push(192);for(let n=0;n<e.length;n++)e[n]===219?t.push(219,221):e[n]===192?t.push(219,220):t.push(e[n]);return t.push(192),new Uint8Array(t)}async write(e){let t=this.slipWriter(e);if(this.device.writable){let n=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await n.write(t),n.releaseLock()}}appendArray(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}async*readLoop(e){if(this.reader)try{for(;;){let t=new Promise((a,o)=>setTimeout(()=>o(new Error("Read timeout exceeded")),e)),n=await Promise.race([this.reader.read(),t]);if(n===null)break;let{value:r,done:s}=n;if(s||!r)break;yield r}}catch(t){console.error("Error reading from serial port:",t)}finally{this.buffer=new Uint8Array(0)}}async newRead(e,t){if(this.buffer.length>=e){let r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}for(;this.buffer.length<e;){let r=this.readLoop(t),{value:s,done:a}=await r.next();if(a||!s)break;this.buffer=this.appendArray(this.buffer,s)}let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async flushInput(){var e;this.reader&&!await this.reader.closed&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=(e=this.device.readable)===null||e===void 0?void 0:e.getReader())}async flushOutput(){var e,t;this.buffer=new Uint8Array(0),await((e=this.device.writable)===null||e===void 0?void 0:e.getWriter().close()),(t=this.device.writable)===null||t===void 0||t.getWriter().releaseLock()}inWaiting(){return this.buffer.length}detectPanicHandler(e){let t=/G?uru Meditation Error: (?:Core \d panic'ed \(([a-zA-Z ]*)\))?/,n=/F?atal exception \(\d+\): (?:([a-zA-Z ]*)?.*epc)?/,r=new TextDecoder("utf-8").decode(e),s=r.match(t)||r.match(n);if(s){let a=s[1]||s[2],o=`Guru Meditation Error detected${a?` (${a})`:""}`;throw new Error(o)}}async*read(e){var t;this.reader||(this.reader=(t=this.device.readable)===null||t===void 0?void 0:t.getReader());let n=null,r=!1,s=!1;for(;;){let a=this.inWaiting(),o=await this.newRead(a>0?a:1,e);if(!o||o.length===0){let l=n===null?s?"Serial data stream stopped: Possible serial noise or corruption.":"No serial data received.":"Packet content transfer stopped";throw this.trace(l),new Error(l)}this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`);let c=0;for(;c<o.length;){let l=o[c++];if(n===null)if(l===this.SLIP_END)n=new Uint8Array(0);else{this.trace(`Read invalid data: ${this.hexConvert(o)}`);let A=await this.newRead(this.inWaiting(),e);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(A)}`),this.detectPanicHandler(new Uint8Array([...o,...A||[]])),new Error(`Invalid head of packet (0x${l.toString(16)}): Possible serial noise or corruption.`)}else if(r)if(r=!1,l===this.SLIP_ESC_END)n=this.appendArray(n,new Uint8Array([this.SLIP_END]));else if(l===this.SLIP_ESC_ESC)n=this.appendArray(n,new Uint8Array([this.SLIP_ESC]));else{this.trace(`Read invalid data: ${this.hexConvert(o)}`);let A=await this.newRead(this.inWaiting(),e);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(A)}`),this.detectPanicHandler(new Uint8Array([...o,...A||[]])),new Error(`Invalid SLIP escape (0xdb, 0x${l.toString(16)})`)}else l===this.SLIP_ESC?r=!0:l===this.SLIP_END?(this.trace(`Received full packet: ${this.hexConvert(n)}`),this.buffer=this.appendArray(this.buffer,o.slice(c)),yield n,n=null,s=!0):n=this.appendArray(n,new Uint8Array([l]))}}}async*rawRead(){if(this.reader)try{for(;;){let{value:e,done:t}=await this.reader.read();if(t||!e)break;this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${e.length} bytes: ${this.hexConvert(e)}`)),yield e}}catch(e){console.error("Error reading from serial port:",e)}finally{this.buffer=new Uint8Array(0)}}async setRTS(e){await this.device.setSignals({requestToSend:e}),await this.setDTR(this._DTR_state)}async setDTR(e){this._DTR_state=e,await this.device.setSignals({dataTerminalReady:e})}async connect(e=115200,t={}){var n;await this.device.open({baudRate:e,dataBits:t?.dataBits,stopBits:t?.stopBits,bufferSize:t?.bufferSize,parity:t?.parity,flowControl:t?.flowControl}),this.baudrate=e,this.reader=(n=this.device.readable)===null||n===void 0?void 0:n.getReader()}async sleep(e){return new Promise(t=>setTimeout(t,e))}async waitForUnlock(e){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(e)}async disconnect(){var e,t;!((e=this.device.readable)===null||e===void 0)&&e.locked&&await((t=this.reader)===null||t===void 0?void 0:t.cancel()),await this.waitForUnlock(400),await this.device.close(),this.reader=void 0}}});function lt(i){return new Promise(e=>setTimeout(e,i))}function Al(i){let e=["D","R","W"],t=i.split("|");for(let n of t){let r=n[0],s=n.slice(1);if(!e.includes(r))return!1;if(r==="D"||r==="R"){if(s!=="0"&&s!=="1")return!1}else if(r==="W"){let a=parseInt(s);if(isNaN(a)||a<=0)return!1}}return!0}var gn,un,En,wn,ys=D(()=>{gn=class{constructor(e,t){this.resetDelay=t,this.transport=e}async reset(){await this.transport.setDTR(!1),await this.transport.setRTS(!0),await lt(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await lt(this.resetDelay),await this.transport.setDTR(!1)}},un=class{constructor(e){this.transport=e}async reset(){await this.transport.setRTS(!1),await this.transport.setDTR(!1),await lt(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await lt(100),await this.transport.setRTS(!0),await this.transport.setDTR(!1),await this.transport.setRTS(!0),await lt(100),await this.transport.setRTS(!1),await this.transport.setDTR(!1)}},En=class{constructor(e,t=!1){this.transport=e,this.usingUsbOtg=t,this.transport=e}async reset(){this.usingUsbOtg?(await lt(200),await this.transport.setRTS(!1),await lt(200)):(await lt(100),await this.transport.setRTS(!1))}};wn=class{constructor(e,t){this.transport=e,this.sequenceString=t,this.transport=e}async reset(){let e={D:async t=>await this.transport.setDTR(t),R:async t=>await this.transport.setRTS(t),W:async t=>await lt(t)};try{if(!Al(this.sequenceString))return;let n=this.sequenceString.split("|");for(let r of n){let s=r[0],a=r.slice(1);s==="W"?await e.W(Number(a)):(s==="D"||s==="R")&&await e[s](a==="1")}}catch{throw new Error("Invalid custom reset sequence")}}}});var fl=Te((Td,hl)=>{hl.exports=function(e){return atob(e)}});var dl=Te((kd,Sh)=>{Sh.exports={entry:1074521580,text:"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",text_start:1074520064,data:"DMD8P+znC0B/6AtAZ+0LQAbpC0Cf6AtABukLQGXpC0CC6gtA9OoLQJ3qC0CV5wtAGuoLQHTqC0CI6QtAGOsLQLDpC0AY6wtAbegLQMroC0AG6QtAZekLQIXoC0DI6wtAKe0LQLjmC0BL7QtAuOYLQLjmC0C45gtAuOYLQLjmC0C45gtAuOYLQLjmC0Bv6wtAuOYLQEnsC0Ap7QtA",data_start:1073605544,bss_start:1073528832}});var gl=Te((Fd,_h)=>{_h.exports={entry:1077413304,text:"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",text_start:1077411840,data:"DEDKP+AIOEAsCThAhAk4QFIKOEC+CjhAbAo4QKgHOEAOCjhATgo4QJgJOEBYBzhAzAk4QFgHOEC6CDhA/gg4QCwJOECECThAzAg4QBIIOEBCCDhAyAg4QBYNOEAsCThA1gs4QMoMOECkBjhA9Aw4QKQGOECkBjhApAY4QKQGOECkBjhApAY4QKQGOECkBjhAcgs4QKQGOEDyCzhAygw4QA==",data_start:1070295976,bss_start:1070219264}});var ul=Te((vd,bh)=>{bh.exports={entry:1077413584,text:"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",text_start:1077411840,data:"GEDIP8AKOEAQCzhAaAs4QDYMOECiDDhAUAw4QHIJOEDyCzhAMgw4QHwLOEAiCThAsAs4QCIJOECaCjhA4Ao4QBALOEBoCzhArAo4QNYJOEAgCjhAqAo4QPoOOEAQCzhAug04QLIOOEBiCDhA2g44QGIIOEBiCDhAYgg4QGIIOEBiCDhAYgg4QGIIOEBiCDhAVg04QGIIOEDYDThAsg44QA==",data_start:1070164916,bss_start:1070088192}});var El=Te((Ud,yh)=>{yh.exports={entry:1082132164,text:"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",text_start:1082130432,data:"FACEQG4KgEC+CoBAFguAQOQLgEBQDIBA/guAQDoJgECgC4BA4AuAQCoLgEDqCIBAXguAQOoIgEBICoBAjgqAQL4KgEAWC4BAWgqAQJ4JgEDOCYBAVgqAQKgOgEC+CoBAaA2AQGAOgEAqCIBAiA6AQCoIgEAqCIBAKgiAQCoIgEAqCIBAKgiAQCoIgEAqCIBABA2AQCoIgECGDYBAYA6AQA==",data_start:1082469296,bss_start:1082392576}});var wl=Te((Pd,Rh)=>{Rh.exports={entry:1082132164,text:"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",text_start:1082130432,data:"FACEQHIKgEDCCoBAGguAQOgLgEBUDIBAAgyAQD4JgECkC4BA5AuAQC4LgEDuCIBAYguAQO4IgEBMCoBAkgqAQMIKgEAaC4BAXgqAQKIJgEDSCYBAWgqAQKwOgEDCCoBAbA2AQGQOgEAuCIBAjA6AQC4IgEAuCIBALgiAQC4IgEAuCIBALgiAQC4IgEAuCIBACA2AQC4IgECKDYBAZA6AQA==",data_start:1082469296,bss_start:1082392576}});var pl=Te((Ld,Dh)=>{Dh.exports={entry:1082132164,text:"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",text_start:1082130432,data:"FECAQHQKgEDECoBAHAuAQOoLgEBWDIBABAyAQEAJgECmC4BA5guAQDALgEDwCIBAZAuAQPAIgEBOCoBAlAqAQMQKgEAcC4BAYAqAQKQJgEDUCYBAXAqAQK4OgEDECoBAbg2AQGYOgEAwCIBAjg6AQDAIgEAwCIBAMAiAQDAIgEAwCIBAMAiAQDAIgEAwCIBACg2AQDAIgECMDYBAZg6AQA==",data_start:1082223536,bss_start:1082146816}});var ml=Te((Qd,Mh)=>{Mh.exports={entry:1082132164,text:"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",text_start:1082130432,data:"FACDQHIKgEDCCoBAGguAQOgLgEBUDIBAAgyAQD4JgECkC4BA5AuAQC4LgEDuCIBAYguAQO4IgEBMCoBAkgqAQMIKgEAaC4BAXgqAQKIJgEDSCYBAWgqAQKwOgEDCCoBAbA2AQGQOgEAuCIBAjA6AQC4IgEAuCIBALgiAQC4IgEAuCIBALgiAQC4IgEAuCIBACA2AQC4IgECKDYBAZA6AQA==",data_start:1082403760,bss_start:1082327040}});var xl=Te((Hd,Th)=>{Th.exports={entry:1341195918,text:"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",text_start:1341194240,data:"EAD1TwYK8U9WCvFPrgrxT4QL8U/wC/FPngvxT9QI8U9AC/FPgAvxT8IK8U+ECPFP9grxT4QI8U/gCfFPJgrxT1YK8U+uCvFP8gnxTzgJ8U9oCfFP7gnxT0AO8U9WCvFPCA3xTwAO8U/EB/FPJA7xT8QH8U/EB/FPxAfxT8QH8U/EB/FPxAfxT8QH8U/EB/FPpAzxT8QH8U8mDfFPAA7xTw==",data_start:1341533100,bss_start:1341456384}});var Cl=Te((Od,kh)=>{kh.exports={entry:1073907716,text:"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",text_start:1073905664,data:"WAD9P0uLAkDdiwJA8pACQGaMAkD+iwJAZowCQMWMAkDejQJAUY4CQPmNAkDVigJAd40CQNCNAkDojAJAdI4CQBCNAkB0jgJAy4sCQCqMAkBmjAJAxYwCQOOLAkAXiwJAN48CQKqQAkDqiQJA0ZACQOqJAkDqiQJA6okCQOqJAkDqiQJA6okCQOqJAkDqiQJA1I4CQOqJAkDJjwJAqpACQA==",data_start:1073622012,bss_start:1073545216}});var Bl=Te((Gd,Fh)=>{Fh.exports={entry:1077381760,text:"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",text_start:1077379072,data:"XADKP16ON0AzjzdAR5Q3QL2PN0BTjzdAvY83QB2QN0A6kTdArJE3QFWRN0DpjTdA0JA3QCyRN0BAkDdA0JE3QGiQN0DQkTdAIY83QH6PN0C9jzdAHZA3QDmPN0AqjjdAkJI3QA2UN0AAjTdALZQ3QACNN0AAjTdAAI03QACNN0AAjTdAAI03QACNN0AAjTdAKpI3QACNN0AlkzdADZQ3QAQInwAAAAAAAAAYAQQIBQAAAAAAAAAIAQQIBgAAAAAAAAAAAQQIIQAAAAAAIAAAEQQI3AAAAAAAIAAAEQQIDAAAAAAAIAAAAQQIEgAAAAAAIAAAESAoDAAQAQAA",data_start:1070279676,bss_start:1070202880}});var Il=Te((Nd,vh)=>{vh.exports={entry:1074843652,text:"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",text_start:1074843648,data:"CIH+PwUFBAACAwcAAwMLANTXEEAL2BBAOdgQQNbYEECF5xBAOtkQQJDZEEDc2RBAhecQQKLaEEAf2xBA4NsQQIXnEECF5xBAeNwQQIXnEEBV3xBAHOAQQFfgEECF5xBAhecQQPPgEECF5xBA2+EQQIHiEEDA4xBAf+QQQFDlEECF5xBAhecQQIXnEECF5xBAfuYQQIXnEEB05xBAsN0QQKnYEEDC5RBAydoQQBvaEECF5xBACOcQQE/nEECF5xBAhecQQIXnEECF5xBAhecQQIXnEECF5xBAhecQQELaEEB/2hBA2uUQQAEAAAACAAAAAwAAAAQAAAAFAAAABwAAAAkAAAANAAAAEQAAABkAAAAhAAAAMQAAAEEAAABhAAAAgQAAAMEAAAABAQAAgQEAAAECAAABAwAAAQQAAAEGAAABCAAAAQwAAAEQAAABGAAAASAAAAEwAAABQAAAAWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAAAAAAAAAAAAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAANAAAADwAAABEAAAATAAAAFwAAABsAAAAfAAAAIwAAACsAAAAzAAAAOwAAAEMAAABTAAAAYwAAAHMAAACDAAAAowAAAMMAAADjAAAAAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAgAAAAMAAAADAAAAAwAAAAMAAAAEAAAABAAAAAQAAAAEAAAABQAAAAUAAAAFAAAABQAAAAAAAAAAAAAAAAAAABAREgAIBwkGCgULBAwDDQIOAQ8AAQEAAAEAAAAEAAAA",data_start:1073720488,bss_start:1073643776}});async function nr(i){let e;switch(i){case"ESP32":e=await Promise.resolve().then(()=>Fe(dl()));break;case"ESP32-C2":e=await Promise.resolve().then(()=>Fe(gl()));break;case"ESP32-C3":e=await Promise.resolve().then(()=>Fe(ul()));break;case"ESP32-C5":e=await Promise.resolve().then(()=>Fe(El()));break;case"ESP32-C6":e=await Promise.resolve().then(()=>Fe(wl()));break;case"ESP32-C61":e=await Promise.resolve().then(()=>Fe(pl()));break;case"ESP32-H2":e=await Promise.resolve().then(()=>Fe(ml()));break;case"ESP32-P4":e=await Promise.resolve().then(()=>Fe(xl()));break;case"ESP32-S2":e=await Promise.resolve().then(()=>Fe(Cl()));break;case"ESP32-S3":e=await Promise.resolve().then(()=>Fe(Bl()));break;case"ESP8266":e=await Promise.resolve().then(()=>Fe(Il()));break}if(e)return{bss_start:e.bss_start,data:e.data,data_start:e.data_start,entry:e.entry,text:e.text,text_start:e.text_start,decodedData:Rs(e.data),decodedText:Rs(e.text)}}function Rs(i){let t=(0,Sl.default)(i).split("").map(function(n){return n.charCodeAt(0)});return new Uint8Array(t)}var Sl,Ds=D(()=>{Sl=Fe(fl())});function _l(i,e,t=255){let n=i.length%e;if(n!==0){let r=new Uint8Array(e-n).fill(t),s=new Uint8Array(i.length+r.length);return s.set(i),s.set(r,i.length),s}return i}var bl=D(()=>{});var oe,ct=D(()=>{oe=class{getEraseSize(e,t){return t}}});var yl={};ke(yl,{ESP32ROM:()=>pn});var pn,Ms=D(()=>{ct();pn=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32",this.IMAGE_CHIP_ID=0,this.EFUSE_RD_REG_BASE=1073061888,this.DR_REG_SYSCON_BASE=1073111040,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612856,this.XTAL_CLK_DIVIDER=1,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=4096,this.SPI_REG_BASE=1072963584,this.SPI_USR_OFFS=28,this.SPI_USR1_OFFS=32,this.SPI_USR2_OFFS=36,this.SPI_W0_OFFS=128,this.SPI_MOSI_DLEN_OFFS=40,this.SPI_MISO_DLEN_OFFS=44}async readEfuse(e,t){let n=this.EFUSE_RD_REG_BASE+4*t;return e.debug("Read efuse "+n),await e.readReg(n)}async getPkgVersion(e){let t=await this.readEfuse(e,3),n=t>>9&7;return n+=(t>>2&1)<<3,n}async getChipRevision(e){let t=await this.readEfuse(e,3),n=await this.readEfuse(e,5),r=await e.readReg(this.DR_REG_SYSCON_BASE+124),s=t>>15&1,a=n>>20&1,o=r>>31&1;return s!=0?a!=0?o!=0?3:2:1:0}async getChipDescription(e){let t=["ESP32-D0WDQ6","ESP32-D0WD","ESP32-D2WD","","ESP32-U4WDH","ESP32-PICO-D4","ESP32-PICO-V3-02"],n="",r=await this.getPkgVersion(e),s=await this.getChipRevision(e),a=s==3;return(await this.readEfuse(e,3)&1)!=0&&(t[0]="ESP32-S0WDQ6",t[1]="ESP32-S0WD"),a&&(t[5]="ESP32-PICO-V3"),r>=0&&r<=6?n=t[r]:n="Unknown ESP32",a&&(r===0||r===1)&&(n+="-V3"),n+" (revision "+s+")"}async getChipFeatures(e){let t=["Wi-Fi"],n=await this.readEfuse(e,3);(n&2)===0&&t.push(" BT"),(n&1)!==0?t.push(" Single Core"):t.push(" Dual Core"),(n&8192)!==0&&((n&4096)!==0?t.push(" 160MHz"):t.push(" 240MHz"));let o=await this.getPkgVersion(e);[2,4,5,6].indexOf(o)!==-1&&t.push(" Embedded Flash"),o===6&&t.push(" Embedded PSRAM"),(await this.readEfuse(e,4)>>8&31)!==0&&t.push(" VRef calibration in efuse"),(n>>14&1)!==0&&t.push(" BLK3 partially reserved");let d=await this.readEfuse(e,6)&3,f=["None","3/4","Repeat (UNSUPPORTED)","Invalid"];return t.push(" Coding Scheme "+f[d]),t}async getCrystalFreq(e){let t=await e.readReg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,n=e.transport.baudrate*t/1e6/this.XTAL_CLK_DIVIDER,r;return n>33?r=40:r=26,Math.abs(r-n)>1&&e.info("WARNING: Unsupported crystal in use"),r}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await this.readEfuse(e,1);t=t>>>0;let n=await this.readEfuse(e,2);n=n>>>0;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}}});var Rl={};ke(Rl,{ESP32C3ROM:()=>mn});var mn,Ts=D(()=>{ct();mn=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32-C3",this.IMAGE_CHIP_ID=5,this.EFUSE_BASE=1610647552,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612860,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=0,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.SPI_REG_BASE=1610620928,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88}async getPkgVersion(e){let r=this.EFUSE_BASE+68+4*3;return await e.readReg(r)>>21&7}async getChipRevision(e){let t=this.EFUSE_BASE+68,n=3,r=18,s=t+4*n;return(await e.readReg(s)&7<<r)>>r}async getMinorChipVersion(e){let n=this.EFUSE_BASE+68+20,r=await e.readReg(n)>>23&1,a=this.EFUSE_BASE+68+4*3,o=await e.readReg(a)>>18&7;return(r<<3)+o}async getMajorChipVersion(e){let n=this.EFUSE_BASE+68+20;return await e.readReg(n)>>24&3}async getChipDescription(e){let t={0:"ESP32-C3 (QFN32)",1:"ESP8685 (QFN28)",2:"ESP32-C3 AZ (QFN32)",3:"ESP8686 (QFN24)"},n=await this.getPkgVersion(e),r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${t[n]||"Unknown ESP32-C3"} (revision v${r}.${s})`}async getFlashCap(e){let r=this.EFUSE_BASE+68+4*3;return await e.readReg(r)>>27&7}async getFlashVendor(e){let r=this.EFUSE_BASE+68+4*4,a=await e.readReg(r)>>0&7;return{1:"XMC",2:"GD",3:"FM",4:"TT",5:"ZBIT"}[a]||""}async getChipFeatures(e){let t=["Wi-Fi","BLE"],n={0:null,1:"Embedded Flash 4MB",2:"Embedded Flash 2MB",3:"Embedded Flash 1MB",4:"Embedded Flash 8MB"},r=await this.getFlashCap(e),s=await this.getFlashVendor(e),a=n[r],o=a!==void 0?a:"Unknown Embedded Flash";return a!==null&&t.push(`${o} (${s})`),t}async getCrystalFreq(e){return 40}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}}});var Dl={};ke(Dl,{ESP32C2ROM:()=>ks});var ks,Ml=D(()=>{Ts();ks=class extends mn{constructor(){super(...arguments),this.CHIP_NAME="ESP32-C2",this.IMAGE_CHIP_ID=12,this.EFUSE_BASE=1610647552,this.MAC_EFUSE_REG=this.EFUSE_BASE+64,this.UART_CLKDIV_REG=1610612756,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612860,this.XTAL_CLK_DIVIDER=1,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=0,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.SPI_REG_BASE=1610620928,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88}async getPkgVersion(e){let r=this.EFUSE_BASE+64+4*1;return await e.readReg(r)>>22&7}async getChipRevision(e){let t=this.EFUSE_BASE+64,n=1,r=20,s=t+4*n;return(await e.readReg(s)&3<<r)>>r}async getChipDescription(e){let t,n=await this.getPkgVersion(e);n===0||n===1?t="ESP32-C2":t="unknown ESP32-C2";let r=await this.getChipRevision(e);return t+=" (revision "+r+")",t}async getChipFeatures(e){return["Wi-Fi","BLE"]}async getCrystalFreq(e){let t=await e.readReg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,n=e.transport.baudrate*t/1e6/this.XTAL_CLK_DIVIDER,r;return n>33?r=40:r=26,Math.abs(r-n)>1&&e.info("WARNING: Unsupported crystal in use"),r}async changeBaudRate(e){await this.getCrystalFreq(e)===26&&e.changeBaud()}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}}});var Tl={};ke(Tl,{ESP32C6ROM:()=>Jt});var Jt,rr=D(()=>{ct();Jt=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32-C6",this.IMAGE_CHIP_ID=13,this.EFUSE_BASE=1611335680,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612860,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=0,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.SPI_REG_BASE=1610620928,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88}async getPkgVersion(e){let r=this.EFUSE_BASE+68+4*3;return await e.readReg(r)>>21&7}async getChipRevision(e){let t=this.EFUSE_BASE+68,n=3,r=18,s=t+4*n;return(await e.readReg(s)&7<<r)>>r}async getChipDescription(e){let t;await this.getPkgVersion(e)===0?t="ESP32-C6":t="unknown ESP32-C6";let r=await this.getChipRevision(e);return t+=" (revision "+r+")",t}async getChipFeatures(e){return["Wi-Fi 6","BT 5","IEEE802.15.4"]}async getCrystalFreq(e){return 40}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}}});var kl={};ke(kl,{ESP32C61ROM:()=>Fs});var Fs,Fl=D(()=>{rr();Fs=class extends Jt{constructor(){super(...arguments),this.CHIP_NAME="ESP32-C61",this.IMAGE_CHIP_ID=20,this.CHIP_DETECT_MAGIC_VALUE=[871374959,606167151],this.UART_DATE_REG_ADDR=1610612860,this.EFUSE_BASE=1611352064,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.EFUSE_RD_REG_BASE=this.EFUSE_BASE+48,this.EFUSE_PURPOSE_KEY0_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY0_SHIFT=0,this.EFUSE_PURPOSE_KEY1_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY1_SHIFT=4,this.EFUSE_PURPOSE_KEY2_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY2_SHIFT=8,this.EFUSE_PURPOSE_KEY3_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY3_SHIFT=12,this.EFUSE_PURPOSE_KEY4_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY4_SHIFT=16,this.EFUSE_PURPOSE_KEY5_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY5_SHIFT=20,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT_REG=this.EFUSE_RD_REG_BASE,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT=1<<20,this.EFUSE_SPI_BOOT_CRYPT_CNT_REG=this.EFUSE_BASE+48,this.EFUSE_SPI_BOOT_CRYPT_CNT_MASK=7<<23,this.EFUSE_SECURE_BOOT_EN_REG=this.EFUSE_BASE+52,this.EFUSE_SECURE_BOOT_EN_MASK=1<<26,this.FLASH_FREQUENCY={"80m":15,"40m":0,"20m":2},this.MEMORY_MAP=[[0,65536,"PADDING"],[1098907648,1107296256,"DROM"],[1082130432,1082523648,"DRAM"],[1082130432,1082523648,"BYTE_ACCESSIBLE"],[1074048e3,1074069504,"DROM_MASK"],[1073741824,1074048e3,"IROM_MASK"],[1090519040,1098907648,"IROM"],[1082130432,1082523648,"IRAM"],[1342177280,1342193664,"RTC_IRAM"],[1342177280,1342193664,"RTC_DRAM"],[1611653120,1611661312,"MEM_INTERNAL2"]],this.UF2_FAMILY_ID=2010665156,this.EFUSE_MAX_KEY=5,this.KEY_PURPOSES={0:"USER/EMPTY",1:"ECDSA_KEY",2:"XTS_AES_256_KEY_1",3:"XTS_AES_256_KEY_2",4:"XTS_AES_128_KEY",5:"HMAC_DOWN_ALL",6:"HMAC_DOWN_JTAG",7:"HMAC_DOWN_DIGITAL_SIGNATURE",8:"HMAC_UP",9:"SECURE_BOOT_DIGEST0",10:"SECURE_BOOT_DIGEST1",11:"SECURE_BOOT_DIGEST2",12:"KM_INIT_KEY",13:"XTS_AES_256_KEY_1_PSRAM",14:"XTS_AES_256_KEY_2_PSRAM",15:"XTS_AES_128_KEY_PSRAM"}}async getPkgVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>26&7}async getMinorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>0&15}async getMajorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>4&3}async getChipDescription(e){let t=await this.getPkgVersion(e),n;t===0?n="ESP32-C61":n="unknown ESP32-C61";let r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${n} (revision v${r}.${s})`}async getChipFeatures(e){return["WiFi 6","BT 5"]}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}}});var vl={};ke(vl,{ESP32C5ROM:()=>vs});var vs,Ul=D(()=>{rr();vs=class extends Jt{constructor(){super(...arguments),this.CHIP_NAME="ESP32-C5",this.IMAGE_CHIP_ID=23,this.BOOTLOADER_FLASH_OFFSET=8192,this.EFUSE_BASE=1611352064,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.UART_CLKDIV_REG=1610612756,this.EFUSE_RD_REG_BASE=this.EFUSE_BASE+48,this.EFUSE_PURPOSE_KEY0_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY0_SHIFT=24,this.EFUSE_PURPOSE_KEY1_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY1_SHIFT=28,this.EFUSE_PURPOSE_KEY2_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY2_SHIFT=0,this.EFUSE_PURPOSE_KEY3_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY3_SHIFT=4,this.EFUSE_PURPOSE_KEY4_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY4_SHIFT=8,this.EFUSE_PURPOSE_KEY5_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY5_SHIFT=12,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT_REG=this.EFUSE_RD_REG_BASE,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT=1<<20,this.EFUSE_SPI_BOOT_CRYPT_CNT_REG=this.EFUSE_BASE+52,this.EFUSE_SPI_BOOT_CRYPT_CNT_MASK=7<<18,this.EFUSE_SECURE_BOOT_EN_REG=this.EFUSE_BASE+56,this.EFUSE_SECURE_BOOT_EN_MASK=1<<20,this.IROM_MAP_START=1107296256,this.IROM_MAP_END=1115684864,this.DROM_MAP_START=1115684864,this.DROM_MAP_END=1124073472,this.PCR_SYSCLK_CONF_REG=1611227408,this.PCR_SYSCLK_XTAL_FREQ_V=127<<24,this.PCR_SYSCLK_XTAL_FREQ_S=24,this.XTAL_CLK_DIVIDER=1,this.UARTDEV_BUF_NO=1082520860,this.CHIP_DETECT_MAGIC_VALUE=[285294703,1675706479,1607549039],this.FLASH_FREQUENCY={"80m":15,"40m":0,"20m":2},this.MEMORY_MAP=[[0,65536,"PADDING"],[1115684864,1124073472,"DROM"],[1082130432,1082523648,"DRAM"],[1082130432,1082523648,"BYTE_ACCESSIBLE"],[1073979392,1074003968,"DROM_MASK"],[1073741824,1073979392,"IROM_MASK"],[1107296256,1115684864,"IROM"],[1082130432,1082523648,"IRAM"],[1342177280,1342193664,"RTC_IRAM"],[1342177280,1342193664,"RTC_DRAM"],[1611653120,1611661312,"MEM_INTERNAL2"]],this.UF2_FAMILY_ID=4145808195,this.EFUSE_MAX_KEY=5,this.KEY_PURPOSES={0:"USER/EMPTY",1:"ECDSA_KEY",2:"XTS_AES_256_KEY_1",3:"XTS_AES_256_KEY_2",4:"XTS_AES_128_KEY",5:"HMAC_DOWN_ALL",6:"HMAC_DOWN_JTAG",7:"HMAC_DOWN_DIGITAL_SIGNATURE",8:"HMAC_UP",9:"SECURE_BOOT_DIGEST0",10:"SECURE_BOOT_DIGEST1",11:"SECURE_BOOT_DIGEST2",12:"KM_INIT_KEY"}}async getPkgVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>26&7}async getMinorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>0&15}async getMajorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*2)>>4&3}async getChipDescription(e){let t=await this.getPkgVersion(e),n;t===0?n="ESP32-C5":n="unknown ESP32-C5";let r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${n} (revision v${r}.${s})`}async getChipFeatures(e){return["Wi-Fi 6 (dual-band)","BT 5 (LE)"]}async getCrystalFreq(e){let t=await e.readReg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,n=e.transport.baudrate*t/1e6/this.XTAL_CLK_DIVIDER,r;return n>45?r=48:n>33?r=40:r=26,Math.abs(r-n)>1&&e.info("WARNING: Unsupported crystal in use"),r}async getCrystalFreqRomExpect(e){return(await e.readReg(this.PCR_SYSCLK_CONF_REG)&this.PCR_SYSCLK_XTAL_FREQ_V)>>this.PCR_SYSCLK_XTAL_FREQ_S}}});var Pl={};ke(Pl,{ESP32H2ROM:()=>Us});var Us,Ll=D(()=>{ct();Us=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32-H2",this.IMAGE_CHIP_ID=16,this.EFUSE_BASE=1611335680,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612860,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=0,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.SPI_REG_BASE=1610620928,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88,this.USB_RAM_BLOCK=2048,this.UARTDEV_BUF_NO_USB=3,this.UARTDEV_BUF_NO=1070526796}async getPkgVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*4)>>0&7}async getMinorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>18&7}async getMajorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>21&3}async getChipDescription(e){let t=await this.getPkgVersion(e),n;t===0?n="ESP32-H2":n="unknown ESP32-H2";let r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${n} (revision v${r}.${s})`}async getChipFeatures(e){return["BT 5 (LE)","IEEE802.15.4","Single Core","96MHz"]}async getCrystalFreq(e){return 32}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async postConnect(e){let t=await e.readReg(this.UARTDEV_BUF_NO)&255;e.debug("In _post_connect "+t),t==this.UARTDEV_BUF_NO_USB&&(e.ESP_RAM_BLOCK=this.USB_RAM_BLOCK)}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}}});var Ql={};ke(Ql,{ESP32S3ROM:()=>Ps});var Ps,Hl=D(()=>{ct();Ps=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32-S3",this.IMAGE_CHIP_ID=9,this.EFUSE_BASE=1610641408,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.EFUSE_BLOCK2_ADDR=this.EFUSE_BASE+92,this.UART_CLKDIV_REG=1610612756,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612864,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=0,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.SPI_REG_BASE=1610620928,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88,this.USB_RAM_BLOCK=2048,this.UARTDEV_BUF_NO_USB=3,this.UARTDEV_BUF_NO=1070526796}async getChipDescription(e){let t=await this.getMajorChipVersion(e),n=await this.getMinorChipVersion(e),r=await this.getPkgVersion(e);return`${{0:"ESP32-S3 (QFN56)",1:"ESP32-S3-PICO-1 (LGA56)"}[r]||"unknown ESP32-S3"} (revision v${t}.${n})`}async getPkgVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>21&7}async getRawMinorChipVersion(e){let n=await e.readReg(this.EFUSE_BLOCK1_ADDR+20)>>23&1,s=await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>18&7;return(n<<3)+s}async getMinorChipVersion(e){let t=await this.getRawMinorChipVersion(e);return await this.isEco0(e,t)?0:this.getRawMinorChipVersion(e)}async getRawMajorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*5)>>24&3}async getMajorChipVersion(e){let t=await this.getRawMinorChipVersion(e);return await this.isEco0(e,t)?0:this.getRawMajorChipVersion(e)}async getBlkVersionMajor(e){return await e.readReg(this.EFUSE_BLOCK2_ADDR+4*4)>>0&3}async getBlkVersionMinor(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>24&7}async isEco0(e,t){return(t&7)===0&&await this.getBlkVersionMajor(e)===1&&await this.getBlkVersionMinor(e)===1}async getFlashCap(e){let r=this.EFUSE_BASE+68+4*3;return await e.readReg(r)>>27&7}async getFlashVendor(e){let r=this.EFUSE_BASE+68+4*4,a=await e.readReg(r)>>0&7;return{1:"XMC",2:"GD",3:"FM",4:"TT",5:"BY"}[a]||""}async getPsramCap(e){let r=this.EFUSE_BASE+68+4*4;return await e.readReg(r)>>3&3}async getPsramVendor(e){let r=this.EFUSE_BASE+68+4*4,a=await e.readReg(r)>>7&3;return{1:"AP_3v3",2:"AP_1v8"}[a]||""}async getChipFeatures(e){let t=["Wi-Fi","BLE"],n={0:null,1:"Embedded Flash 8MB",2:"Embedded Flash 4MB"},r=await this.getFlashCap(e),s=await this.getFlashVendor(e),a=n[r],o=a!==void 0?a:"Unknown Embedded Flash";a!==null&&t.push(`${o} (${s})`);let c={0:null,1:"Embedded PSRAM 8MB",2:"Embedded PSRAM 2MB"},l=await this.getPsramCap(e),A=await this.getPsramVendor(e),h=c[l],d=h!==void 0?h:"Unknown Embedded PSRAM";return h!==null&&t.push(`${d} (${A})`),t}async getCrystalFreq(e){return 40}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async postConnect(e){let t=await e.readReg(this.UARTDEV_BUF_NO)&255;e.debug("In _post_connect "+t),t==this.UARTDEV_BUF_NO_USB&&(e.ESP_RAM_BLOCK=this.USB_RAM_BLOCK)}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}}});var Ol={};ke(Ol,{ESP32S2ROM:()=>Ls});var Ls,Gl=D(()=>{ct();Ls=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP32-S2",this.IMAGE_CHIP_ID=2,this.IROM_MAP_START=1074266112,this.IROM_MAP_END=1085800448,this.DROM_MAP_START=1056964608,this.DROM_MAP_END=1061093376,this.CHIP_DETECT_MAGIC_VALUE=[1990],this.SPI_REG_BASE=1061167104,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88,this.SPI_ADDR_REG_MSB=!1,this.MAC_EFUSE_REG=1061265476,this.UART_CLKDIV_REG=1061158932,this.SUPPORTS_ENCRYPTED_FLASH=!0,this.FLASH_ENCRYPTED_WRITE_ALIGN=16,this.EFUSE_BASE=1061265408,this.EFUSE_RD_REG_BASE=this.EFUSE_BASE+48,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.EFUSE_BLOCK2_ADDR=this.EFUSE_BASE+92,this.EFUSE_PURPOSE_KEY0_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY0_SHIFT=24,this.EFUSE_PURPOSE_KEY1_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY1_SHIFT=28,this.EFUSE_PURPOSE_KEY2_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY2_SHIFT=0,this.EFUSE_PURPOSE_KEY3_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY3_SHIFT=4,this.EFUSE_PURPOSE_KEY4_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY4_SHIFT=8,this.EFUSE_PURPOSE_KEY5_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY5_SHIFT=12,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT_REG=this.EFUSE_RD_REG_BASE,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT=1<<19,this.EFUSE_SPI_BOOT_CRYPT_CNT_REG=this.EFUSE_BASE+52,this.EFUSE_SPI_BOOT_CRYPT_CNT_MASK=7<<18,this.EFUSE_SECURE_BOOT_EN_REG=this.EFUSE_BASE+56,this.EFUSE_SECURE_BOOT_EN_MASK=1<<20,this.EFUSE_RD_REPEAT_DATA3_REG=this.EFUSE_BASE+60,this.EFUSE_RD_REPEAT_DATA3_REG_FLASH_TYPE_MASK=512,this.PURPOSE_VAL_XTS_AES256_KEY_1=2,this.PURPOSE_VAL_XTS_AES256_KEY_2=3,this.PURPOSE_VAL_XTS_AES128_KEY=4,this.UARTDEV_BUF_NO=1073741076,this.UARTDEV_BUF_NO_USB_OTG=2,this.USB_RAM_BLOCK=2048,this.GPIO_STRAP_REG=1061175352,this.GPIO_STRAP_SPI_BOOT_MASK=8,this.GPIO_STRAP_VDDSPI_MASK=16,this.RTC_CNTL_OPTION1_REG=1061191976,this.RTC_CNTL_FORCE_DOWNLOAD_BOOT_MASK=1,this.RTCCNTL_BASE_REG=1061191680,this.RTC_CNTL_WDTCONFIG0_REG=this.RTCCNTL_BASE_REG+148,this.RTC_CNTL_WDTCONFIG1_REG=this.RTCCNTL_BASE_REG+152,this.RTC_CNTL_WDTWPROTECT_REG=this.RTCCNTL_BASE_REG+172,this.RTC_CNTL_WDT_WKEY=1356348065,this.MEMORY_MAP=[[0,65536,"PADDING"],[1056964608,1073217536,"DROM"],[1062207488,1073217536,"EXTRAM_DATA"],[1073340416,1073348608,"RTC_DRAM"],[1073340416,1073741824,"BYTE_ACCESSIBLE"],[1073340416,1074208768,"MEM_INTERNAL"],[1073414144,1073741824,"DRAM"],[1073741824,1073848576,"IROM_MASK"],[1073872896,1074200576,"IRAM"],[1074200576,1074208768,"RTC_IRAM"],[1074266112,1082130432,"IROM"],[1342177280,1342185472,"RTC_DATA"]],this.EFUSE_VDD_SPI_REG=this.EFUSE_BASE+52,this.VDD_SPI_XPD=16,this.VDD_SPI_TIEH=32,this.VDD_SPI_FORCE=64,this.UF2_FAMILY_ID=3218951918,this.EFUSE_MAX_KEY=5,this.KEY_PURPOSES={0:"USER/EMPTY",1:"RESERVED",2:"XTS_AES_256_KEY_1",3:"XTS_AES_256_KEY_2",4:"XTS_AES_128_KEY",5:"HMAC_DOWN_ALL",6:"HMAC_DOWN_JTAG",7:"HMAC_DOWN_DIGITAL_SIGNATURE",8:"HMAC_UP",9:"SECURE_BOOT_DIGEST0",10:"SECURE_BOOT_DIGEST1",11:"SECURE_BOOT_DIGEST2"},this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612856,this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=4096,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}}async getPkgVersion(e){let n=this.EFUSE_BLOCK1_ADDR+16;return await e.readReg(n)>>0&15}async getMinorChipVersion(e){let n=await e.readReg(this.EFUSE_BLOCK1_ADDR+12)>>20&1,s=await e.readReg(this.EFUSE_BLOCK1_ADDR+4*4)>>4&7;return(n<<3)+s}async getMajorChipVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>18&3}async getFlashVersion(e){return await e.readReg(this.EFUSE_BLOCK1_ADDR+4*3)>>21&15}async getChipDescription(e){let t={0:"ESP32-S2",1:"ESP32-S2FH2",2:"ESP32-S2FH4",102:"ESP32-S2FNR2",100:"ESP32-S2R2"},n=await this.getFlashCap(e)+await this.getPsramCap(e)*100,r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${t[n]||"unknown ESP32-S2"} (revision v${r}.${s})`}async getFlashCap(e){return await this.getFlashVersion(e)}async getPsramVersion(e){let n=this.EFUSE_BLOCK1_ADDR+12;return await e.readReg(n)>>28&15}async getPsramCap(e){return await this.getPsramVersion(e)}async getBlock2Version(e){let n=this.EFUSE_BLOCK2_ADDR+16;return await e.readReg(n)>>4&7}async getChipFeatures(e){let t=["Wi-Fi"],n={0:"No Embedded Flash",1:"Embedded Flash 2MB",2:"Embedded Flash 4MB"},r=await this.getFlashCap(e),s=n[r]||"Unknown Embedded Flash";t.push(s);let a={0:"No Embedded Flash",1:"Embedded PSRAM 2MB",2:"Embedded PSRAM 4MB"},o=await this.getPsramCap(e),c=a[o]||"Unknown Embedded PSRAM";t.push(c);let l={0:"No calibration in BLK2 of efuse",1:"ADC and temperature sensor calibration in BLK2 of efuse V1",2:"ADC and temperature sensor calibration in BLK2 of efuse V2"},A=await this.getBlock2Version(e),h=l[A]||"Unknown Calibration in BLK2";return t.push(h),t}async getCrystalFreq(e){return 40}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}getEraseSize(e,t){return t}async usingUsbOtg(e){return(await e.readReg(this.UARTDEV_BUF_NO)&255)===this.UARTDEV_BUF_NO_USB_OTG}async postConnect(e){let t=await this.usingUsbOtg(e);e.debug("In _post_connect using USB OTG ?"+t),t&&(e.ESP_RAM_BLOCK=this.USB_RAM_BLOCK)}}});var Nl={};ke(Nl,{ESP8266ROM:()=>Qs});var Qs,Yl=D(()=>{ct();Qs=class extends oe{constructor(){super(...arguments),this.CHIP_NAME="ESP8266",this.CHIP_DETECT_MAGIC_VALUE=[4293968129],this.EFUSE_RD_REG_BASE=1072693328,this.UART_CLKDIV_REG=1610612756,this.UART_CLKDIV_MASK=1048575,this.XTAL_CLK_DIVIDER=2,this.FLASH_WRITE_SIZE=16384,this.BOOTLOADER_FLASH_OFFSET=0,this.UART_DATE_REG_ADDR=0,this.FLASH_SIZES={"512KB":0,"256KB":16,"1MB":32,"2MB":48,"4MB":64,"2MB-c1":80,"4MB-c1":96,"8MB":128,"16MB":144},this.SPI_REG_BASE=1610613248,this.SPI_USR_OFFS=28,this.SPI_USR1_OFFS=32,this.SPI_USR2_OFFS=36,this.SPI_MOSI_DLEN_OFFS=0,this.SPI_MISO_DLEN_OFFS=0,this.SPI_W0_OFFS=64,this.getChipFeatures=async e=>{let t=["WiFi"];return await this.getChipDescription(e)=="ESP8285"&&t.push("Embedded Flash"),t}}async readEfuse(e,t){let n=this.EFUSE_RD_REG_BASE+4*t;return e.debug("Read efuse "+n),await e.readReg(n)}async getChipDescription(e){let t=await this.readEfuse(e,2);return(await this.readEfuse(e,0)&16|t&65536)!=0?"ESP8285":"ESP8266EX"}async getCrystalFreq(e){let t=await e.readReg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,n=e.transport.baudrate*t/1e6/this.XTAL_CLK_DIVIDER,r;return n>33?r=40:r=26,Math.abs(r-n)>1&&e.info("WARNING: Detected crystal freq "+n+"MHz is quite different to normalized freq "+r+"MHz. Unsupported crystal in use?"),r}_d2h(e){let t=(+e).toString(16);return t.length===1?"0"+t:t}async readMac(e){let t=await this.readEfuse(e,0);t=t>>>0;let n=await this.readEfuse(e,1);n=n>>>0;let r=await this.readEfuse(e,3);r=r>>>0;let s=new Uint8Array(6);return r!=0?(s[0]=r>>16&255,s[1]=r>>8&255,s[2]=r&255):n>>16&255?(n>>16&255)==1?(s[0]=172,s[1]=208,s[2]=116):e.error("Unknown OUI"):(s[0]=24,s[1]=254,s[2]=52),s[3]=n>>8&255,s[4]=n&255,s[5]=t>>24&255,this._d2h(s[0])+":"+this._d2h(s[1])+":"+this._d2h(s[2])+":"+this._d2h(s[3])+":"+this._d2h(s[4])+":"+this._d2h(s[5])}getEraseSize(e,t){return t}}});var Kl={};ke(Kl,{ESP32P4ROM:()=>Hs});var Hs,Wl=D(()=>{Ms();Hs=class extends pn{constructor(){super(...arguments),this.CHIP_NAME="ESP32-P4",this.IMAGE_CHIP_ID=18,this.IROM_MAP_START=1073741824,this.IROM_MAP_END=1275068416,this.DROM_MAP_START=1073741824,this.DROM_MAP_END=1275068416,this.BOOTLOADER_FLASH_OFFSET=8192,this.CHIP_DETECT_MAGIC_VALUE=[0,182303440],this.UART_DATE_REG_ADDR=1343004812,this.EFUSE_BASE=1343410176,this.EFUSE_BLOCK1_ADDR=this.EFUSE_BASE+68,this.MAC_EFUSE_REG=this.EFUSE_BASE+68,this.SPI_REG_BASE=1342754816,this.SPI_USR_OFFS=24,this.SPI_USR1_OFFS=28,this.SPI_USR2_OFFS=32,this.SPI_MOSI_DLEN_OFFS=36,this.SPI_MISO_DLEN_OFFS=40,this.SPI_W0_OFFS=88,this.EFUSE_RD_REG_BASE=this.EFUSE_BASE+48,this.EFUSE_PURPOSE_KEY0_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY0_SHIFT=24,this.EFUSE_PURPOSE_KEY1_REG=this.EFUSE_BASE+52,this.EFUSE_PURPOSE_KEY1_SHIFT=28,this.EFUSE_PURPOSE_KEY2_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY2_SHIFT=0,this.EFUSE_PURPOSE_KEY3_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY3_SHIFT=4,this.EFUSE_PURPOSE_KEY4_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY4_SHIFT=8,this.EFUSE_PURPOSE_KEY5_REG=this.EFUSE_BASE+56,this.EFUSE_PURPOSE_KEY5_SHIFT=12,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT_REG=this.EFUSE_RD_REG_BASE,this.EFUSE_DIS_DOWNLOAD_MANUAL_ENCRYPT=1<<20,this.EFUSE_SPI_BOOT_CRYPT_CNT_REG=this.EFUSE_BASE+52,this.EFUSE_SPI_BOOT_CRYPT_CNT_MASK=7<<18,this.EFUSE_SECURE_BOOT_EN_REG=this.EFUSE_BASE+56,this.EFUSE_SECURE_BOOT_EN_MASK=1<<20,this.PURPOSE_VAL_XTS_AES256_KEY_1=2,this.PURPOSE_VAL_XTS_AES256_KEY_2=3,this.PURPOSE_VAL_XTS_AES128_KEY=4,this.SUPPORTS_ENCRYPTED_FLASH=!0,this.FLASH_ENCRYPTED_WRITE_ALIGN=16,this.MEMORY_MAP=[[0,65536,"PADDING"],[1073741824,1275068416,"DROM"],[1341128704,1341784064,"DRAM"],[1341128704,1341784064,"BYTE_ACCESSIBLE"],[1337982976,1338114048,"DROM_MASK"],[1337982976,1338114048,"IROM_MASK"],[1073741824,1275068416,"IROM"],[1341128704,1341784064,"IRAM"],[1343258624,1343291392,"RTC_IRAM"],[1343258624,1343291392,"RTC_DRAM"],[1611653120,1611661312,"MEM_INTERNAL2"]],this.UF2_FAMILY_ID=1026592404,this.EFUSE_MAX_KEY=5,this.KEY_PURPOSES={0:"USER/EMPTY",1:"ECDSA_KEY",2:"XTS_AES_256_KEY_1",3:"XTS_AES_256_KEY_2",4:"XTS_AES_128_KEY",5:"HMAC_DOWN_ALL",6:"HMAC_DOWN_JTAG",7:"HMAC_DOWN_DIGITAL_SIGNATURE",8:"HMAC_UP",9:"SECURE_BOOT_DIGEST0",10:"SECURE_BOOT_DIGEST1",11:"SECURE_BOOT_DIGEST2",12:"KM_INIT_KEY"}}async getPkgVersion(e){let n=this.EFUSE_BLOCK1_ADDR+8;return await e.readReg(n)>>27&7}async getMinorChipVersion(e){let n=this.EFUSE_BLOCK1_ADDR+8;return await e.readReg(n)>>0&15}async getMajorChipVersion(e){let n=this.EFUSE_BLOCK1_ADDR+8;return await e.readReg(n)>>4&3}async getChipDescription(e){let n=await this.getPkgVersion(e)===0?"ESP32-P4":"unknown ESP32-P4",r=await this.getMajorChipVersion(e),s=await this.getMinorChipVersion(e);return`${n} (revision v${r}.${s})`}async getChipFeatures(e){return["High-Performance MCU"]}async getCrystalFreq(e){return 40}async getFlashVoltage(e){}async overrideVddsdio(e){e.debug("VDD_SDIO overrides are not supported for ESP32-P4")}async readMac(e){let t=await e.readReg(this.MAC_EFUSE_REG);t=t>>>0;let n=await e.readReg(this.MAC_EFUSE_REG+4);n=n>>>0&65535;let r=new Uint8Array(6);return r[0]=n>>8&255,r[1]=n&255,r[2]=t>>24&255,r[3]=t>>16&255,r[4]=t>>8&255,r[5]=t&255,this._d2h(r[0])+":"+this._d2h(r[1])+":"+this._d2h(r[2])+":"+this._d2h(r[3])+":"+this._d2h(r[4])+":"+this._d2h(r[5])}async getFlashCryptConfig(e){}async getSecureBootEnabled(e){return await e.readReg(this.EFUSE_SECURE_BOOT_EN_REG)&this.EFUSE_SECURE_BOOT_EN_MASK}async getKeyBlockPurpose(e,t){if(t<0||t>this.EFUSE_MAX_KEY){e.debug(`Valid key block numbers must be in range 0-${this.EFUSE_MAX_KEY}`);return}let n=[[this.EFUSE_PURPOSE_KEY0_REG,this.EFUSE_PURPOSE_KEY0_SHIFT],[this.EFUSE_PURPOSE_KEY1_REG,this.EFUSE_PURPOSE_KEY1_SHIFT],[this.EFUSE_PURPOSE_KEY2_REG,this.EFUSE_PURPOSE_KEY2_SHIFT],[this.EFUSE_PURPOSE_KEY3_REG,this.EFUSE_PURPOSE_KEY3_SHIFT],[this.EFUSE_PURPOSE_KEY4_REG,this.EFUSE_PURPOSE_KEY4_SHIFT],[this.EFUSE_PURPOSE_KEY5_REG,this.EFUSE_PURPOSE_KEY5_SHIFT]],[r,s]=n[t];return await e.readReg(r)>>s&15}async isFlashEncryptionKeyValid(e){let t=[];for(let a=0;a<=this.EFUSE_MAX_KEY;a++){let o=await this.getKeyBlockPurpose(e,a);t.push(o)}if(typeof t.find(a=>a===this.PURPOSE_VAL_XTS_AES128_KEY)!==void 0)return!0;let r=t.find(a=>a===this.PURPOSE_VAL_XTS_AES256_KEY_1),s=t.find(a=>a===this.PURPOSE_VAL_XTS_AES256_KEY_2);return typeof r!==void 0&&typeof s!==void 0}}});async function Uh(i){switch(i){case 15736195:{let{ESP32ROM:e}=await Promise.resolve().then(()=>(Ms(),yl));return new e}case 203546735:case 1867591791:case 2084675695:{let{ESP32C2ROM:e}=await Promise.resolve().then(()=>(Ml(),Dl));return new e}case 1763790959:case 456216687:case 1216438383:case 1130455151:{let{ESP32C3ROM:e}=await Promise.resolve().then(()=>(Ts(),Rl));return new e}case 752910447:{let{ESP32C6ROM:e}=await Promise.resolve().then(()=>(rr(),Tl));return new e}case 606167151:case 871374959:case 1333878895:{let{ESP32C61ROM:e}=await Promise.resolve().then(()=>(Fl(),kl));return new e}case 285294703:case 1675706479:case 1607549039:{let{ESP32C5ROM:e}=await Promise.resolve().then(()=>(Ul(),vl));return new e}case 3619110528:case 2548236392:{let{ESP32H2ROM:e}=await Promise.resolve().then(()=>(Ll(),Pl));return new e}case 9:{let{ESP32S3ROM:e}=await Promise.resolve().then(()=>(Hl(),Ql));return new e}case 1990:{let{ESP32S2ROM:e}=await Promise.resolve().then(()=>(Gl(),Ol));return new e}case 4293968129:{let{ESP8266ROM:e}=await Promise.resolve().then(()=>(Yl(),Nl));return new e}case 0:case 182303440:case 117676761:{let{ESP32P4ROM:e}=await Promise.resolve().then(()=>(Wl(),Kl));return new e}default:return null}}var xn,zl=D(()=>{Oa();cl();bs();ys();Ds();bl();xn=class{constructor(e){var t,n,r,s,a,o,c,l;this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.DEFAULT_TIMEOUT=3e3,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=this.CHIP_ERASE_TIMEOUT*2,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.flashSizeBytes=function(A){let h=-1;return A.indexOf("KB")!==-1?h=parseInt(A.slice(0,A.indexOf("KB")))*1024:A.indexOf("MB")!==-1&&(h=parseInt(A.slice(0,A.indexOf("MB")))*1024*1024),h},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=e.transport,this.baudrate=e.baudrate,this.resetConstructors={classicReset:(A,h)=>new gn(A,h),customReset:(A,h)=>new wn(A,h),hardReset:(A,h)=>new En(A,h),usbJTAGSerialReset:A=>new un(A)},e.serialOptions&&(this.serialOptions=e.serialOptions),e.romBaudrate&&(this.romBaudrate=e.romBaudrate),e.terminal&&(this.terminal=e.terminal,this.terminal.clean()),typeof e.debugLogging<"u"&&(this.debugLogging=e.debugLogging),e.port&&(this.transport=new zt(e.port)),typeof e.enableTracing<"u"&&(this.transport.tracing=e.enableTracing),!((t=e.resetConstructors)===null||t===void 0)&&t.classicReset&&(this.resetConstructors.classicReset=(n=e.resetConstructors)===null||n===void 0?void 0:n.classicReset),!((r=e.resetConstructors)===null||r===void 0)&&r.customReset&&(this.resetConstructors.customReset=(s=e.resetConstructors)===null||s===void 0?void 0:s.customReset),!((a=e.resetConstructors)===null||a===void 0)&&a.hardReset&&(this.resetConstructors.hardReset=(o=e.resetConstructors)===null||o===void 0?void 0:o.hardReset),!((c=e.resetConstructors)===null||c===void 0)&&c.usbJTAGSerialReset&&(this.resetConstructors.usbJTAGSerialReset=(l=e.resetConstructors)===null||l===void 0?void 0:l.usbJTAGSerialReset),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(e){return new Promise(t=>setTimeout(t,e))}write(e,t=!0){this.terminal?t?this.terminal.writeLine(e):this.terminal.write(e):console.log(e)}error(e,t=!0){this.write(`Error: ${e}`,t)}info(e,t=!0){this.write(e,t)}debug(e,t=!0){this.debugLogging&&this.write(`Debug: ${e}`,t)}_shortToBytearray(e){return new Uint8Array([e&255,e>>8&255])}_intToByteArray(e){return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}_byteArrayToShort(e,t){return e|t>>8}_byteArrayToInt(e,t,n,r){return e|t<<8|n<<16|r<<24}_appendBuffer(e,t){let n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}_appendArray(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}ui8ToBstr(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}bstrToUi8(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}async flushInput(){try{await this.transport.flushInput()}catch(e){this.error(e.message)}}async readPacket(e=null,t=this.DEFAULT_TIMEOUT){for(let n=0;n<100;n++){let{value:r}=await this.transport.read(t).next();if(!r||r.length<8)continue;let s=r[0];if(s!==1)continue;let a=r[1],o=this._byteArrayToInt(r[4],r[5],r[6],r[7]),c=r.slice(8);if(s==1){if(e==null||a==e)return[o,c];if(c[0]!=0&&c[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new Z("unsupported command error")}}throw new Z("invalid response")}async command(e=null,t=new Uint8Array(0),n=0,r=!0,s=this.DEFAULT_TIMEOUT){if(e!=null){this.transport.tracing&&this.transport.trace(`command op:0x${e.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${r?1:0} timeout=${(s/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);let a=new Uint8Array(8+t.length);a[0]=0,a[1]=e,a[2]=this._shortToBytearray(t.length)[0],a[3]=this._shortToBytearray(t.length)[1],a[4]=this._intToByteArray(n)[0],a[5]=this._intToByteArray(n)[1],a[6]=this._intToByteArray(n)[2],a[7]=this._intToByteArray(n)[3];let o;for(o=0;o<t.length;o++)a[8+o]=t[o];await this.transport.write(a)}return r?this.readPacket(e,s):[0,new Uint8Array(0)]}async readReg(e,t=this.DEFAULT_TIMEOUT){let n=this._intToByteArray(e);return(await this.command(this.ESP_READ_REG,n,void 0,void 0,t))[0]}async writeReg(e,t,n=4294967295,r=0,s=0){let a=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));a=this._appendArray(a,this._intToByteArray(n)),a=this._appendArray(a,this._intToByteArray(r)),s>0&&(a=this._appendArray(a,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(s))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,a)}async sync(){this.debug("Sync");let e=new Uint8Array(36),t;for(e[0]=7,e[1]=7,e[2]=18,e[3]=32,t=0;t<32;t++)e[4+t]=85;try{let n=await this.command(8,e,void 0,void 0,100);this.syncStubDetected=n[0]===0;for(let r=0;r<7;r++)n=await this.command(),this.syncStubDetected=this.syncStubDetected&&n[0]===0;return n}catch(n){throw this.debug("Sync err "+n),n}}async _connectAttempt(e="default_reset",t){this.debug("_connect_attempt "+e),t&&await t.reset();let n=this.transport.inWaiting(),r=await this.transport.newRead(n>0?n:1,this.DEFAULT_TIMEOUT),s=Array.from(r,d=>String.fromCharCode(d)).join(""),a=/boot:(0x[0-9a-fA-F]+)(.*waiting for download)?/,o=s.match(a),c=!1,l="",A=!1;o&&(c=!0,l=o[1],A=!!o[2]);let h="";for(let d=0;d<5;d++)try{this.debug(`Sync connect attempt ${d}`);let f=await this.sync();return this.debug(f[0].toString()),"success"}catch(f){this.debug(`Error at sync ${f}`),f instanceof Error?h=f.message:typeof f=="string"?h=f:h=JSON.stringify(f)}return c&&(h=`Wrong boot mode detected (${l}).
        This chip needs to be in download mode.`,A&&(h=`Download mode successfully detected, but getting no sync reply:
           The serial TX path seems to be down.`)),h}constructResetSequence(e){if(e!=="no_reset"){if(e==="usb_reset"||this.transport.getPid()===this.USB_JTAG_SERIAL_PID){if(this.resetConstructors.usbJTAGSerialReset)return this.debug("using USB JTAG Serial Reset"),[this.resetConstructors.usbJTAGSerialReset(this.transport)]}else if(this.resetConstructors.classicReset)return this.debug("using Classic Serial Reset"),[this.resetConstructors.classicReset(this.transport,50),this.resetConstructors.classicReset(this.transport,550)]}return[]}async connect(e="default_reset",t=7,n=!0){let r;this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions);let s=this.constructResetSequence(e);for(let a=0;a<t;a++){let o=s.length>0?s[a%s.length]:null;if(r=await this._connectAttempt(e,o),r==="success")break}if(r!=="success")throw new Z("Failed to connect with the device");if(this.debug("Connect attempt successful."),this.info(`
\r`,!1),n){let a=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+a.toString(16));let o=await Uh(a);if(this.chip===null)throw new Z(`Unexpected CHIP magic value ${a}. Failed to autodetect chip type.`);this.chip=o}}async detectChip(e="default_reset"){await this.connect(e),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(e="",t=null,n=new Uint8Array(0),r=0,s=this.DEFAULT_TIMEOUT){this.debug("check_command "+e);let a=await this.command(t,n,r,void 0,s);return a[1].length>4?a[1]:a[0]}async memBegin(e,t,n,r){if(this.IS_STUB){let a=r,o=r+e,c=await nr(this.chip.CHIP_NAME);if(c){let l=[[c.bss_start||c.data_start,c.data_start+c.decodedData.length],[c.text_start,c.text_start+c.decodedText.length]];for(let[A,h]of l)if(a<h&&o>A)throw new Z(`Software loader is resident at 0x${A.toString(16).padStart(8,"0")}-0x${h.toString(16).padStart(8,"0")}.
            Can't load binary at overlapping address range 0x${a.toString(16).padStart(8,"0")}-0x${o.toString(16).padStart(8,"0")}.
            Either change binary loading address, or use the no-stub option to disable the software loader.`)}}this.debug("mem_begin "+e+" "+t+" "+n+" "+r.toString(16));let s=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(n)),s=this._appendArray(s,this._intToByteArray(r)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,s)}checksum(e,t=this.ESP_CHECKSUM_MAGIC){for(let n=0;n<e.length;n++)t^=e[n];return t}async memBlock(e,t){let n=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,e);let r=this.checksum(e);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,n,r)}async memFinish(e){let t=e===0?1:0,n=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,n,void 0,200)}async flashSpiAttach(e){let t=this._intToByteArray(e);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}timeoutPerMb(e,t){let n=e*(t/1e6);return n<3e3?3e3:n}async flashBegin(e,t){let n=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),r=this.chip.getEraseSize(t,e),s=new Date,a=s.getTime(),o=3e3;this.IS_STUB==!1&&(o=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,e)),this.debug("flash begin "+r+" "+n+" "+this.FLASH_WRITE_SIZE+" "+t+" "+e);let c=this._appendArray(this._intToByteArray(r),this._intToByteArray(n));c=this._appendArray(c,this._intToByteArray(this.FLASH_WRITE_SIZE)),c=this._appendArray(c,this._intToByteArray(t)),this.IS_STUB==!1&&(c=this._appendArray(c,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,c,void 0,o);let l=s.getTime();return e!=0&&this.IS_STUB==!1&&this.info("Took "+(l-a)/1e3+"."+(l-a)%1e3+"s to erase flash block"),n}async flashDeflBegin(e,t,n){let r=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=new Date,o=a.getTime(),c,l;this.IS_STUB?(c=e,l=this.DEFAULT_TIMEOUT):(c=s*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,c)),this.info("Compressed "+e+" bytes to "+t+"...");let A=this._appendArray(this._intToByteArray(c),this._intToByteArray(r));A=this._appendArray(A,this._intToByteArray(this.FLASH_WRITE_SIZE)),A=this._appendArray(A,this._intToByteArray(n)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3"||this.chip.CHIP_NAME==="ESP32-C2")&&this.IS_STUB===!1&&(A=this._appendArray(A,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,A,void 0,l);let h=a.getTime();return e!=0&&this.IS_STUB===!1&&this.info("Took "+(h-o)/1e3+"."+(h-o)%1e3+"s to erase flash block"),r}async flashBlock(e,t,n){let r=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,e);let s=this.checksum(e);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,r,s,n)}async flashDeflBlock(e,t,n){let r=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,e);let s=this.checksum(e);this.debug("flash_defl_block "+e[0].toString(16)+" "+e[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,r,s,n)}async flashFinish(e=!1){let t=e?0:1,n=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,n)}async flashDeflFinish(e=!1){let t=e?0:1,n=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,n)}async runSpiflashCommand(e,t,n){let o=this.chip.SPI_REG_BASE,c=o+0,l=o+this.chip.SPI_USR_OFFS,A=o+this.chip.SPI_USR1_OFFS,h=o+this.chip.SPI_USR2_OFFS,d=o+this.chip.SPI_W0_OFFS,f;this.chip.SPI_MOSI_DLEN_OFFS!=null?f=async(S,T)=>{let M=o+this.chip.SPI_MOSI_DLEN_OFFS,b=o+this.chip.SPI_MISO_DLEN_OFFS;S>0&&await this.writeReg(M,S-1),T>0&&await this.writeReg(b,T-1)}:f=async(S,T)=>{let M=A,b=17,k=8,rt=S===0?0:S-1,Ai=(T===0?0:T-1)<<k|rt<<b;await this.writeReg(M,Ai)};let g=1<<18,w=28;if(n>32)throw new Z("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new Z("Writing more than 64 bytes of data with one SPI command is unsupported");let m=t.length*8,C=await this.readReg(l),I=await this.readReg(h),p=-2147483648,B;n>0&&(p|=268435456),m>0&&(p|=134217728),await f(m,n),await this.writeReg(l,p);let _=7<<w|e;if(await this.writeReg(h,_),m==0)await this.writeReg(d,0);else{if(t.length%4!=0){let T=new Uint8Array(t.length%4);t=this._appendArray(t,T)}let S=d;for(B=0;B<t.length-4;B+=4)_=this._byteArrayToInt(t[B],t[B+1],t[B+2],t[B+3]),await this.writeReg(S,_),S+=4}for(await this.writeReg(c,g),B=0;B<10&&(_=await this.readReg(c)&g,_!=0);B++);if(B===10)throw new Z("SPI command did not complete in time");let P=await this.readReg(d);return await this.writeReg(l,C),await this.writeReg(h,I),P}async readFlashId(){let t=new Uint8Array(0);return await this.runSpiflashCommand(159,t,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let e=new Date,t=e.getTime(),n=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);e=new Date;let r=e.getTime();return this.info("Chip erase completed successfully in "+(r-t)/1e3+"s"),n}toHex(e){return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(e,t){let n=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t),r=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0));let s=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,r,void 0,n);return s instanceof Uint8Array&&s.length>16&&(s=s.slice(0,16)),this.toHex(s)}async readFlash(e,t,n=null){let r=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(4096)),r=this._appendArray(r,this._intToByteArray(1024));let s=await this.checkCommand("read flash",this.ESP_READ_FLASH,r);if(s!=0)throw new Z("Failed to read memory: "+s);let a=new Uint8Array(0);for(;a.length<t;){let{value:o}=await this.transport.read(this.FLASH_READ_TIMEOUT).next();if(o instanceof Uint8Array)o.length>0&&(a=this._appendArray(a,o),await this.transport.write(this._intToByteArray(a.length)),n&&n(o,a.length,t));else throw new Z("Failed to read memory: "+o)}return a}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");let e=await nr(this.chip.CHIP_NAME);if(e===void 0)throw this.debug("Error loading Stub json"),new Error("Error loading Stub json");let t=[e.decodedText,e.decodedData];for(let s=0;s<t.length;s++)if(t[s]){let a=s===0?e.text_start:e.data_start,o=t[s].length,c=Math.floor((o+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK);await this.memBegin(o,c,this.ESP_RAM_BLOCK,a);for(let l=0;l<c;l++){let A=l*this.ESP_RAM_BLOCK,h=A+this.ESP_RAM_BLOCK;await this.memBlock(t[s].slice(A,h),l)}}this.info("Running stub..."),await this.memFinish(e.entry);let{value:n}=await this.transport.read(this.DEFAULT_TIMEOUT).next(),r=String.fromCharCode(...n);if(r!=="OHAI")throw new Z(`Failed to start stub. Unexpected response ${r}`);return this.info("Stub running..."),this.IS_STUB=!0,this.chip}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);let e=this.IS_STUB?this.romBaudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(e));await this.command(this.ESP_CHANGE_BAUDRATE,t),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions)}async main(e="default_reset"){await this.detectChip(e);let t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),typeof this.chip.postConnect<"u"&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(e){if(typeof this.chip.FLASH_SIZES[e]>"u")throw new Z("Flash size "+e+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[e]}_updateImageFlashParams(e,t,n,r,s){if(this.debug("_update_image_flash_params "+n+" "+r+" "+s),e.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return e;if(n==="keep"&&r==="keep"&&s==="keep")return this.info("Not changing the image"),e;let a=parseInt(e[0]),o=parseInt(e[2]),c=parseInt(e[3]);if(a!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),e;r!=="keep"&&(o={qio:0,qout:1,dio:2,dout:3}[r]);let l=c&15;s!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[s]);let A=c&240;n!=="keep"&&(A=this.parseFlashSizeArg(n));let h=o<<8|l+A;return this.info("Flash params set to "+h.toString(16)),parseInt(e[2])!==o<<8&&(e=e.substring(0,2)+(o<<8).toString()+e.substring(3)),parseInt(e[3])!==l+A&&(e=e.substring(0,3)+(l+A).toString()+e.substring(4)),e}async writeFlash(e){if(this.debug("EspLoader program"),e.flashSize!=="keep"){let r=this.flashSizeBytes(e.flashSize);for(let s=0;s<e.fileArray.length;s++)if(e.fileArray[s].data.length+e.fileArray[s].address>r)throw new Z(`File ${s+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&e.eraseAll===!0&&await this.eraseFlash();let t,n;for(let r=0;r<e.fileArray.length;r++){if(this.debug("Data Length "+e.fileArray[r].data.length),t=e.fileArray[r].data,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this.ui8ToBstr(_l(this.bstrToUi8(t),4)),n=e.fileArray[r].address,t=this._updateImageFlashParams(t,n,e.flashSize,e.flashMode,e.flashFreq);let s=null;e.calculateMD5Hash&&(s=e.calculateMD5Hash(t),this.debug("Image MD5 "+s));let a=t.length,o;if(e.compress){let C=this.bstrToUi8(t);t=this.ui8ToBstr(ol(C,{level:9})),o=await this.flashDeflBegin(a,t.length,n)}else o=await this.flashBegin(a,n);let c=0,l=0,A=t.length;e.reportProgress&&e.reportProgress(r,0,A);let h=new Date,d=h.getTime(),f=5e3,g=new ll({chunkSize:1}),w=0;for(g.onData=function(C){w+=C.byteLength};t.length>0;){this.debug("Write loop "+n+" "+c+" "+o),this.info("Writing at 0x"+(n+w).toString(16)+"... ("+Math.floor(100*(c+1)/o)+"%)");let C=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(e.compress){let I=w;g.push(C,!1);let p=w-I,B=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,p)>3e3&&(B=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,p)),this.IS_STUB===!1&&(f=B),await this.flashDeflBlock(C,c,f),this.IS_STUB&&(f=B)}else throw new Z("Yet to handle Non Compressed writes");l+=C.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),c++,e.reportProgress&&e.reportProgress(r,l,A)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,f),h=new Date;let m=h.getTime()-d;if(e.compress&&this.info("Wrote "+a+" bytes ("+l+" compressed) at 0x"+n.toString(16)+" in "+m/1e3+" seconds."),s){let C=await this.flashMd5sum(n,a);if(new String(C).valueOf()!=new String(s).valueOf())throw this.info("File  md5: "+s),this.info("Flash md5: "+C),new Z("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),e.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");let e=await this.readFlashId();this.info("Manufacturer: "+(e&255).toString(16));let t=e>>16&255;this.info("Device: "+(e>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");let t=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[t]}async softReset(e){if(this.IS_STUB){if(this.chip.CHIP_NAME!="ESP8266")throw new Z("Soft resetting is currently only supported on ESP8266");e?(await this.flashBegin(0,0),await this.flashFinish(!0)):await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}else{if(e)return;await this.flashBegin(0,0),await this.flashFinish(!1)}}async after(e="hard_reset",t){switch(e){case"hard_reset":this.resetConstructors.hardReset&&(this.info("Hard resetting via RTS pin..."),await this.resetConstructors.hardReset(this.transport,t).reset());break;case"soft_reset":this.info("Soft resetting..."),await this.softReset(!1);break;case"no_reset_stub":this.info("Staying in flasher stub.");break;default:this.info("Staying in bootloader."),this.IS_STUB&&this.softReset(!0);break}}}});var Jl=D(()=>{zl();ys();ct();bs();Ds()});var Cn,Vl=D(()=>{"use strict";Cn=class{constructor(e){this.port=null;this.reader=null;this.writer=null;this.onDataCbs=[];this.onTxCb=null;this.bitrate=e}static isSupported(){return typeof navigator<"u"&&!!navigator.serial}startIO(){if(!this.port)return;let e=this.port.readable;e&&(this.reader=e.getReader(),(async()=>{try{for(;;){let n=this.reader;if(!n)break;let{value:r,done:s}=await n.read();if(s)break;if(r)for(let a of this.onDataCbs)try{a(r)}catch{}}}catch{}})());let t=this.port.writable;t&&(this.writer=t.getWriter())}async requestAndOpen(){let e=await navigator.serial.requestPort();await e.open({baudRate:this.bitrate}),this.port=e,this.startIO()}async openGranted(){let e=await navigator.serial.getPorts?.();if(!e||e.length===0)throw new Error("No previously granted serial ports");let t=e[0];await t.open({baudRate:this.bitrate}),this.port=t,this.startIO()}useExistingPortAndStart(e){this.port=e,this.startIO()}async reopenWithBaudrate(e){let t=this.port;if(!t)throw new Error("serial not open");try{if(this.reader){try{await this.reader.cancel()}catch{}try{this.reader.releaseLock?.()}catch{}this.reader=null}if(this.writer){try{await this.writer.close()}catch{}try{this.writer.releaseLock?.()}catch{}this.writer=null}try{await t.close()}catch{}await t.open({baudRate:e}),this.startIO()}catch(n){throw this.reader=null,this.writer=null,n}}async write(e){if(!this.writer)throw new Error("serial not open");try{this.onTxCb?.(e)}catch{}await this.writer.write(e)}async setSignals(e){let t=this.port;!t||!t.setSignals||await t.setSignals(e)}onData(e){this.onDataCbs.push(e)}offData(e){let t=this.onDataCbs.indexOf(e);t>=0&&this.onDataCbs.splice(t,1)}onTx(e){this.onTxCb=e}async close(){try{await this.reader?.cancel()}catch{}try{await this.writer?.close()}catch{}try{await this.port?.close()}catch{}this.reader=null,this.writer=null,this.port=null,this.onDataCbs=[],this.onTxCb=null}}});var Bn,jl=D(()=>{"use strict";Bn=class{constructor(e){this.ws=null;this.onDataCbs=[];this.onTxCb=null;this.wsBase=e||`ws://${localStorage.getItem("bridgeHost")||"127.0.0.1"}:${Number(localStorage.getItem("bridgePort")||8765)||8765}`}async connect(e,t){let n=`${this.wsBase}/connect?host=${encodeURIComponent(e)}&port=${t}`;await new Promise((r,s)=>{let a=new WebSocket(n);a.binaryType="arraybuffer",a.onopen=()=>{this.ws=a,r()},a.onerror=()=>s(new Error("WebSocket error")),a.onmessage=o=>{let c=o.data instanceof ArrayBuffer?new Uint8Array(o.data):new Uint8Array;if(c.length!==0)for(let l of this.onDataCbs)try{l(c)}catch{}},a.onclose=o=>{this.ws===null&&s(new Error(`WebSocket closed (${o.code})`))}})}async write(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("tcp not connected");try{this.onTxCb?.(e)}catch{}e.length!==0&&this.ws.send(e)}onData(e){this.onDataCbs.push(e)}offData(e){let t=this.onDataCbs.indexOf(e);t>=0&&this.onDataCbs.splice(t,1)}onTx(e){this.onTxCb=e}close(){try{this.ws?.close()}catch{}this.ws=null,this.onDataCbs=[],this.onTxCb=null}}});function yt(i,e=2){return"0x"+i.toString(16).toUpperCase().padStart(e,"0")}function We(i){return Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(" ")}var x,Rt=D(()=>{"use strict";x=i=>new Promise(e=>setTimeout(e,i))});async function Os(i,e=8e3,t="GET"){let n=new AbortController,r=setTimeout(()=>n.abort(),e);try{let s=await fetch(i,{method:t,signal:n.signal});if(!s.ok){let o=await s.text().catch(()=>"");throw new Error(`HTTP ${s.status} ${s.statusText}${o?` - ${o}`:""}`)}return s.type==="opaque"?{text:null,opaque:!0}:{text:await s.text(),opaque:!1}}catch(s){let o=s?.message||String(s);if(/Failed to fetch|TypeError|CORS|NetworkError/i.test(o))try{return await fetch(i,{method:t,mode:"no-cors",signal:n.signal}),{text:null,opaque:!0}}catch{throw s}throw s}finally{clearTimeout(r)}}function Se(i,e,t,n,r,s,a){let o=(r||"unknown").trim().replace(/\s+/g,"-").replace(/[^A-Za-z0-9._-]/g,""),c=(s||"unknown").toUpperCase().replace(/[^A-F0-9]/g,""),A=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),h=`${n}_${o}`;s&&(h+=`_${c}`),a&&(h+=`_${a}`),h+=`_${A}.${t}`;let d;if(i instanceof Uint8Array){let w=new Uint8Array(i);d=new Blob([w],{type:e})}else d=new Blob([i],{type:e});let f=URL.createObjectURL(d),g=document.createElement("a");return g.href=f,g.download=h,document.body.appendChild(g),g.click(),g.remove(),setTimeout(()=>URL.revokeObjectURL(f),1e3),h}var Vt=D(()=>{"use strict"});function Xl(i){let e=65535;for(let t of i)e=e>>8^Hh[(e^t)&255];return e^65535}var Ph,Gs,Lh,Zl,Qh,In,Ns,Hh,jt,sr=D(()=>{"use strict";Ph=128,Gs=2,Lh=6,Zl=2,Qh=8,In=126,Ns=125,Hh=new Uint16Array([0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960]);jt=class{constructor(e){this.buffer=[];this.pendingResponse=null;this.disposed=!1;this.tid=1;this.logger=()=>{};this.link=e}setLogger(e){this.logger=e}dispose(){this.disposed=!0,this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.reject(new Error("Spinel client disposed")),this.pendingResponse=null)}handleData(e){if(!this.disposed){for(let t of e)this.buffer.push(t);this.processBuffer()}}processBuffer(){for(;;){let e=this.buffer.indexOf(In);if(e===-1){this.buffer=[];return}e>0&&(this.buffer=this.buffer.slice(e));let t=this.buffer.indexOf(In,1);if(t===-1)return;let n=this.buffer.slice(1,t);if(this.buffer=this.buffer.slice(t+1),!(n.length<4))try{let r=this.hdlcUnstuff(new Uint8Array(n));if(r.length<3)continue;let s=r.slice(0,r.length-2),a=(r[r.length-2]|r[r.length-1]<<8)&65535,o=Xl(s);if(a!==o){this.logger(`FCS mismatch: received ${a.toString(16)}, calculated ${o.toString(16)}`);continue}this.handleFrame(s)}catch(r){this.logger(`Spinel frame error: ${r}`)}}}hdlcUnstuff(e){let t=[],n=!1;for(let r of e)n?(t.push(r^32),n=!1):r===Ns?n=!0:t.push(r);return new Uint8Array(t)}hdlcStuff(e){let t=[];for(let n of e)n===In||n===Ns||n<32?t.push(Ns,n^32):t.push(n);return new Uint8Array(t)}handleFrame(e){if(e.length<2)return;e[1]===Lh&&this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.resolve(e.slice(2)),this.pendingResponse=null)}encodeVarint(e){if(e<127)return new Uint8Array([e]);let t=[];for(;e>0;){let n=e&127;e>>=7,e>0&&(n|=128),t.push(n)}return new Uint8Array(t)}decodeVarint(e,t){let n=0,r=0,s=t;for(;s<e.length;){let a=e[s++];if(n|=(a&127)<<r,!(a&128))break;r+=7}return[n,s]}async sendCommand(e,t,n,r=3e3){if(this.pendingResponse)throw new Error("Request already in flight");let s=Ph|this.tid&15;this.tid=this.tid+1&15||1;let a=this.encodeVarint(t),o=2+a.length+(n?.length||0),c=new Uint8Array(o);c[0]=s,c[1]=e,c.set(a,2),n&&c.set(n,2+a.length);let l=Xl(c),A=new Uint8Array(c.length+2);A.set(c),A[c.length]=l&255,A[c.length+1]=l>>8&255;let h=this.hdlcStuff(A),d=new Uint8Array(h.length+2);d[0]=In,d.set(h,1),d[d.length-1]=In;let f=new Promise((g,w)=>{let m=window.setTimeout(()=>{this.pendingResponse&&(this.pendingResponse.reject(new Error("Spinel timeout")),this.pendingResponse=null)},r);this.pendingResponse={resolve:g,reject:w,timer:m}});return await this.link.write(d),f}async getEui64(){let e=await this.sendCommand(Gs,Qh),[,t]=this.decodeVarint(e,0),n=e.slice(t,t+8);if(n.length<8)throw new Error("Invalid EUI64 response");return Array.from(n).map(r=>r.toString(16).padStart(2,"0").toUpperCase()).join(":")}async getVersion(){let e=await this.sendCommand(Gs,Zl),[,t]=this.decodeVarint(e,0),n=e.slice(t),r=n.indexOf(0),s=new TextDecoder().decode(r>=0?n.slice(0,r):n);return this.logger(`Spinel Version string: ${s}`),s}async getOpenThreadInfo(){try{let e=await this.getVersion();if(!e)return null;let t=e,n=e.match(/openthread\/([^;]+)/i);return n&&(t=n[1].trim()),{version:t,rawVersion:e}}catch(e){return this.logger(`getOpenThreadInfo error: ${e}`),null}}async ping(e=1e3){try{return await this.sendCommand(Gs,Zl,void 0,e),!0}catch{return!1}}}});var Sn=D(()=>{"use strict"});function ar(i,e=0){let t=i.split(/\r?\n/).map(l=>l.trim()).filter(l=>l.length>0),n=[],r=0,s=Number.POSITIVE_INFINITY,a=0;for(let l=0;l<t.length;l++){let A=t[l];if(!A.startsWith(":"))throw new Error(`Invalid HEX line ${l+1}`);let h=parseInt(A.substr(1,2),16),d=parseInt(A.substr(3,4),16),f=parseInt(A.substr(7,2),16),g=A.substr(9,h*2);if(f===0){let w=[];for(let I=0;I<h;I++)w.push(parseInt(g.substr(I*2,2),16));let m=r,C=m+d;n.push({absBase:m,addr:d,bytes:w,type:f}),s=Math.min(s,C),a=Math.max(a,C+w.length-1)}else{if(f===1)break;f===2?r=(parseInt(g,16)&65535)<<4>>>0:f===4&&(r=(parseInt(g,16)&65535)<<16>>>0)}}if(s===Number.POSITIVE_INFINITY)return{startAddress:0,data:new Uint8Array(0)};let o=a-s+1;if(o<=0)return{startAddress:0,data:new Uint8Array(0)};let c=new Uint8Array(o);c.fill(e);for(let l of n){let h=l.absBase+l.addr-s;c.set(Uint8Array.from(l.bytes),h)}return{startAddress:s>>>0,data:c}}function or(i,e=0){let t=[];function r(c){let l=0;for(let A of c)l+=A;return-l&255}function s(c,l=2){return c.toString(16).toUpperCase().padStart(l,"0")}function a(c,l,A){for(let h=0;h<A;h++)if(c[l+h]!==255)return!1;return!0}let o=-1;for(let c=0;c<i.length;c+=16){let l=Math.min(16,i.length-c);if(a(i,c,l))continue;let A=e+c,h=A>>16&65535;if(h!==o){o=h;let m=[2,0,0,4,h>>8&255,h&255],C=r(m);t.push(`:02000004${s(h,4)}${s(C)}`)}let d=A&65535,f=[l,d>>8&255,d&255,0],g="";for(let m=0;m<l;m++){let C=i[c+m];f.push(C),g+=s(C)}let w=r(f);t.push(`:${s(l)}${s(d,4)}00${g}${s(w)}`)}return t.push(":00000001FF"),t.join(`
`)+`
`}var _n=D(()=>{"use strict"});async function Oh(){let i=G();if(i==="esp"||i==="arduino"){let n=["https://raw.githubusercontent.com/xyzroe/XZG-MT/refs/heads/cc_loader/bins/manifest.json"],r={firmwares:[]};for(let s of n)try{let a=await fetch(s,{cache:"no-cache"});if(!a.ok)continue;let o=await a.json();o.firmwares&&r.firmwares.push(...o.firmwares)}catch(a){console.error(`Failed to fetch manifest from ${s}`,a)}return r}let e=`https://raw.githubusercontent.com/xyzroe/XZG-MT/fw_files/${i}/manifest.json`,t=await fetch(e,{cache:"no-cache"});if(!t.ok)throw new Error(`HTTP ${t.status}`);if(i==="sl")return await t.json();if(i==="ti")return await t.json();throw new Error(`Unsupported family: ${i}`)}function Gh(i,e){let t=["router","coordinator","thread"],r={CC2652P2_launchpad:"CC2652P2_launchpad",CC2652P2_other:"CC2652P2_other",CC2652P7:"CC2652P7",CC1352P7:"CC2652P7",CC2652RB:"CC2652RB",CC2538:"CC2538"}[e]||e,s={};for(let a of t){let o=i[a];if(o){for(let c of Object.keys(o)){if(!c.startsWith(r))continue;let l=o[c];for(let A of Object.keys(l)){let h=l[A];(s[a]||(s[a]=[])).push({file:A,ver:h.ver,link:h.link,notes:h.notes,baud:h.baud,signed:h.signed})}}s[a]&&s[a].sort((c,l)=>cr(l.ver)-cr(c.ver))}}return s}function Nh(i,e){let t=["zigbee_ncp","zb_router","multipan","openthread_rcp"],s=({EFR32MG21:"EFR32MG21"}[e]||e).toLowerCase(),a={};for(let o of t){let c=i[o];if(c){for(let l of Object.keys(c)){let A=c[l];if(l.toLowerCase().includes(s)){let h=A;for(let d of Object.keys(h)){let f=h[d];for(let g of Object.keys(f)){let w=f[g];(a[o]||(a[o]=[])).push({file:g,ver:w.ver,link:w.link,notes:w.notes,baud:w.baud,board:d,signed:w.signed})}}}else for(let h of Object.keys(A)){let d=A[h];if(h.toLowerCase().includes(s)){let f=d;for(let g of Object.keys(f)){let w=f[g];(a[o]||(a[o]=[])).push({file:g,ver:w.ver,link:w.link,notes:w.notes,baud:w.baud,board:h,signed:w.signed})}}}}a[o]&&a[o].sort((l,A)=>ql(A.ver,l.ver))}}return a}function Yh(i,e){let t=[{pattern:"ESP8266EX",target:"ESP8266"},{pattern:"ESP32-C6*",target:"ESP32-C6"},{pattern:"ESP32-S3*",target:"ESP32-S3"},{pattern:"ESP32-C3*",target:"ESP32-C3"},{pattern:"ESP32-*",target:"ESP32"},{pattern:"ATmega328P",target:"ATmega328P"}],n=e;for(let{pattern:s,target:a}of t)if(s.endsWith("*")){let o=s.slice(0,-1);if(e.startsWith(o)){n=a;break}}else if(e===s){n=a;break}let r={};if(i.firmwares)for(let s of i.firmwares){if(n&&s.chip!==n)continue;let a=`This firmware transforms your Arduino/ESP device into a **CCLoader** programmer, allowing you to flash CC253x chips.

`;if(a+=`**\u{1F9E9} Chip Family:** ${s.chip}

`,a+=`**\u{1F6F9} Board:** ${s.board}

`,a+=`**\u{1F4C4} File:** \`${s.filename}\`


`,a+=`\u26A0\uFE0F Only boards with **CH340** or **CP2102** USB-TTL converters are supported. Boards with other converters or native USB connections will **not** work.

`,a+=`\u{1F4CD} Pin Configuration

`,a+=`| Function &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | GPIO Pin &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
`,a+=`| :--- | :--- |
`,s.pins){let o={dd:"\u{1F4BE}",dc:"\u23F1\uFE0F",reset:"\u{1F504}",led:"\u{1F4A1}"};for(let[c,l]of Object.entries(s.pins)){let A=o[c.toLowerCase()]||"\u{1F527}";a+=`| ${A} ${c.toUpperCase()} | \`${l.toUpperCase()}\` |
`}}(r.ccloader||(r.ccloader=[])).push({file:s.filename,ver:0,link:s.url,notes:a,board:s.board})}return r}function Kh(i){let e=i.split(/\r?\n/).filter(n=>n.length>0);if(e.length===0)return!1;let t=0;for(let n of e){if(t++>8)break;if(!n.startsWith(":"))return!1}return!0}function Ks(i,e=0){let t=Math.min(4096,i.length),n=new TextDecoder().decode(i.subarray(0,t));if(Kh(n)){let r=new TextDecoder().decode(i);return ar(r,e)}return{startAddress:0,data:i}}async function bn(i,e=0){let t=await fetch(i,{cache:"no-cache"});if(!t.ok)throw new Error(`HTTP ${t.status}`);let n=await t.arrayBuffer();return Ks(new Uint8Array(n),e)}function Ar(){if(!z||!lr)return;let i=z.selectedOptions[0];if(!i||!i.value)return;let e=lr.find(function(t){return t.key===i.value});return e&&e.notes}function Wh(i,e){let t=i.replace(/^v/,"").split(".").map(Number),n=e.replace(/^v/,"").split(".").map(Number);for(let r=0;r<Math.max(t.length,n.length);r++){let s=t[r]||0,a=n[r]||0;if(s>a)return 1;if(s<a)return-1}return 0}async function At(i){var n;if(!z)return;let e=i||F?.value||"";z.innerHTML="";let t=document.createElement("option");if(t.value="",t.textContent=e?`\u2014 Firmware for ${e} \u2014`:"\u2014 Detect device first \u2014",z.appendChild(t),!!e)try{let r=G();$l!==r&&(Ys=null);let s=Ys||(Ys=await Oh());$l=r,console.log("Fetched manifest:",s);let a,o=[];if(r==="sl"){a=Nh(s,e),o=["zigbee_ncp","zb_router","multipan","openthread_rcp"];let l=Ee?.value?.trim();if(l){let h=Wh(l,"1.9.2")<0;for(let d of o)a[d]&&(a[d]=a[d].filter(f=>h?f.signed===!0:f.signed!==!0))}}else if(r==="ti")a=Gh(s,e),o=["coordinator","router","thread"];else if(r==="esp"||r==="arduino")a=Yh(s,e),o=["ccloader"];else return;let c=[];for(let l of o){let A=a[l];if(A){A.sort((h,d)=>cr(d.ver)-cr(h.ver));for(let h of A){let d=`${l}|${h.file}`,f="";if(r==="sl"){let g="UNK";l==="zigbee_ncp"?g="NCP":l==="zb_router"?g="Router":l==="multipan"?g="MultiPAN":l==="openthread_rcp"&&(g="RCP"),f=`[${g}] ${h.ver} \u2014 ${h.file}`}else r==="esp"||r==="arduino"?f=`${h.board} \u2014 ${h.file}`:f=`${h.ver} \u2014 ${h.file}`;c.push({key:d,link:h.link,ver:h.ver,notes:h.notes,label:f,category:l,board:h.board})}}}if(lr=c,window.netFwItems=lr,window.netFwSelect=z,r==="sl"){let l={};for(let f of c){let g=f.board||"Generic";(l[g]||(l[g]=[])).push(f)}let A=["zigbee_ncp","zb_router","openthread_rcp","multipan"],h={zigbee_ncp:"ZB Coordinator",zb_router:"ZB Router",openthread_rcp:"OpenThread",multipan:"MultiPAN"},d=Object.keys(l).sort();for(let f of d){let g=l[f];g.sort((m,C)=>{let I=A.indexOf(m.category),p=A.indexOf(C.category);return I!==p?I-p:ql(C.ver,m.ver)});let w=document.createElement("optgroup");w.label=f;for(let m of g){let C=document.createElement("option");C.value=m.key;let I=h[m.category]||m.category;C.textContent=`[${I}] ${m.ver} \u2014 ${m.key.split("|")[1]}`,C.setAttribute("data-link",m.link),w.appendChild(C)}z.appendChild(w)}}else{let l={};for(let A of c)(l[n=A.category]||(l[n]=[])).push(A);for(let A of o)if(l[A]){let h=document.createElement("optgroup");A==="ccloader"?h.label="CCLoader":h.label=A.charAt(0).toUpperCase()+A.slice(1);for(let d of l[A]){let f=document.createElement("option");f.value=d.key,f.textContent=d.label,f.setAttribute("data-link",d.link),h.appendChild(f)}z.appendChild(h)}}if(c.length===0){let l=document.createElement("option");l.value="",l.textContent="\u2014 No matching firmware \u2014",z.appendChild(l)}u(`Cloud FW: ${c.length} options`)}catch(r){let s=r instanceof Error?r.message:String(r);u("Cloud FW manifest error: "+s)}}var lr,Ys,$l,cr,ql,hr=D(()=>{"use strict";_n();ze();yn();lr=null,Ys=null,$l=null;cr=i=>{let e=String(i),t=e.match(/(20\d{6})/);if(t)return parseInt(t[1],10);let n=parseInt(e.replace(/\D/g,""),10);return isNaN(n)?0:n},ql=(i,e)=>{let t=a=>String(a).split(".").map(l=>parseInt(l,10)||0),n=t(i),r=t(e),s=Math.max(n.length,r.length);for(let a=0;a<s;a++){let o=n[a]||0,c=r[a]||0;if(o!==c)return o-c}return 0}});var ha={};ke(ha,{FAMILY_VALUES:()=>Jh,arduinoBootSelect:()=>ta,autoBslToggle:()=>ki,autoBslWrap:()=>Si,autoScrollEl:()=>$s,baudMethodSelect:()=>na,baudUrlInput:()=>Re,baudUrlSelect:()=>vt,bitrateInput:()=>J,bootloaderVersionEl:()=>Ee,bootloaderVersionWrap:()=>Di,bridgeHostInput:()=>Pe,bridgeInfoClose:()=>cc,bridgeInfoCloseX:()=>Ac,bridgeInfoModal:()=>bi,bridgeLink:()=>jh,bridgePortInput:()=>Le,bridgeStatusIcon:()=>we,bslMethodSelect:()=>Cr,bslUrlInput:()=>Oe,bslUrlSelect:()=>Qe,btnAddEspFile:()=>sa,btnClearLog:()=>la,btnCopyLog:()=>ca,btnIeeeRead:()=>yr,btnIeeeWrite:()=>Rr,btnNvErase:()=>Mr,btnNvRead:()=>Dr,btnNvWrite:()=>Tr,chipModelEl:()=>F,chooseSerialBtn:()=>ea,connectDebuggerBtn:()=>Et,connectLoaderBtn:()=>wt,connectTcpBtn:()=>ra,connectionSection:()=>qs,ctrlUrlRow:()=>Zh,currentIeee:()=>Ti,debugFwVersionEl:()=>pt,debugManufEl:()=>Ve,debugModelEl:()=>Je,debugSerialEl:()=>vi,debuggerConnectWrap:()=>Ir,debuggerDetectSpinner:()=>Fi,debuggerOptionWrap:()=>Ui,developmentSection:()=>qh,deviceDetectBusy:()=>Ct,deviceDetectSpinner:()=>js,disconnectBtn:()=>Mt,enterBslBtn:()=>ft,eraseMethodWrap:()=>xt,eraseOptionWrap:()=>aa,familyDropdown:()=>Rn,familyDropdownBtn:()=>ht,familyDropdownMenu:()=>ii,familySection:()=>sc,findBaudToggle:()=>ge,findBaudWrap:()=>Dn,firmwareVersionEl:()=>K,firmwareVersionWrap:()=>Fn,flashSizeEl:()=>Y,flashSizeWrap:()=>Ri,flashWarning:()=>ne,forceWrite:()=>oa,generalSection:()=>qt,getModelBtn:()=>gt,getSelectedFamilyValue:()=>ef,getVersionBtn:()=>dt,hostInput:()=>oi,ieeeMacEl:()=>_e,ieeeMacWrap:()=>ti,implyGateToggle:()=>N,invertLevel:()=>ie,loaderConnectWrap:()=>Sr,localFile:()=>pe,log:()=>u,logEl:()=>ri,mdnsRefreshBtn:()=>ia,mdnsSelect:()=>be,multiFilesContainer:()=>mt,netFwNotesBtn:()=>_r,netFwRefreshBtn:()=>vn,netFwSelect:()=>z,newIeee:()=>Un,nvProgressEl:()=>De,optErase:()=>me,optVerify:()=>W,optWrite:()=>te,pinModeSelect:()=>ye,pingBtn:()=>Li,portInfoEl:()=>Dt,portInput:()=>Ft,progressEl:()=>X,readFlashBtn:()=>si,resetBtn:()=>Pi,resetDebugBtn:()=>Lt,rstMethodSelect:()=>Br,rstUrlInput:()=>Ge,rstUrlSelect:()=>He,serialSection:()=>ni,setBridgeLoading:()=>Aa,setBridgeStatus:()=>Fr,setSelectedFamilyValue:()=>tf,showIoEl:()=>ut,startFlashBtn:()=>br,swireFlashBtn:()=>ai,targetIdEl:()=>ce,targetIeeeEl:()=>Ae,tcpInfoBtn:()=>lc,tcpLinksBtn:()=>hc,tcpLinksPanel:()=>yi,tcpSection:()=>ei,tcpSettingsBtn:()=>xr,tcpSettingsPanel:()=>mr,telinkFamilySelect:()=>kt,telinkFamilyWrap:()=>Vs,telinkMethodSelect:()=>it,telinkMethodWrap:()=>Vh,toggleElement:()=>_i,updateConnectionUI:()=>Ne,updatePortInfo:()=>Qi,updateTelinkOptionsUI:()=>kr,updateUIForFamily:()=>Pn,verifyMethodWrap:()=>Ut,writeMethodWrap:()=>Pt});function kr(i){i==="uart"?(_i(ai,!0),_i(Vs,!0)):i==="swire"&&(_i(ai,!1),_i(Vs,!1))}function ef(){return tt}function tf(i){if(tt=i,ii&&ht){let e=ii.querySelector(`[data-value="${i}"]`);if(e){let t=e.querySelector("img")?.cloneNode(!0),n=e.querySelector("span")?.textContent||"",r=ht.querySelector(".dropdown-icon"),s=ht.querySelector(".dropdown-text");r&&t&&(r.src=t.src,r.alt=t.alt),s&&(s.textContent=n),ii.querySelectorAll(".custom-dropdown-item").forEach(a=>a.classList.remove("selected")),e.classList.add("selected")}}}function _i(i,e){i&&(e?i.classList.remove("d-none"):i.classList.add("d-none"))}function Xt(i,e,t){i&&(i.className=i.className.replace(e,t))}function $t(i){i.forEach(({el:e,show:t,oldClass:n,newClass:r})=>{t!==void 0&&_i(e,t),n&&r&&Xt(e,n,r)})}function Ii(i,e){i&&"textContent"in i&&(i.textContent=e)}function Er(i,e,t){i&&i.setAttribute(e,t)}function wr(i,e,t){i&&(i.href=e,i.textContent=t)}function nf(){$t([{el:qt,show:!0},{el:qs,show:!0},{el:ei,show:!0},{el:ni,show:!0},{el:fc,show:!0},{el:dc,show:!1},{el:Mn,show:!0},{el:Zs,show:!0},{el:Xs,show:!1},{el:Mi,show:!1},{el:uc,show:!1},{el:kn,show:!1},{el:Js,show:!0},{el:ac,show:!1},{el:oc,show:!1},{el:Ri,show:!0},{el:ti,show:!0},{el:gc,show:!0},{el:Ui,show:!1},{el:aa,show:!1},{el:Fn,show:!1},{el:Di,show:!1},{el:Si,show:!0},{el:Dn,show:!0},{el:si,show:!0},{el:Lt,show:!1},{el:ft,show:!0},{el:gt,show:!1},{el:dt,show:!0},{el:Li,show:!1},{el:ai,show:!1}]),Xt(ni,"col-md-12","col-md-6"),Xt(Mn,"col-md-12","col-md-6"),Xt(Ri,"col-md-4","col-md-6"),Xt(ti,"col-md-4","col-md-6"),Xt(Fn,"col-md-4","col-md-6"),Xt(Di,"col-md-4","col-md-6")}function Pn(){nf(),tt==="ti"?($t([{el:Mi,show:!0},{el:kn,show:!0},{el:Ri,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:ti,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:Fn,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:gt,show:!0},{el:Li,show:!0}]),Ii(nc,"Read and write secondary IEEE address."),Ii(dr,"Use a local file (*.hex or *.bin)."),Er(pe,"accept",".hex,.bin"),wr(gr,"https://github.com/xyzroe/XZG-MT/tree/fw_files","XZG-MT/fw_files")):tt==="sl"?($t([{el:Mi,show:!0},{el:uc,show:!0},{el:Ri,show:!1},{el:ti,show:!1},{el:gc,show:!1},{el:Fn,show:!0,oldClass:"col-md-6",newClass:"col-md-6"},{el:Di,show:!0,oldClass:"col-md-6",newClass:"col-md-6"},{el:si,show:!1}]),Ii(nc,"Read and write primary IEEE address. Use with caution!"),Ii(dr,"Use a local file (*.ota or *.gbl)."),Er(pe,"accept",".ota,.gbl"),wr(gr,"https://github.com/xyzroe/XZG-MT/tree/fw_files","XZG-MT/fw_files")):tt==="esp"?($t([{el:qt,show:!1},{el:ei,show:!1},{el:ni,show:!0,oldClass:"col-md-6",newClass:"col-md-12"},{el:Mn,show:!1},{el:Xs,show:!0},{el:Si,show:!1},{el:Dn,show:!1},{el:si,show:!1},{el:ft,show:!1},{el:dt,show:!1}]),wr(gr,"https://github.com/xyzroe/XZG-MT/tree/cc_loader","XZG-MT/cc_loader")):tt==="ti_old"?($t([{el:qt,show:!1},{el:qs,show:!1},{el:ei,show:!1},{el:fc,show:!1},{el:dc,show:!0},{el:Zs,show:!1},{el:Mn,show:!0,oldClass:"col-md-6",newClass:"col-md-12"},{el:Ui,show:!0},{el:Si,show:!1},{el:Dn,show:!1},{el:Lt,show:!0},{el:gt,show:!0},{el:ft,show:!1},{el:dt,show:!1}]),Ii(dr,"Use a local file (*.hex or *.bin)."),Er(pe,"accept",".hex,.bin")):tt==="arduino"?($t([{el:qt,show:!1},{el:ei,show:!1},{el:ni,show:!0,oldClass:"col-md-6",newClass:"col-md-12"},{el:Js,show:!1},{el:ac,show:!0},{el:Ri,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:ti,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:Di,show:!0,oldClass:"col-md-6",newClass:"col-md-4"},{el:Si,show:!1},{el:Dn,show:!1},{el:ft,show:!1},{el:gt,show:!0},{el:dt,show:!1}]),Ii(dr,"Use a local file (*.hex)."),Er(pe,"accept",".hex"),wr(gr,"https://github.com/xyzroe/XZG-MT/tree/cc_loader","XZG-MT/cc_loader")):tt==="telink"&&$t([{el:qt,show:!1},{el:ei,show:!1},{el:ni,show:!0,oldClass:"col-md-6",newClass:"col-md-12"},{el:Si,show:!1},{el:Js,show:!1},{el:oc,show:!0},{el:ti,show:!1},{el:Di,show:!0},{el:Mn,show:!1},{el:Zs,show:!1},{el:Xs,show:!0,oldClass:"col-md-6",newClass:"col-md-12"},{el:aa,show:!0},{el:gt,show:!0},{el:dt,show:!1},{el:ft,show:!1}])}function rc(){if(!zs||!ut)return;let i=!ut.checked;zs.classList.toggle("hide-rx",i),zs.classList.toggle("hide-tx",i)}function rf(){try{let i=window;i.bootstrap&&i.bootstrap.Tooltip&&document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(t=>{new i.bootstrap.Tooltip(t,{container:"body"})})}catch{}}function Tt(i){let e=document.getElementById(i);e&&(e.classList.add("d-none"),e.setAttribute("aria-hidden","true"))}function sf(){if(!bi)return;let i=document.getElementById("bridgeHostInput"),e=document.getElementById("bridgePortInput"),t=i&&i.value?i.value.trim():localStorage.getItem("bridgeHost")||"127.0.0.1",n=e&&e.value?e.value:localStorage.getItem("bridgePort")||"8765",r=parseInt(n,10);(!r||r<=0)&&(r=8765);let s="http://"+t+":"+r,a=document.getElementById("bridgeLink");a&&(a.href=s,a.textContent=s),bi.classList.remove("d-none"),bi.setAttribute("aria-hidden","false")}function u(i,e="app"){let t=new Date().toISOString().split("T")[1].replace("Z",""),n=document.createElement("div");n.className=`log-line log-${e}`,n.textContent=`[${t}] ${i}`,ri.appendChild(n),(!$s||$s.checked)&&(ri.parentElement.scrollTop=ri.parentElement.scrollHeight)}function Fr(i){we&&(we.classList.toggle("text-success",i),we.classList.toggle("text-danger",!i),we.classList.remove("text-muted"),we.innerHTML=`<i class="bi ${i?"bi-check-circle-fill":"bi-x-circle-fill"}"></i>`,we.setAttribute("title",i?"Bridge reachable":"Bridge error"))}function Aa(){we&&(we.classList.remove("text-success","text-danger"),we.classList.add("text-muted"),we.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',we.setAttribute("title","Checking bridge..."))}function Ct(i){js&&js.classList.toggle("d-none",!i)}function Qi(i){let e=!!R;pr(ni,e),pr(ei,e),pr(qt,e),pr(sc,e);let t=e;if(Mt.classList.toggle("d-none",!t),Mt.classList.toggle("btn-danger",t),Mt.classList.toggle("btn-outline-secondary",!t),Mt.disabled=!t,Dt)if(!e)Dt.value="";else if(R==="tcp"){let n=oi.value.trim(),r=parseInt(Ft.value,10);Dt.value=n&&r?`tcp://${n}:${r}`:"tcp://"}else{let n=0;i&&(n=i),Dt.value=`serial @ ${n}bps`}}function Ne(){G()==="esp"&&(me.checked=!1,te.checked=!1,te.disabled=!0,W.checked=!1,W.disabled=!0);let e=!!R;e||(F&&(F.value=""),Y&&(Y.value="",Y.classList.remove("border-warning","bg-warning-subtle")),_e&&(_e.value=""),K&&(K.value=""),Ee&&(Ee.value=""),Ti&&(Ti.value=""),pe&&(pe.value=""),z&&(z.value="")),ur&&(ur.classList.toggle("opacity-50",!e),ur.classList.toggle("pe-none",!e),ur.setAttribute("aria-disabled",String(!e))),Ws&&(Ws.classList.toggle("opacity-50",!e),Ws.classList.toggle("pe-none",!e)),kn&&(kn.classList.toggle("opacity-50",!e),kn.classList.toggle("pe-none",!e)),Mi&&(Mi.classList.toggle("opacity-50",!e),Mi.classList.toggle("pe-none",!e)),z&&(z.disabled=!e),vn&&(vn.disabled=!e)}var Jh,sc,Rn,ht,ii,tt,qs,qt,ge,Dn,N,ie,ni,ec,xi,J,ki,Si,ea,Js,ac,ta,oc,it,Vh,kt,Vs,ei,tc,Ci,we,mr,Pe,Le,lc,bi,cc,Ac,jh,oi,Ft,be,ia,xr,hc,yi,ye,Zh,Qe,He,vt,Oe,Cr,Ge,Br,Re,na,ra,fc,js,Dt,F,Y,Ri,_e,ti,K,Fn,Ee,Di,Mt,dc,fr,Bi,Fi,Et,Ir,wt,Sr,Je,Ve,vi,pt,ce,Ae,Ws,Mn,pe,dr,Zs,z,_r,vn,gr,ic,Tn,Zt,Xh,$h,Xs,mt,sa,gc,me,te,W,Ui,Ut,Pt,aa,xt,br,ne,X,Mi,nc,Ti,yr,Un,Rr,uc,oa,kn,Dr,Mr,Tr,De,ur,ft,Pi,Li,dt,gt,Lt,si,ai,yg,zs,ri,$s,ut,la,ca,qh,pr,ze=D(()=>{"use strict";yn();Sn();hr();Jh=["ti","sl","esp","ti_old","arduino","telink"],sc=document.getElementById("familySection"),Rn=document.getElementById("familyDropdown"),ht=document.getElementById("familyDropdownBtn"),ii=document.getElementById("familyDropdownMenu"),tt="ti",qs=document.getElementById("connectionSection"),qt=document.getElementById("generalSection"),ge=document.getElementById("findBaudToggle"),Dn=document.getElementById("findBaudWrap"),N=document.getElementById("implyGateToggle"),ie=document.getElementById("invertLevel"),ni=document.getElementById("serialSection"),ec=document.getElementById("serialControlsWrap"),xi=document.getElementById("serialHttpMsg"),J=document.getElementById("bitrateInput"),ki=document.getElementById("autoBslToggle"),Si=document.getElementById("autoBslWrap"),ea=document.getElementById("chooseSerial"),Js=document.getElementById("serialBaudWrap"),ac=document.getElementById("arduinoBootWrap"),ta=document.getElementById("arduinoBootSelect"),oc=document.getElementById("telinkOptionsWrap"),it=document.getElementById("telinkMethodSelect"),Vh=document.getElementById("telinkMethodWrap"),kt=document.getElementById("telinkFamilySelect"),Vs=document.getElementById("telinkFamilyWrap"),ei=document.getElementById("tcpSection"),tc=document.getElementById("tcpControlsWrap"),Ci=document.getElementById("tcpHttpsMsg"),we=document.getElementById("bridgeStatusIcon"),mr=document.getElementById("tcpSettingsPanel"),Pe=document.getElementById("bridgeHostInput"),Le=document.getElementById("bridgePortInput"),lc=document.getElementById("tcpInfoBtn"),bi=document.getElementById("bridgeInfoModal"),cc=document.getElementById("bridgeInfoClose"),Ac=document.getElementById("bridgeInfoCloseX"),jh=document.getElementById("bridgeLink"),oi=document.getElementById("hostInput"),Ft=document.getElementById("portInput"),be=document.getElementById("mdnsSelect"),ia=document.getElementById("mdnsRefresh"),xr=document.getElementById("tcpSettingsBtn"),hc=document.getElementById("tcpLinksBtn"),yi=document.getElementById("tcpLinksPanel"),ye=document.getElementById("pinModeSelect"),Zh=document.getElementById("ctrlUrlRow"),Qe=document.getElementById("bslUrlSelect"),He=document.getElementById("rstUrlSelect"),vt=document.getElementById("baudUrlSelect"),Oe=document.getElementById("bslUrlInput"),Cr=document.getElementById("bslMethodSelect"),Ge=document.getElementById("rstUrlInput"),Br=document.getElementById("rstMethodSelect"),Re=document.getElementById("baudUrlInput"),na=document.getElementById("baudMethodSelect"),ra=document.getElementById("connectTcp"),fc=document.getElementById("deviceSection"),js=document.getElementById("deviceDetectSpinner"),Dt=document.getElementById("portInfo"),F=document.getElementById("chipModel"),Y=document.getElementById("flashSize"),Ri=document.getElementById("flashSizeWrap"),_e=document.getElementById("ieeeMac"),ti=document.getElementById("ieeeMacWrap"),K=document.getElementById("firmwareVersion"),Fn=document.getElementById("firmwareVersionWrap"),Ee=document.getElementById("bootloaderVersion"),Di=document.getElementById("bootloaderVersionWrap"),Mt=document.getElementById("disconnectBtn"),dc=document.getElementById("debuggerSection"),fr=document.getElementById("debugger-controls"),Bi=document.getElementById("usbHttpMsg"),Fi=document.getElementById("debuggerDetectSpinner"),Et=document.getElementById("connectDebugger"),Ir=document.getElementById("debuggerConnectWrap"),wt=document.getElementById("connectLoader"),Sr=document.getElementById("loaderConnectWrap"),Je=document.getElementById("debugModel"),Ve=document.getElementById("debugManuf"),vi=document.getElementById("debugSerial"),pt=document.getElementById("debugFwVersion"),ce=document.getElementById("targetId"),Ae=document.getElementById("targetIeee"),Ws=document.getElementById("firmwareSection"),Mn=document.getElementById("localFirmwareSection"),pe=document.getElementById("localFile"),dr=document.getElementById("localFileHelp"),Zs=document.getElementById("cloudFirmwareSection"),z=document.getElementById("netFwSelect"),_r=document.getElementById("netFwNotesBtn"),vn=document.getElementById("netFwRefresh"),gr=document.getElementById("netFwSource"),ic=document.getElementById("netFwNotesBtn"),Tn=document.getElementById("fwNotesModal"),Zt=document.getElementById("fwNotesContent"),Xh=document.getElementById("fwNotesClose"),$h=document.getElementById("fwNotesCloseX"),Xs=document.getElementById("multiFileSection"),mt=document.getElementById("multiFilesContainer"),sa=document.getElementById("btnAddEspFile"),gc=document.getElementById("flashOptionsWrap"),me=document.getElementById("optErase"),te=document.getElementById("optWrite"),W=document.getElementById("optVerify"),Ui=document.getElementById("debuggerOptionWrap"),Ut=document.getElementById("verifyMethod"),Pt=document.getElementById("writeMethod"),aa=document.getElementById("eraseOptionWrap"),xt=document.getElementById("eraseMethod"),br=document.getElementById("startFlashBtn"),ne=document.getElementById("flashWarning"),X=document.getElementById("progress"),Mi=document.getElementById("ieeeSection"),nc=document.getElementById("ieeeDescription"),Ti=document.getElementById("currentIeee"),yr=document.getElementById("btnIeeeRead"),Un=document.getElementById("newIeee"),Rr=document.getElementById("btnIeeeWrite"),uc=document.getElementById("ieeeForceWrap"),oa=document.getElementById("forceWrite"),kn=document.getElementById("nvramSection"),Dr=document.getElementById("btnNvRead"),Mr=document.getElementById("btnNvErase"),Tr=document.getElementById("btnNvWrite"),De=document.getElementById("nvProgress"),ur=document.getElementById("actionsSection"),ft=document.getElementById("enterBslBtn"),Pi=document.getElementById("resetBtn"),Li=document.getElementById("pingBtn"),dt=document.getElementById("getVersionBtn"),gt=document.getElementById("getModelBtn"),Lt=document.getElementById("resetDebugBtn"),si=document.getElementById("readFlashBtn"),ai=document.getElementById("swireFlashBtn"),yg=document.getElementById("logSection"),zs=document.getElementById("consoleWrap"),ri=document.getElementById("log"),$s=document.getElementById("autoScroll"),ut=document.getElementById("showIo"),la=document.getElementById("btnClearLog"),ca=document.getElementById("btnCopyLog"),qh=document.getElementById("developmentSection");ye?.addEventListener("change",he);Oe?.addEventListener("change",he);Ge?.addEventListener("change",he);Re?.addEventListener("change",he);ie?.addEventListener("change",he);N?.addEventListener("change",he);Pe?.addEventListener("input",fa);Le?.addEventListener("input",fa);ge?.addEventListener("change",he);J?.addEventListener("change",he);it?.addEventListener("change",()=>{kr(it.value),he()});kt?.addEventListener("change",()=>{he()});if(ht&&ii&&Rn){ht.addEventListener("click",t=>{t.stopPropagation(),Rn?.classList.toggle("open")}),document.addEventListener("click",()=>{Rn?.classList.remove("open")});let i=ii.querySelectorAll(".custom-dropdown-item");i.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();let r=t.dataset.value||"ti",s=t.querySelector("img")?.cloneNode(!0),a=t.querySelector("span")?.textContent||"";if(ht){let o=ht.querySelector(".dropdown-icon"),c=ht.querySelector(".dropdown-text");o&&s&&(o.src=s.src,o.alt=s.alt),c&&(c.textContent=a)}i.forEach(o=>o.classList.remove("selected")),t.classList.add("selected"),tt=r,Rn?.classList.remove("open"),Pn(),he()})}),ii.querySelector(`[data-value="${tt}"]`)?.classList.add("selected")}xr?.addEventListener("click",()=>{let i=mr?.classList.contains("d-none");mr&&mr.classList.toggle("d-none",!i)});hc?.addEventListener("click",()=>{let i=yi?.classList.contains("d-none");yi&&yi.classList.toggle("d-none",!i)});Pe?.addEventListener("change",vr);Le?.addEventListener("change",vr);Xh?.addEventListener("click",()=>Tt("fwNotesModal"));$h?.addEventListener("click",()=>Tt("fwNotesModal"));Tn?.addEventListener("click",i=>{i.target===Tn&&Tt("fwNotesModal")});lc?.addEventListener("click",sf);cc?.addEventListener("click",()=>Tt("bridgeInfoModal"));Ac?.addEventListener("click",()=>Tt("bridgeInfoModal"));bi?.addEventListener("click",i=>{i.target===bi&&Tt("bridgeInfoModal")});document.addEventListener("DOMContentLoaded",function(){let i=window.location.protocol==="https:",e=window.location.hostname==="localhost",t=tc&&tc.querySelectorAll(".d-flex, #tcpSettingsPanel, .row.g-2.align-items-center.mb-4, .row.g-2.align-items-center.mb-4, .col-12.mb-4, #ctrlUrlRow, .row.mt-auto"),n=ec&&ec.querySelector(".serial-controls");console.log("Protocol check: isHttps="+i+", isLocalhost="+e),e?(console.log("Localhost detected - showing all controls"),xi&&xi.classList.add("d-none"),Bi&&Bi.classList.add("d-none"),Ci&&Ci.classList.add("d-none")):i?(console.log("HTTPS but not localhost - assuming HTTPS"),t&&t.forEach(r=>r.classList.add("d-none")),xr&&xr.classList.add("d-none"),we&&we.classList.add("d-none"),Ci&&Ci.classList.remove("d-none"),n&&n.classList.remove("d-none"),xi&&xi.classList.add("d-none"),fr&&fr.classList.remove("d-none"),Bi&&Bi.classList.add("d-none")):(console.log("Non-HTTPS and non-localhost - assuming HTTP"),n&&n.classList.add("d-none"),xi&&xi.classList.remove("d-none"),Bi&&Bi.classList.remove("d-none"),fr&&fr.classList.add("d-none"),t&&t.forEach(r=>r.classList.remove("d-none")),Ci&&Ci.classList.add("d-none")),ut&&(ut?.addEventListener("change",rc),rc()),rf()});(function(){let i=document.getElementById("themeSwitch");if(!i)return;function e(r,s,a){let o=a?a*24*60*60:0,c=r+"="+s+"; Path=/; SameSite=Lax";o&&(c+="; Max-Age="+o),document.cookie=c}function t(){return document.documentElement.classList.contains("dark")?"dark":"light"}function n(r){let s=r==="dark";document.documentElement.classList.toggle("dark",s),document.documentElement.style.colorScheme=r,i.checked=s}i.checked=t()==="dark",i.addEventListener("change",function(){let r=i.checked?"dark":"light";n(r),e("theme",r,365)})})();window.copyToClipboard=function(i,e){(async function(){try{await navigator.clipboard.writeText(e);let t=i.innerText;i.innerText="Copied!",i.classList.remove("bg-primary"),i.classList.add("bg-success"),setTimeout(function(){i.innerText=t,i.classList.remove("bg-success"),i.classList.add("bg-primary")},1e3)}catch{alert("Copy failed")}})()};document.addEventListener("keydown",function(i){if(i.key==="Escape"){let e=document.getElementById("fwNotesModal"),t=document.getElementById("bridgeInfoModal");e&&!e.classList.contains("d-none")&&Tt("fwNotesModal"),t&&!t.classList.contains("d-none")&&Tt("bridgeInfoModal")}});ic&&ic.addEventListener("click",function(){if(!Tn||!Zt)return;let i=Ar();if(!i)return;let e=window.marked;/^https?:\/\/.*\.md$/i.test(i.trim())?(Zt.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...',fetch(i.trim()).then(t=>t.ok?t.text():Promise.reject("Failed to load markdown")).then(t=>{e?Zt.innerHTML=e.parse(t):Zt.textContent=t}).catch(t=>{Zt.innerHTML='<div class="text-danger">Error loading markdown: '+t+"</div>"})):e?Zt.innerHTML=e.parse(i):Zt.textContent=i,Tn.classList.remove("d-none"),Tn.setAttribute("aria-hidden","false")});if(!window.marked){let i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/marked/marked.min.js",i.async=!0,document.head.appendChild(i)}pr=(i,e)=>{if(!i)return;i.classList.toggle("opacity-50",e),i.classList.toggle("pe-none",e),i.setAttribute("aria-disabled",String(e)),i.querySelectorAll('button, input, select, textarea, fieldset, optgroup, option, details, [contenteditable="true"], [tabindex]').forEach(n=>{n!==Mt&&((n instanceof HTMLButtonElement||n instanceof HTMLInputElement||n instanceof HTMLSelectElement||n instanceof HTMLTextAreaElement||n instanceof HTMLFieldSetElement)&&(n.disabled=e),e?n.setAttribute("tabindex","-1"):n.hasAttribute("tabindex")&&n.removeAttribute("tabindex"))})}});function Ec(i){for(let e of af)try{if(e.test(i))return e.config}catch{}return{}}async function Ur(i){u("Universal entry bootloader, implyGate="+i),i||(await $(!1,!1),await x(300),await $(!0,!1),await x(300),await $(!0,!0),await x(300),await $(!1,!0),await x(600),await $(!1,!1),await x(300)),i&&(await $(!1,!1),await x(300),await $(!0,!1),await x(300),await $(!1,!0),await x(600),await $(!1,!1),await x(300)),await x(1e3)}async function Qt(i){u("Universal reset, implyGate="+i),i||(await $(!1,!1),await x(300),await $(!0,!1),await x(300),await $(!1,!1),await x(300)),i&&(await $(!1,!1),await x(300),await $(!0,!1),await x(300),await $(!1,!1),await x(300)),await x(1e3)}var af,Pr=D(()=>{"use strict";ze();yn();Rt();af=[{name:"ZigStar/XZG HTTP",test:i=>/^(zigstar_gw|zig_star_gw|uzg-01|xzg)$/i.test(i.type||""),config:{pinMode:!0,bslValue:"url:cmdZigBSL",rstValue:"url:cmdZigRST"}},{name:"TubesZB HTTP (ESPHome)",test:i=>/^(tubeszb|tubes_zb)$/i.test(i.type||""),config:{pinMode:!1,bslValue:"url:switch/zBSL",rstValue:"url:switch/zRST_gpio"}},{name:"Local USB via Bridge",test:i=>(i.type||"").toLowerCase()==="local"&&(i.protocol||"").toLowerCase()==="usb",config:{pinMode:!1,bslValue:"sp:dtr",rstValue:"sp:rts",baudValue:"bridge"}},{name:"Local Serial via Bridge",test:i=>(i.type||"").toLowerCase()==="local"&&(i.protocol||"").toLowerCase()==="serial",config:{pinMode:!1,baudValue:"bridge"}}]});var da,Lr,wc=D(()=>{"use strict";Rt();Vt();sr();Pr();ze();da=class{constructor(e){this.logger=()=>{};this.link=e}setLogger(e){this.logger=e}xorFcs(e){return e.reduce((t,n)=>t^n&255,0)}async sendMtAndWait(e,t,n=[],r=1500){let s=n.length&255,a=this.xorFcs([s,e&255,t&255,...n]),o=new Uint8Array([254,s,e&255,t&255,...n,a&255]);await this.link.write(o);let c=[];return await new Promise(l=>{let A=!1,h=g=>{if(!A){A=!0;try{d!=null&&window.clearTimeout(d)}catch{}l(g)}},d=r>0?window.setTimeout(()=>h(null),r):null,f=g=>{if(!A){for(let w=0;w<g.length;w++)c.push(g[w]);e:for(;;){let w=c.indexOf(254);if(w===-1){c.length=0;break}if(c.length-w<5)break;let C=5+(c[w+1]&255);if(c.length-w<C)break;let I=c.splice(w,C),p=I[1],B=I[2],_=I[3],P=I.slice(4,4+p),S=I[4+p]&255;if((this.xorFcs([p&255,B&255,_&255,...P])&255)!==S)continue e;h({cmd0:B,cmd1:_,payload:new Uint8Array(P)});return}}};try{this.link.onData(f)}catch{}})}statusOk(e){return e===0}osalIdFromHex(e){return/^0x/i.test(e)?parseInt(e,16)&65535:parseInt(e,10)&65535}async sysOsalNvLength(e){let t=e&255,n=e>>8&255,r=await this.sendMtAndWait(33,19,[t,n],1500);return r?(r.payload[0]|r.payload[1]<<8)>>>0:null}async sysOsalNvReadExtAll(e,t){let n=e&255,r=e>>8&255,s=[],a=0;for(;a<t;){let o=a&255,c=a>>8&255,l=await this.sendMtAndWait(33,28,[n,r,o,c],2e3);if(!l)break;let A=l.payload[0]??1;if(!this.statusOk(A))break;let h=Array.from(l.payload.subarray(1));if(h.length===0||(s.push(...h),a+=h.length,h.length<1))break}return new Uint8Array(s.slice(0,t))}async sysOsalNvItemInit(e,t){let n=e&255,r=e>>8&255,s=t&255,a=t>>8&255,o=await this.sendMtAndWait(33,7,[n,r,s,a],2e3);if(!o)return!1;let c=o.payload[0]??1;return this.statusOk(c)||c===9}async sysOsalNvWrite(e,t,n=0){let r=e&255,s=e>>8&255,a=n&255,o=n>>8&255,c=t.length&255,l=[r,s,a,o,c,...Array.from(t)],A=await this.sendMtAndWait(33,9,l,4e3);return A?this.statusOk(A.payload[0]??1):!1}async sysOsalNvDelete(e){let t=e&255,n=e>>8&255,r=await this.sendMtAndWait(33,18,[t,n],2e3);return r?this.statusOk(r.payload[0]??1):!1}async sysNvLength(e,t){let r=[1,e&255,e>>8&255,t&255,t>>8&255],s=await this.sendMtAndWait(33,50,r,1500);if(!s)return null;let a=s.payload;return a.length<4?null:(a[0]|a[1]<<8|a[2]<<16|a[3]<<24)>>>0}async sysNvRead(e,t,n){let s=[],a=0;for(;a<n;){let o=[1,e&255,e>>8&255,t&255,t>>8&255,a&255,a>>8&255,Math.min(244,n-a)&255],c=await this.sendMtAndWait(33,51,o,2e3);if(!c)return null;let l=c.payload[0]??1;if(!this.statusOk(l))return null;let A=Array.from(c.payload.subarray(1));if(A.length===0||(s.push(...A),a+=A.length,A.length<1))break}return new Uint8Array(s.slice(0,n))}async sysNvCreate(e,t,n){let s=[1,e&255,e>>8&255,t&255,t>>8&255,n&255,n>>8&255,n>>16&255,n>>24&255],a=await this.sendMtAndWait(33,48,s,2e3);return a?this.statusOk(a.payload[0]??1)||(a.payload[0]??1)===10:!1}async sysNvWrite(e,t,n){for(let s=0;s<n.length;s+=244){let a=n.subarray(s,Math.min(n.length,s+244)),o=[1,e&255,e>>8&255,t&255,t>>8&255,s&255,s>>8&255,...Array.from(a)],c=await this.sendMtAndWait(33,52,o,3e3);if(!c||!this.statusOk(c.payload[0]??1))return!1}return!0}async sysNvDelete(e,t){let r=[1,e&255,e>>8&255,t&255,t>>8&255],s=await this.sendMtAndWait(33,49,r,1500);return s?this.statusOk(s.payload[0]??1):!1}async readLegacyFull(e){let t={},n=[[1,1023],[3840,4095]],r=0;for(let[a,o]of n)r+=o-a+1;let s=0;for(let[a,o]of n)for(let c=a;c<=o;c++)try{let l=await this.sysOsalNvLength(c);if(!l||l===0)continue;let A=await this.sysOsalNvReadExtAll(c,Math.min(l,4096));if(!A||A.length===0)continue;t["0x"+c.toString(16).toUpperCase().padStart(4,"0")]=Array.from(A).map(h=>h.toString(16).padStart(2,"0")).join("")}catch{}finally{s++,e?.(s/r*35,`Legacy ${s} / ${r}`)}return t}async readExtendedAll(e){let t={1:"ADDRMGR",2:"BINDING_TABLE",3:"DEVICE_LIST",4:"TCLK_TABLE",5:"TCLK_IC_TABLE",6:"APS_KEY_DATA_TABLE",7:"NWK_SEC_MATERIAL_TABLE"},n={};if(await this.sysNvLength(1,0)===null)return null;let s=Object.keys(t).map(o=>parseInt(o,10)),a=0;for(let o of s){let c={};for(let l=0;l<=65535;l++)try{let A=await this.sysNvLength(o,l);if(!A||A===0)break;let h=await this.sysNvRead(o,l,Math.min(A,65535));if(!h)break;c["0x"+l.toString(16).toUpperCase().padStart(4,"0")]=Array.from(h).map(d=>d.toString(16).padStart(2,"0")).join(""),e?.(35+Math.min(55,a/Math.max(1,s.length)*55),`${t[o]}:${"0x"+l.toString(16).toUpperCase().padStart(4,"0")}`)}catch{break}Object.keys(c).length>0&&(n[t[o]]=c),a++}return n}async readAll(e){e?.(0,"Reading...");let t=await this.readLegacyFull(e),n=await this.readExtendedAll(e),r={LEGACY:t};return n&&Object.assign(r,n),e?.(100,"Done"),r}async eraseAll(e){e?.(0,"Erasing...");let t=await this.readLegacyFull(e),n=Math.max(1,Object.keys(t).length),r=0;for(let a of Object.keys(t)){try{await this.sysOsalNvDelete(this.osalIdFromHex(a))}catch{}r++,e?.(Math.min(50,r/n*50),`Erase legacy ${r}/${n}`)}let s=await this.readExtendedAll(e);if(s){let a={ADDRMGR:1,BINDING_TABLE:2,DEVICE_LIST:3,TCLK_TABLE:4,TCLK_IC_TABLE:5,APS_KEY_DATA_TABLE:6,NWK_SEC_MATERIAL_TABLE:7},o=Object.keys(s),c=0;for(let l of o){let A=a[l];if(A){c++;for(let h=0;h<=65535&&await this.sysNvDelete(A,h);h++)e?.(50+Math.min(45,(c-1)/Math.max(1,o.length)*45),`${l}:${"0x"+h.toString(16).toUpperCase().padStart(4,"0")}`)}}}e?.(100,"Erase done")}async writeAll(e,t,n){let r=t||this.logger;n?.(0,"Writing...");let s=e.legacy||e.LEGACY||{},a=Math.max(1,Object.keys(s).length),o=0;for(let A of Object.keys(s)){let h=this.osalIdFromHex(A),d=s[A];if(!d)continue;let f=new Uint8Array(d.match(/.{1,2}/g)?.map(g=>parseInt(g,16))||[]);try{await this.sysOsalNvItemInit(h,f.length),await this.sysOsalNvWrite(h,f,0),r(`NVRAM LEGACY write 0x${h.toString(16)} len=${f.length} => OK`)}catch(g){let w=g instanceof Error?g.message:String(g);r(`NVRAM LEGACY write fail id=0x${h.toString(16)}: ${w}`)}o++,n?.(Math.min(40,o/a*40),`Legacy ${o}/${a}`)}let c={ADDRMGR:1,BINDING_TABLE:2,DEVICE_LIST:3,TCLK_TABLE:4,TCLK_IC_TABLE:5,APS_KEY_DATA_TABLE:6,NWK_SEC_MATERIAL_TABLE:7};if(await this.sysNvLength(1,0)!==null){let A=Object.keys(c),h=0;for(let[d,f]of Object.entries(c)){let g=e[d];if(g){h++;for(let w of Object.keys(g)){let m=this.osalIdFromHex(w),C=g[w];if(!C)continue;let I=new Uint8Array(C.match(/.{1,2}/g)?.map(p=>parseInt(p,16))||[]);try{await this.sysNvCreate(f,m,I.length)||(await this.sysNvDelete(f,m),await this.sysNvCreate(f,m,I.length));let B=await this.sysNvWrite(f,m,I);r(`NVRAM EX ${d}[${"0x"+m.toString(16).toUpperCase().padStart(4,"0")}] len=${I.length} => ${B?"OK":"ERR"}`)}catch(p){let B=p instanceof Error?p.message:String(p);r(`NVRAM EX write fail ${d}[${"0x"+m.toString(16).toUpperCase().padStart(4,"0")}] : ${B}`)}n?.(40+Math.min(55,(h-1)/Math.max(1,A.length)*55),`${d}:${"0x"+m.toString(16).toUpperCase().padStart(4,"0")}`)}}}}n?.(100,"Write done")}},Lr=class{constructor(e){this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=()=>{};this.rxBuf=[];this.link=e,this.rxDataHandler=t=>this.rxBuf.push(...t),this.ensureListener(),this.nvram=new da(e)}ensureListener(){this.link.offData&&this.link.offData(this.rxDataHandler),this.link.onData(this.rxDataHandler)}setLogger(e){this.logger=e,this.nvram.setLogger(e)}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}async setLines(e,t){if(!this.setLinesHandler)throw new Error("setLinesHandler not set");this.setLinesHandler(e,t)}getChipDescription(e,t,n,r){let s=(e[0]<<8|e[1])>>>0;return s===47460||s===47461?"CC2538":s===4610&&t===47991&&n===1?"CC2652P7":s===4738&&t===47991&&n===1?"CC1352P7":s===12802&&t===47937&&n===3&&r===193?"CC2652P2_launchpad":s===12802&&t===47937&&n===3&&r===250?"CC2652P2_other":s===12802&&t===47937&&n===3?"CC2652P2":s===12546&&t===47937&&n===3?"CC2652RB":`Unknown (C:${s.toString(16).toUpperCase()},W:${t.toString(16).toUpperCase()},P:${n.toString(16).toUpperCase()},M:${r.toString(16).toUpperCase()})`}xorFcs(e){return e.reduce((t,n)=>t^n&255,0)}async sendMtAndWait(e,t,n=[],r=1500){let s=n.length&255,a=this.xorFcs([s,e&255,t&255,...n]),o=new Uint8Array([254,s,e&255,t&255,...n,a&255]);await this.link.write(o);let c=[];return await new Promise(l=>{let A=!1,h=g=>{if(!A){A=!0;try{d!=null&&window.clearTimeout(d)}catch{}l(g)}},d=r>0?window.setTimeout(()=>h(null),r):null,f=g=>{if(!A){for(let w=0;w<g.length;w++)c.push(g[w]);e:for(;;){let w=c.indexOf(254);if(w===-1){c.length=0;break}if(c.length-w<5)break;let C=5+(c[w+1]&255);if(c.length-w<C)break;let I=c.splice(w,C),p=I[1],B=I[2],_=I[3],P=I.slice(4,4+p),S=I[4+p]&255;if((this.xorFcs([p&255,B&255,_&255,...P])&255)!==S)continue e;h({cmd0:B,cmd1:_,payload:new Uint8Array(P)});return}}};try{this.link.onData(f)}catch{}})}async sync(){if(this.ensureListener(),this.rxBuf=[],await this.link.write(new Uint8Array([85,85])),await x(500),!await this.waitForAck(2e3))throw new Error("CCTOOLS: no ACK on sync");await x(20)}async waitForAck(e=2e3){let t=Date.now();for(;Date.now()-t<e;){for(let n=0;n<this.rxBuf.length;n++){let r=this.rxBuf[n];if(r===204)return this.rxBuf.splice(0,n+1),!0;if(r===51)return this.rxBuf.splice(0,n+1),!1;if(n+1<this.rxBuf.length&&r===0){let s=this.rxBuf[n+1];if(s===204||s===51)return this.rxBuf.splice(0,n+2),s===204}}await x(5)}throw new Error("CCTOOLS: timeout waiting for ACK/NACK")}async receivePacket(e=1500){let t=Date.now();for(;Date.now()-t<e;){if(this.rxBuf.length>=2){let n=this.rxBuf[0];if(this.rxBuf.length>=n){let r=this.rxBuf[1],s=this.rxBuf.slice(2,n),a=s.reduce((o,c)=>o+c&255,0);if(this.rxBuf.splice(0,n),a!==r)throw new Error("CCTOOLS: packet checksum error");return await this.link.write(new Uint8Array([0,204])),new Uint8Array(s)}}await x(5)}throw new Error("CCTOOLS: timeout receiving packet")}encodeAddr(e){let t=e>>0&255,n=e>>8&255,r=e>>16&255,s=e>>24&255;return new Uint8Array([s,r,n,t])}async sendCommandRaw(e,t=!1,n=2e3){let r=e.length+2,s=e.reduce((c,l)=>c+l&255,0);this.rxBuf=[];let a=new Uint8Array(2+e.length);if(a[0]=r&255,a[1]=s&255,a.set(e,2),await this.link.write(a),!await this.waitForAck(n))throw console.log(`CCTOOLS: NACK for command ${yt(e[0])}`),new Error("CCTOOLS: NACK");return t?await this.receivePacket():null}async checkLastCmd(){let e=await this.sendCommandRaw(new Uint8Array([35]),!0);return!e||e.length===0?!1:e[0]===64}async chipId(){let e=await this.sendCommandRaw(new Uint8Array([40]),!0);if(!e)throw new Error("CCTOOLS: no chip id packet");if(!await this.checkLastCmd())throw new Error("CCTOOLS: chip id status failed");return e}async erase(e,t){let n=new Uint8Array(9);if(n[0]=38,n.set(this.encodeAddr(e),1),n.set(this.encodeAddr(t>>>0),5),await this.sendCommandRaw(n,!1,1e4),!await this.checkLastCmd())throw new Error("CCTOOLS: erase failed")}async sectorErase(e){let t=new Uint8Array(5);if(t[0]=38,t.set(this.encodeAddr(e),1),await this.sendCommandRaw(t,!1,1e4),!await this.checkLastCmd())throw new Error("CCTOOLS: sector erase failed")}async bankErase(){let e=new Uint8Array([44]);if(await this.sendCommandRaw(e,!1,15e3),!await this.checkLastCmd())throw new Error("CCTOOLS: bank erase failed")}async downloadTo(e,t){let n=t;if(n.length%4!==0){let s=4-n.length%4,a=new Uint8Array(n.length+s);a.set(n,0);for(let o=0;o<s;o++)a[n.length+o]=255;n=a}let r=3;for(let s=0;s<r;s++)try{let a=new Uint8Array(9);if(a[0]=33,a.set(this.encodeAddr(e),1),a.set(this.encodeAddr(n.length),5),await this.sendCommandRaw(a),!await this.checkLastCmd())throw new Error("CCTOOLS: download header failed");let c=new Uint8Array(1+n.length);if(c[0]=36,c.set(n,1),await this.sendCommandRaw(c,!1,5e3),!await this.checkLastCmd())throw new Error("CCTOOLS: send data failed");return}catch(a){if(console.log(`Retry ${s+1} for chunk at ${e.toString(16)}`),s===r-1)throw a;await x(500)}}async crc32(e,t){let n=new Uint8Array(9);n[0]=39,n.set(this.encodeAddr(e),1),n.set(this.encodeAddr(t>>>0),5);let r=await this.sendCommandRaw(n,!0);if(!r||r.length<4)throw new Error("CCTOOLS: CRC packet too short");if(!await this.checkLastCmd())throw new Error("CCTOOLS: CRC status failed");return(r[3]|r[2]<<8|r[1]<<16|r[0]<<24)>>>0}async crc32Cc26xx(e,t){let n=new Uint8Array(13);n[0]=39,n.set(this.encodeAddr(e),1),n.set(this.encodeAddr(t>>>0),5),n.set(this.encodeAddr(0),9);let r=await this.sendCommandRaw(n,!0);if(!r||r.length<4)throw new Error("CCTOOLS: CRC packet too short");if(!await this.checkLastCmd())throw new Error("CCTOOLS: CRC status failed");return(r[3]|r[2]<<8|r[1]<<16|r[0]<<24)>>>0}async memRead(e,t,n){let r;t!==void 0&&n!==void 0?(r=new Uint8Array(7),r[0]=42,r.set(this.encodeAddr(e),1),r[5]=t&255,r[6]=n&255):(r=new Uint8Array(6),r[0]=42,r.set(this.encodeAddr(e),1),r[5]=4);let s=await this.sendCommandRaw(r,!0);if(!s)throw new Error("CCTOOLS: no memRead packet");if(!await this.checkLastCmd())throw new Error("CCTOOLS: memRead status failed");return s}async memRead32(e){return this.memRead(e,1,1)}async memWrite(e,t,n=4){if(n!==1&&n!==4)throw new Error("width must be 1 or 4");if(n!==t.length)throw new Error("width does not match data length");let r=n===4?1:0,s=new Uint8Array(6+t.length);if(s[0]=43,s.set(this.encodeAddr(e),1),s[5]=r,s.set(t,6),await this.sendCommandRaw(s,!1,2e3),!await this.checkLastCmd())throw new Error("CCTOOLS: memWrite failed")}async pingApp(e=3e3){let t=await this.sendMtAndWait(33,1,[],e);return!!(t&&t.cmd0===97&&t.cmd1===1)}async getFwVersion(){let e=await this.sendMtAndWait(33,2,[],3e3);if(!e||e.cmd0!==97||e.cmd1!==2)return null;let t=e.payload;if(t.length>=9){let n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],c=(t[5]|t[6]<<8|t[7]<<16|t[8]<<24)>>>0;return{transportrev:n,product:r,major:s,minor:a,maint:o,fwRev:c+" (Zigbee)",payload:t}}return null}async readDeviceInfo(){await this.sync();let e=await this.chipId(),t=Array.from(e).map(a=>a.toString(16).padStart(2,"0")).join("");this.logger(`BSL OK. ChipId packet: ${t}`);let n={chipIdHex:t},r=!1;r=!(t==="0000b964"||t==="0000b965");let s=!1;if(s=t==="0000b964"||t==="0000b965",r&&this.logger("Chip family: CC26xx/CC13xx"),s&&this.logger("Chip family: CC2538"),r){n.family="cc26xx";try{let A=await this.memRead32(1342182168),h=await this.memRead32(360372);if(A&&h&&A.length>=4&&h.length>=4){let w=((A[3]&15)<<16|A[2]<<8|A[1]&240)>>>4>>>0,m=(A[3]&240)>>4,C=this.getChipDescription(e,w,m,h[1]);this.logger(`Chip model: ${C}`),n.chipModel=C}let d=await this.memRead32(1073938476);if(d&&d.length>=4){let m=d[0]*8192;this.logger(`Flash size estimate: ${m} bytes`),n.flashSizeBytes=m}let f=await this.memRead32(1342182128),g=await this.memRead32(1342182132);if(g&&f&&g.length>=4&&f.length>=4){let m=[...f,...g].map(C=>C.toString(16).padStart(2,"0")).join("").toUpperCase().match(/.{1,2}/g)?.reverse()?.join(":");m&&(this.logger(`IEEE MAC: ${m}`),n.ieeeMac=m)}}catch{}}else if(s){n.family="cc2538";let o=await this.memRead(1074606100);if(o&&o.length>=4){let d=(o[3]&112)>>4,f=65536;d>0&&d<=4&&(f=d*131072),this.logger(`Flash size estimate: ${f} bytes`),n.flashSizeBytes=f}let c=2621480,l=[0,18,75],A=await this.memRead(c),h=await this.memRead(c+4);if(A&&h&&A.length>=4&&h.length>=4){let d;A.slice(0,3).every((g,w)=>g===l[w])?d=new Uint8Array([...A,...h]):d=new Uint8Array([...h,...A]);let f=Array.from(d).map(g=>g.toString(16).padStart(2,"0")).join(":").toUpperCase();this.logger(`IEEE MAC: ${f}`),n.ieeeMac=f}n.chipModel="CC2538"}return n}async nvramReadAll(e){return this.nvram.readAll(e)}async nvramEraseAll(e){return this.nvram.eraseAll(e)}async nvramWriteAll(e,t,n){return this.nvram.writeAll(e,t,n)}async memReadBlock(e,t){let n=Math.floor(t/4);if(n===0||n>63)throw new Error(`Invalid word count: ${n}, must be 1-63`);let r=new Uint8Array(7);r[0]=42,r.set(this.encodeAddr(e),1),r[5]=1,r[6]=n&255;let s=await this.sendCommandRaw(r,!0,3e3);if(!s)throw new Error("CCTOOLS: no memReadBlock packet");if(!await this.checkLastCmd())throw new Error("CCTOOLS: memReadBlock status failed");return s}async readBlockCc2538(e,t){let n=new Uint8Array(t);for(let r=0;r<t;r+=4){let s=await this.memRead(e+r);n[r]=s[3],n[r+1]=s[2],n[r+2]=s[1],n[r+3]=s[0]}return n}async readBlockCc26xx(e,t){return await this.memReadBlock(e,t)}async dumpFlash(){this.logger("Starting flash dump..."),this.progressCallback(0,"Reading device info..."),await Ur(N?.checked??!1),await x(500);let e=await this.readDeviceInfo(),t=e.family,n=e.flashSizeBytes;if(!n||n===0)throw new Error("Cannot determine flash size");this.logger(`Flash size: ${n} bytes (${n/1024} KB)`),this.logger(`Chip family: ${t||"unknown"}`);let r,s,a;t==="cc2538"?(r=2097152,s=4,a=this.readBlockCc2538.bind(this),this.logger(`CC2538: Flash starts at 0x${r.toString(16)}, block size: ${s} bytes`)):(r=0,s=252,a=this.readBlockCc26xx.bind(this),this.logger(`CC26xx: Flash starts at 0x${r.toString(16)}, block size: ${s} bytes`));let o=n+3&-4,c=Math.ceil(o/s);this.logger(`Reading ${o} bytes in ${c} blocks...`),this.progressCallback(0,"Reading flash...");let l=new Uint8Array(o),A=0,h=0;for(;h<o;){let f=r+h,g=o-h,w=Math.min(s,g),m=w+3&-4;try{let I=await a(f,m),p=Math.min(I.length,g);l.set(I.subarray(0,p),h)}catch(I){this.logger(`Warning: Failed to read at 0x${f.toString(16)}: ${I}`);for(let p=0;p<w;p++)l[h+p]=255}h+=w;let C=Math.floor(h/o*100);C!==A&&(A=C,this.progressCallback(C,`Reading ${h}/${o}`))}this.progressCallback(100,"Read complete"),this.logger(`Flash read complete: ${l.length} bytes`);let d=Se(l,"application/octet-stream","bin","dump",e.chipModel,e.ieeeMac?.replace(/:/g,""));this.logger(`Flash dump saved to ${d}`)}async readSecondaryIeeeAddress(e){if(!e)throw new Error("Chip family must be specified. Call readDeviceInfo() first.");if(this.logger(`Reading secondary IEEE address (${e})...`),e==="cc2538"){let n=await this.memRead(2621388),r=await this.memRead(2621392);if(!n||!r||n.length<4||r.length<4)throw new Error("Failed to read secondary IEEE address");let s=new Uint8Array(8);s[0]=n[3],s[1]=n[2],s[2]=n[1],s[3]=n[0],s[4]=r[3],s[5]=r[2],s[6]=r[1],s[7]=r[0];let a=Array.from(s).map(o=>o.toString(16).padStart(2,"0")).join(":").toUpperCase();return s}else{let n=await this.memRead32(1073938476);if(!n||n.length<4)throw new Error("Failed to read flash size");let s=n[0]*8192,c=s-88+32;this.logger(`Flash size: ${s} bytes, secondary IEEE at 0x${c.toString(16)}`);let l=await this.memRead32(c),A=await this.memRead32(c+4);if(!l||!A||l.length<4||A.length<4)throw new Error("Failed to read secondary IEEE address");let h=new Uint8Array([...l,...A].reverse()),d=Array.from(h).map(f=>f.toString(16).padStart(2,"0")).join(":").toUpperCase();return h}}async writeSecondaryIeeeAddress(e,t){if(!t)throw new Error("Chip family must be specified. Call readDeviceInfo() first.");let n;if(typeof e=="string"?n=this.parseIeeeAddress(e):n=e,n.length!==8)throw new Error("IEEE address must be exactly 8 bytes");let r=Array.from(n).map(s=>s.toString(16).padStart(2,"0")).join(":").toUpperCase();if(this.logger(`Writing secondary IEEE address: ${r} (${t})`),t==="cc2538"){let o=Math.floor(1279.974609375)*2048,c=2621388-o;this.logger(`Reading flash page at 0x${o.toString(16)} (2048 bytes)`);let l=new Uint8Array(2048);for(let h=0;h<2048;h+=4){let d=await this.memRead(o+h);if(!d||d.length<4)throw new Error(`Failed to read page at offset ${h}`);l[h]=d[3],l[h+1]=d[2],l[h+2]=d[1],l[h+3]=d[0]}this.logger(`Modifying IEEE address at offset 0x${c.toString(16)} in page`);for(let h=0;h<8;h++)l[c+h]=n[h];this.logger(`Erasing flash page at 0x${o.toString(16)}`),await this.erase(o,2048),this.logger("Writing modified page back to flash (2048 bytes)");let A=240;for(let h=0;h<2048;h+=A){let d=Math.min(A,2048-h),f=l.subarray(h,h+d);await this.downloadTo(o+h,f),h%512===0&&this.logger(`Written ${h+d}/2048 bytes`)}this.logger("Secondary IEEE address written successfully")}else{let a=await this.memRead32(1073938476);if(!a||a.length<4)throw new Error("Failed to read flash size");let c=a[0]*8192,l=88,A=32,h=8192,d=c-h,f=c-l+A,g=f-d;this.logger(`Flash size: ${c} bytes, CCFG sector at 0x${d.toString(16)}`),this.logger(`IEEE address at 0x${f.toString(16)} (offset ${g} in sector)`),this.logger(`Reading CCFG sector (${h} bytes)...`);let w=new Uint8Array(h),m=252;for(let p=0;p<h;p+=m){let B=Math.min(m,h-p),_=await this.memReadBlock(d+p,B);w.set(_,p),p%2048===0&&this.logger(`Read ${p+B}/${h} bytes`)}let C=new Uint8Array(n).reverse();for(let p=0;p<8;p++)w[g+p]=C[p];this.logger(`Erasing CCFG sector at 0x${d.toString(16)}`),await this.sectorErase(d),this.logger(`Writing modified CCFG sector back (${h} bytes)...`);let I=240;for(let p=0;p<h;p+=I){let B=Math.min(I,h-p),_=w.subarray(p,p+B);await this.downloadTo(d+p,_),p%2048===0&&this.logger(`Written ${p+B}/${h} bytes`)}this.logger("Secondary IEEE address written successfully")}}parseIeeeAddress(e){e=e.trim();let t;if(e.includes(":"))t=e.split(":");else if(e.includes("-"))t=e.split("-");else{if(e=e.replace(/^0x/i,""),e.length!==16)throw new Error("IEEE address hex string must be exactly 16 characters");t=e.match(/.{1,2}/g)||[]}if(t.length!==8)throw new Error("IEEE address must contain exactly 8 bytes");let n=new Uint8Array(8);for(let r=0;r<8;r++){let s=parseInt(t[r],16);if(isNaN(s)||s<0||s>255)throw new Error(`Invalid byte value in IEEE address: ${t[r]}`);n[r]=s}return n}async detectOpenThreadRcp(){this.logger("Checking for OpenThread RCP firmware...");let e=new jt(this.link);e.setLogger(this.logger);let t=this.rxBuf;this.rxBuf=[],this.link.offData&&this.link.offData(this.rxDataHandler);let n=r=>{e.handleData(r)};this.link.onData(n);try{let r=await e.getOpenThreadInfo();return r?(r.version=r.version+" (OpenThread)",r):(this.logger("No OpenThread RCP response"),null)}catch(r){return this.logger(`OpenThread RCP detection failed: ${r}`),null}finally{e.dispose(),this.link.offData&&this.link.offData(n),this.rxBuf=t,this.link.onData(this.rxDataHandler)}}}});function Hi(i,e=0){let t=e;for(let n=0;n<i.length;n++){t^=i[n]<<8;for(let r=0;r<8;r++)t&32768?t=t<<1^4129:t=t<<1}return t&65535}function ga(i){let e=4294967295;for(let t=0;t<i.length;t++){e^=i[t];for(let n=0;n<8;n++)e&1?e=e>>>1^3988292384:e=e>>>1}return(e^4294967295)>>>0}function pc(i,e,t){if(i.length%e===0)return i;let n=Math.floor(i.length/e),r=e*(n+1),s=new Uint8Array(r);return s.set(i),s.fill(t,i.length),s}var Ln=D(()=>{"use strict"});var je,Qr,mc=D(()=>{"use strict";Ln();je=128,Qr=class{constructor(e,t){this.number=e;this.payload=t;if(t.length!==je)throw new Error(`Payload must be ${je} bytes`)}serialize(){let e=Hi(this.payload),t=new Uint8Array(3+je+2);return t[0]=1,t[1]=this.number&255,t[2]=255-this.number&255,t.set(this.payload,3),t[3+je]=e>>8&255,t[3+je+1]=e&255,t}}});function Cc(i){let e=0;for(let t of i){e^=t<<8;for(let n=0;n<8;n++)e&32768?e=(e<<1^4129)&65535:e=e<<1&65535}return e}var On,nt,ua,Ea,wa,Qn,pa,of,Gn,Hn,lf,xc,cf,Af,ma,hf,xa,Ca,Ba,Ia,ff,Sa,Bc=D(()=>{"use strict";Rt();Ln();Ln();mc();yn();sr();Pr();sr();On=class{constructor(e){this.buffer=new Uint8Array(0);this.state="waiting_for_menu";this.version=null;this.uploadStatus=null;this.ezspClient=null;this.spinelClient=null;this.xmodemFirmware=null;this.xmodemChunkIndex=0;this.xmodemTotalChunks=0;this.xmodemRetries=0;this.xmodemMaxRetries=3;this.xmodemProgressCallback=null;this.xmodemResolve=null;this.xmodemReject=null;this.xmodemTimeout=null;this.menuRegex=/(?:^|[\r\n])(?:Gecko|\w+\s*Serial)\s+Bootloader v([0-9.]+)[\r\n]+1\. upload (?:gbl|ebl)[\r\n]+2\. run[\r\n]+3\. (?:ebl|gbl) info[\r\n]+(?:\d+\. .*?[\r\n]+)*BL ?>/i;this.versionOnlyRegex=/(?:Gecko|\w+\s*Serial)\s+Bootloader\s+v([0-9.]+)/i;this.uploadCompleteRegex=/\r\nSerial upload (complete|aborted)\r\n(.*?)\x00?/s;this.promptRegex=/(?:^|[\r\n])BL ?> ?/i;this.boundDataHandler=e=>this.dataReceived(e);this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=()=>{};this.link=e,this.ensureListener()}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}async setLines(e,t){if(!this.setLinesHandler)throw new Error("setLinesHandler not set");this.setLinesHandler(e,t)}ensureListener(){this.link.offData&&this.link.offData(this.boundDataHandler),this.link.onData(this.boundDataHandler)}dataReceived(e){if(this.ezspClient){this.ezspClient.handleData(e);return}let t=new Uint8Array(this.buffer.length+e.length);if(t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t,this.state==="xmodem_uploading"){this.handleXmodemResponse();return}for(;this.buffer.length>0;){let n=this.state;if(n==="waiting_for_menu"){let r=new TextDecoder().decode(this.buffer),s=r.match(this.menuRegex);if(s){this.version=s[1],console.log(`Detected Gecko Bootloader v${this.version} (full menu)`),this.buffer=new Uint8Array(0),this.state="in_menu";continue}let a=r.match(this.versionOnlyRegex);if(a)if(this.version=a[1],console.log(`Detected Gecko Bootloader v${this.version} (version-only)`),this.promptRegex.test(r)){console.log("Prompt detected, entering IN_MENU state"),this.buffer=new Uint8Array(0),this.state="in_menu";continue}else{console.log("Version found, waiting for prompt... (breaking to wait for more data)");break}break}else if(n==="waiting_xmodem_ready"){if(!(this.buffer.includes?.(67)||new TextDecoder().decode(this.buffer).includes("C")))break;this.buffer=new Uint8Array(0),this.state="xmodem_uploading",this.xmodemSendChunkOrEOT()}else if(n==="waiting_upload_done"){let s=new TextDecoder().decode(this.buffer).match(this.uploadCompleteRegex);if(!s)break;this.uploadStatus=s[1],this.buffer=new Uint8Array(0),this.state="upload_done",this.state="waiting_for_menu"}else n==="in_menu"&&(this.buffer=new Uint8Array(0))}}async write(e){await this.link.write(e)}async writeString(e){let t=new TextEncoder;await this.write(t.encode(e))}async getChipInfo(){return{manufacturer:"Silabs",chipName:"EFR32MG21",revision:"Unknown",bootloaderVersion:await this.getBootloaderVersion()}}async getBootloaderVersion(e=2e3,t=!1){this.ensureListener();let n=t||!(this.state==="in_menu"&&this.version);return n&&(this.state="waiting_for_menu",this.version=null),new Promise((r,s)=>{(async()=>{try{n&&await this.writeString(`
3
`);let a=setTimeout(()=>{s(new Error("Timeout waiting for bootloader version"))},e),o=setInterval(()=>{this.state==="in_menu"&&this.version&&(clearInterval(o),clearTimeout(a),this.logger(`SL Bootloader: v${this.version}`),r(this.version))},50)}catch(a){s(a)}})()})}xmodemSendChunkOrEOT(){if(this.xmodemChunkIndex>=this.xmodemTotalChunks)this.write(new Uint8Array([4]));else{let e=this.xmodemChunkIndex*je,t=e+je,n=this.xmodemFirmware.slice(e,t),r=new Qr(this.xmodemChunkIndex+1&255,n);this.write(r.serialize())}this.xmodemTimeout=setTimeout(()=>{this.xmodemRetryChunk()},2e3)}xmodemRetryChunk(){if(this.xmodemRetries>=this.xmodemMaxRetries){this.xmodemAbort(new Error(`XMODEM transfer failed after ${this.xmodemMaxRetries} retries`));return}this.xmodemRetries++,this.xmodemSendChunkOrEOT()}xmodemAbort(e){this.xmodemTimeout&&(clearTimeout(this.xmodemTimeout),this.xmodemTimeout=null),this.xmodemReject&&(this.xmodemReject(e),this.xmodemReject=null,this.xmodemResolve=null)}handleXmodemResponse(){if(this.buffer.length===0)return;this.xmodemTimeout&&(clearTimeout(this.xmodemTimeout),this.xmodemTimeout=null);let e=this.buffer[0];if(this.buffer=this.buffer.slice(1),e===6){if(this.xmodemChunkIndex>=this.xmodemTotalChunks){this.state="waiting_upload_done",this.xmodemProgressCallback&&this.xmodemFirmware&&this.xmodemProgressCallback(this.xmodemFirmware.length,this.xmodemFirmware.length),setTimeout(()=>{this.xmodemResolve&&(this.xmodemResolve(),this.xmodemResolve=null,this.xmodemReject=null)},1e3);return}let t=(this.xmodemChunkIndex+1)*je;this.xmodemProgressCallback&&this.xmodemFirmware&&this.xmodemProgressCallback(t,this.xmodemFirmware.length),this.xmodemChunkIndex++,this.xmodemRetries=0,this.xmodemSendChunkOrEOT()}else e===21?this.xmodemRetryChunk():e===24?this.xmodemAbort(new Error("Transfer cancelled by receiver")):this.xmodemRetryChunk()}async flash(e){return new Promise((t,n)=>{(async()=>{try{this.ezspClient=null;let r=pc(e,je,255);await this.getBootloaderVersion(2e3,!0),await x(200),this.xmodemFirmware=r,this.xmodemChunkIndex=0,this.xmodemTotalChunks=r.length/je,this.xmodemRetries=0,this.xmodemMaxRetries=3;let s=(a,o)=>{let c=Math.round(a/o*100);this.progressCallback(c,`${a} / ${o}`)};this.xmodemProgressCallback=s,this.xmodemResolve=t,this.xmodemReject=n,s(0,r.length),this.state="waiting_xmodem_ready",await this.writeString("1"),await x(500)}catch(r){n(r)}})()})}async getApplicationVersion(e=!1,t=!1){this.ensureListener(),e&&(await Qt(t),await x(1e3)),this.ezspClient||(this.ezspClient=new Gn(this.link,this.logger));let{version:n,mfgString:r,boardName:s}=await this.ezspClient.readVersion(t);return this.logger(`Application version: ${n}`),this.logger(`MFG_STRING: ${r}`),this.logger(`MFG_BOARD_NAME: ${s}`),r&&s?{version:n,deviceModel:`${r} ${s}`}:{version:n}}async readSecondaryIeeeAddress(){this.ensureListener(),this.ezspClient||(this.ezspClient=new Gn(this.link,this.logger));try{return await this.ezspClient.readSecondaryIeeeAddress()}catch(e){throw this.logger(`Failed to read IEEE address: ${e}`),e}}async writeSecondaryIeeeAddress(e,t){if(e.length!==8)throw new Error("IEEE address must be 8 bytes");this.ensureListener(),this.ezspClient||(this.ezspClient=new Gn(this.link,this.logger)),t&&(this.logger("Warning! Force writing IEEE address!"),await x(1e3));try{await this.ezspClient.writeSecondaryIeeeAddress(e,t)}catch(n){throw n}}async getSpinelVersion(e=!1,t=!1){this.spinelClient=new jt(this.link);let n=r=>this.spinelClient?.handleData(r);this.link.offData?.(this.boundDataHandler),this.link.onData(n),e&&(await Qt(t),await x(1e3));try{let r=await this.spinelClient.getOpenThreadInfo();if(!r||!r.version)throw new Error("Failed to get Spinel info");return this.logger(`Spinel version: ${r.version} `),r.version}finally{this.link.offData?.(n),this.link.onData(this.boundDataHandler),this.spinelClient?.dispose(),this.spinelClient=null}}async getCpcVersion(e=!1,t=!1){let n=new Ia(this.link),r=s=>{n.handleData(s)};this.link.offData?.(this.boundDataHandler),this.link.onData(r);try{e&&(await Qt(t),await x(1e3)),await n.init();for(let s=0;s<10;s++)try{let a=await n.getVersion();return this.logger(`CPC version: ${a}`),a}catch{await x(100)}throw new Error("No CPC data received")}finally{this.link.offData?.(r),this.link.onData(this.boundDataHandler),n.dispose()}}async getRouterVersion(e=!1,t=!1){let n=new Sa(this.link),r=s=>{n.handleData(s)};this.link.offData?.(this.boundDataHandler),this.link.onData(r);try{if(e&&(await Qt(t),await x(1e3)),!await n.activatePrompt(3e3))throw new Error("No Router CLI prompt detected");n.clearBuffer();let a=await n.getVersion(2e3);return this.logger(`Router version: ${a}`),`${a}`}finally{this.link.offData?.(r),this.link.onData(this.boundDataHandler),n.dispose()}}async probe(e="auto",t="auto",n=!0,r=!0,s=[115200,460800,230400]){let a=t==="auto"?s:[t],o=e==="auto"?["ezsp","cpc","spinel","router"]:[e],c=[];for(let l of a){this.logger(`Probing at ${l} baud...`),await fe(l);for(let A of o)try{let h;switch(A){case"ezsp":this.logger("Trying EZSP (NCP)...");let d=await this.getApplicationVersion(n,r);return{firmwareType:"ezsp",version:d.version+" (ZB Coordinator)",baudrate:l,deviceModel:d.deviceModel};case"cpc":return this.logger("Trying CPC (MultiPAN RCP)..."),h=await this.getCpcVersion(n,r),{firmwareType:"cpc",version:h+" (MultiPAN)",baudrate:l};case"spinel":return this.logger("Trying Spinel (OT-RCP)..."),h=await this.getSpinelVersion(n,r),{firmwareType:"spinel",version:h+" (OpenThread)",baudrate:l};case"router":return this.logger("Trying Router CLI..."),h=await this.getRouterVersion(n,r),{firmwareType:"router",version:h+" (ZB Router)",baudrate:l}}}catch(h){let d=`${A}@${l}: ${h?.message||String(h)}`;c.push(d),this.logger(`${A} probe failed: ${h?.message||String(h)}`)}}throw new Error("Failed to detect firmware.")}};On.FirmwareType={AUTO:"auto",EZSP:"ezsp",CPC:"cpc",SPINEL:"spinel",ROUTER:"router"};nt=126,ua=125,Ea=17,wa=19,Qn=26,pa=24,of=(()=>{let i=new Uint8Array(256),e=66;for(let t=0;t<256;t++)i[t]=e,e&1?e=(e>>1^184)&255:e=e>>1;return i})(),Gn=class{constructor(e,t){this.buffer=[];this.discardingUntilFlag=!1;this.rxSeq=0;this.txSeq=0;this.awaitingAckFrame=null;this.pendingAckResolve=null;this.pendingAckReject=null;this.ezspSeq=0;this.pendingResponse=null;this.readyPromise=null;this.readyResolve=null;this.readyReject=null;this.initialized=!1;this.disposed=!1;this.link=e,this.logger=t}dispose(){this.disposed=!0,this.buffer=[],this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.reject(new Error("EZSP client disposed")),this.pendingResponse=null),this.pendingAckReject&&this.pendingAckReject(new Error("EZSP client disposed")),this.readyReject&&this.readyReject(new Error("EZSP client disposed")),this.readyResolve=null,this.readyReject=null,this.readyPromise=null}handleData(e){if(!this.disposed){for(let t of e)this.buffer.push(t);this.processBuffer()}}async reset(){let e=new Uint8Array(32).fill(Qn),t=192,n=new Uint8Array([t]),r=Hi(n,65535),s=new Uint8Array([nt,t,r&255,r>>8&255,nt]),a=new Uint8Array(e.length+s.length);a.set(e,0),a.set(s,e.length),await this.link.write(a),this.rxSeq=0,this.txSeq=0,this.ezspSeq=0,await x(500)}async initialize(e=!1){this.initialized||await Qt(e);let t=0,n=await this.sendEzspCommand(t,new Uint8Array([4]),4e3);if(n.length<4)throw new Error("Invalid EZSP version response");let r=n[0],s=n[1],a=n[2]|n[3]<<8;if(r!==4){let o=await this.sendEzspCommand(t,new Uint8Array([r]),4e3);if(o.length<4||o[0]!==r)throw new Error("EZSP version negotiation failed")}return this.initialized=!0,{version:r,stackType:s,stackVersion:a}}async readMfgToken(e){try{let n=new Uint8Array([e]),r=await this.sendEzspCommand(11,n,4e3);if(r.length>1){let s=r[0],a=r.slice(1,1+s);if(a.every(h=>h===255))return;let c=a.indexOf(0);c===-1&&(c=a.length);let l=a.slice(0,c);return l.every(h=>h>=32&&h<=126)?new TextDecoder().decode(l):void 0}}catch(t){console.warn(`Failed to get MFG token 0x${e.toString(16)}:`,t)}}async readVersion(e=!1){await this.ensureReady();let{version:t,stackType:n,stackVersion:r}=await this.initialize(e),s=[r>>12&15,r>>8&15,r>>4&15,r&15];console.log(`EZSP Stack Version Digits: ${s.join(".")}`);let o=s.map(w=>w.toString(10)).join("."),c=null;try{let C=new Uint8Array([17]),I=await this.sendEzspCommand(170,C,4e3);if(I.length>=2&&I[0]===0){let p=I[1];p>=7&&I.length>=2+p&&(c=I[2]|I[3]<<8,console.log(`EZSP: Got build number from VALUE_VERSION_INFO: ${c}`))}}catch(w){console.warn("Failed to get VALUE_VERSION_INFO:",w)}let l=await this.readMfgToken(1),A=await this.readMfgToken(2);console.log(`EZSP: MFG_STRING = ${l?`"${l}"`:"(empty)"}`),console.log(`EZSP: MFG_BOARD_NAME = ${A?`"${A}"`:"(empty)"}`);let h=c!==null?`${o}.${c}`:o,d=c!==null?`${o} build ${c}`:o,f=[`EZSP v${t}`,`stack type ${n}`,h];return{version:`${d} (${f.join(", ")})`,mfgString:l,boardName:A}}async readSecondaryIeeeAddress(){await this.ensureReady(),await this.initialize();let e=await this.sendEzspCommand(38,new Uint8Array([]),4e3);if(e.length>=8)return e.slice(0,8);throw new Error(`Failed to read EUI64: invalid response length ${e.length}`)}async writeSecondaryIeeeAddress(e,t=!1){if(e.length!==8)throw new Error("IEEE address must be 8 bytes");await this.ensureReady(),await this.initialize();let n=await this.readSecondaryIeeeAddress();if(this.arraysEqual(n,e)){this.logger("EUI64 already matches target, skipping write");return}let r=await this.getNv3RestoredEui64Key();if(r!==null)try{this.logger(`Using NV3 token 0x${r.toString(16).padStart(8,"0")}`),await this.setTokenData(r,0,e),this.logger("\u2713 EUI64 written to NV3 storage (rewritable)");return}catch(a){this.logger(`Failed to write NV3 token: ${a}`)}let s=await this.getMfgCustomEui64();if(s===null&&t){this.logger("Using MFG_CUSTOM_EUI_64 token (ONE-TIME write, permanent!)"),await this.setMfgToken(12,e),this.logger("\u2713 EUI64 written to MFG_CUSTOM_EUI_64 (PERMANENT)");return}throw s===null&&!t?new Error('Firmware does not support NV3 tokens. Custom IEEE will not be written unless you pass select "Force" option. WARNING: MFG_CUSTOM_EUI_64 is ONE-TIME write and cannot be changed afterward!'):new Error(`Custom IEEE address has already been written once to MFG_CUSTOM_EUI_64 (${Array.from(s).reverse().map(a=>a.toString(16).padStart(2,"0").toUpperCase()).join(":")}) and cannot be changed!`)}async getNv3RestoredEui64Key(){let e=[57642,123178];for(let t of e)try{let n=await this.getTokenData(t,0);if(n)return console.log(`Found NV3 token 0x${t.toString(16).padStart(8,"0")}: ${Array.from(n).map(r=>r.toString(16).padStart(2,"0")).join(":")}`),t}catch{continue}return null}async getMfgCustomEui64(){try{let t=new Uint8Array([12]),n=await this.sendEzspCommand(11,t,4e3);if(n.length<9||n[0]!==8)return null;let s=n.slice(1,9);return s.every(o=>o===255)?null:s}catch{return null}}async canRewriteCustomEui64(){return await this.getNv3RestoredEui64Key()!==null}async canBurnUserdataCustomEui64(){return await this.getMfgCustomEui64()===null}async getTokenData(e,t){let n=new Uint8Array(8);n[0]=e&255,n[1]=e>>8&255,n[2]=e>>16&255,n[3]=e>>24&255,n[4]=t&255,n[5]=t>>8&255,n[6]=t>>16&255,n[7]=t>>24&255;let r=await this.sendEzspCommand(258,n,4e3);if(r.length<1||r[0]!==0||r.length<3)return null;let a=r[1]|r[2]<<8;return r.length<3+a?null:r.slice(3,3+a)}async setTokenData(e,t,n){let r=new Uint8Array(9+n.length);r[0]=e&255,r[1]=e>>8&255,r[2]=e>>16&255,r[3]=e>>24&255,r[4]=t&255,r[5]=t>>8&255,r[6]=t>>16&255,r[7]=t>>24&255,r[8]=n.length,r.set(n,9);let s=await this.sendEzspCommand(259,r,4e3);if(s.length<1)throw new Error("Invalid setTokenData response");let a=s[0];if(a!==0)throw new Error(`setTokenData failed with status 0x${a.toString(16).padStart(2,"0")} (${this.getEmberStatusName(a)})`)}async setMfgToken(e,t){let n=new Uint8Array(2+t.length);n[0]=e,n[1]=t.length,n.set(t,2);let r=await this.sendEzspCommand(12,n,4e3);if(r.length<1)throw new Error("Invalid setMfgToken response");let s=r[0];if(s!==0)throw new Error(`setMfgToken failed with status 0x${s.toString(16).padStart(2,"0")} (${this.getEmberStatusName(s)})`)}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}getEmberStatusName(e){return{0:"SUCCESS",1:"ERR_FATAL",2:"BAD_ARGUMENT",3:"NOT_FOUND",178:"KEY_INVALID",180:"TABLE_FULL",182:"TABLE_ENTRY_ERASED",192:"NVM3_TOKEN_NO_VALID_PAGES",193:"NVM3_ERR_OPENED_WITH_OTHER_PARAMETERS"}[e]||`UNKNOWN_${e}`}async ensureReady(){if(this.disposed)throw new Error("EZSP client disposed");this.initialized||(this.readyPromise||(this.readyPromise=new Promise((e,t)=>{this.readyResolve=e,this.readyReject=t}),this.sendResetFrame().catch(e=>{this.readyReject?.(e instanceof Error?e:new Error(String(e)))})),await Promise.race([this.readyPromise,new Promise((e,t)=>setTimeout(()=>t(new Error("Timed out waiting for EZSP reset")),4e3))]),this.initialized=!0)}resolveReady(){this.readyResolve?.(),this.readyResolve=null,this.readyReject=null}async sendEzspCommand(e,t,n=2e3){if(this.pendingResponse)throw new Error("EZSP request already in flight");let r=this.ezspSeq;this.ezspSeq=this.ezspSeq+1&255;let s=new Uint8Array(5+t.length);s[0]=r,s[1]=0,s[2]=1,s[3]=e&255,s[4]=e>>8&255,s.set(t,5);let a=new Promise((o,c)=>{let l=window.setTimeout(()=>{this.pendingResponse&&this.pendingResponse.seq===r&&(this.pendingResponse.reject(new Error("EZSP response timeout")),this.pendingResponse=null)},n);this.pendingResponse={seq:r,resolve:o,reject:c,timer:l}});return await this.writeDataFrame(s),a}async writeDataFrame(e){let t=this.txSeq;this.txSeq=this.txSeq+1&7;let n=t<<4|0|this.rxSeq&7,r=this.randomize(e),s=new Uint8Array(1+r.length);s[0]=n,s.set(r,1),await this.sendAshFrame(s),await this.waitForAck(t,1e3)}async sendAshFrame(e){let t=this.appendCrc(e),n=this.stuff(t),r=new Uint8Array(n.length+2);r[0]=nt,r.set(n,1),r[r.length-1]=nt,await this.link.write(r)}async waitForAck(e,t){this.pendingAckReject&&this.pendingAckReject(new Error("Overwriting pending ACK wait")),this.awaitingAckFrame=e,await new Promise((n,r)=>{this.pendingAckResolve=n,this.pendingAckReject=r,window.setTimeout(()=>{this.awaitingAckFrame===e&&(this.awaitingAckFrame=null,r(new Error("ACK timeout")))},t)}).catch(n=>{throw n})}randomize(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]^of[n];return t}derandomize(e){return this.randomize(e)}appendCrc(e){let t=Hi(e,65535),n=new Uint8Array(e.length+2);return n.set(e,0),n[n.length-2]=t>>8&255,n[n.length-1]=t&255,n}stuff(e){let t=[];for(let n of e)n===nt||n===ua||n===Ea||n===wa||n===pa||n===Qn?t.push(ua,n^32):t.push(n);return new Uint8Array(t)}unstuff(e){let t=[],n=!1;for(let r of e)n?(t.push(r^32),n=!1):r===ua?n=!0:t.push(r);if(n)throw new Error("Dangling escape byte");return new Uint8Array(t)}processBuffer(){for(;this.buffer.length;){if(this.discardingUntilFlag){let r=this.buffer.indexOf(nt);if(r===-1){this.buffer=[];return}this.buffer=this.buffer.slice(r+1),this.discardingUntilFlag=!1;continue}let e=this.findNextReserved();if(!e)return;let[t,n]=e;if(n===nt){let r=this.buffer.slice(0,t);if(this.buffer=this.buffer.slice(t+1),!r.length)continue;try{let s=this.parseFrame(this.unstuff(new Uint8Array(r)));this.handleFrame(s)}catch{this.sendNak()}continue}if(n===Qn){this.buffer=this.buffer.slice(t+1);continue}if(n===pa){this.discardingUntilFlag=!0,this.buffer=this.buffer.slice(t+1);continue}if(n===Ea||n===wa){this.buffer.splice(t,1);continue}break}}findNextReserved(){let e=[nt,Qn,pa,Ea,wa],t=-1,n=0;for(let r of e){let s=this.buffer.indexOf(r);s!==-1&&(t===-1||s<t)&&(t=s,n=r)}return t===-1?null:[t,n]}parseFrame(e){if(e.length<3)throw new Error("Frame too short");let t=e[0],n=e[e.length-2]<<8|e[e.length-1],r=e.slice(0,e.length-2);if(Hi(r,65535)!==n)throw new Error("Invalid frame CRC");if(t&128){if((t&224)===128)return{kind:"ack",ackNum:t&7};if((t&224)===160)return{kind:"nak",ackNum:t&7};if(t===192)return{kind:"rst"};if(t===193){if(e.length<5)throw new Error("Invalid RSTACK body");return{kind:"rstack",resetCode:e[2]}}else if(t===194){if(e.length<5)throw new Error("Invalid ERROR frame");return{kind:"error",resetCode:e[2]}}}else return{kind:"data",frmNum:t>>4&7,reTx:(t>>3&1)===1,ackNum:t&7,payload:this.derandomize(e.slice(1,e.length-2))};throw new Error(`Unknown ASH control byte 0x${t.toString(16)}`)}handleFrame(e){e.kind==="data"?(this.handleAckInfo(e.ackNum),e.frmNum===this.rxSeq||e.reTx?(e.frmNum===this.rxSeq&&(this.rxSeq=this.rxSeq+1&7),this.sendAckFrame(),this.handleEzspPayload(e.payload)):this.sendNak()):e.kind==="ack"||e.kind==="nak"?this.handleAckInfo(e.ackNum):e.kind==="rstack"?(this.rxSeq=0,this.txSeq=0,this.resolveReady()):e.kind==="error"&&(this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.reject(new Error(`NCP error: ${e.resetCode}`)),this.pendingResponse=null),this.readyReject?.(new Error(`NCP error: ${e.resetCode}`)),this.readyPromise=null,this.readyResolve=null,this.readyReject=null)}handleAckInfo(e){if(this.awaitingAckFrame===null)return;let t=this.awaitingAckFrame+1&7;e===t&&(this.awaitingAckFrame=null,this.pendingAckResolve?.(),this.pendingAckResolve=null,this.pendingAckReject=null)}handleEzspPayload(e){if(!this.pendingResponse)return;let t=e[0],n=e[1],r,s;e.length>=5&&e[2]===1?(r=e[3]|e[4]<<8,s=e.slice(5)):(r=e[2],s=e.slice(3)),!(!(n&128)&&this.pendingResponse.seq!==t)&&this.pendingResponse.seq===t&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.resolve(s),this.pendingResponse=null)}sendAckFrame(){let e=128|this.rxSeq&7,t=new Uint8Array([e]);this.sendAshFrame(t).catch(()=>{})}sendNak(){let e=160|this.rxSeq&7,t=new Uint8Array([e]);this.sendAshFrame(t).catch(()=>{})}async sendResetFrame(){let t=new Uint8Array([192]),n=this.appendCrc(t),r=this.stuff(n),s=new Uint8Array(33);s.fill(Qn),s[s.length-1]=nt;let a=new Uint8Array(s.length+r.length+1);a.set(s,0),a.set(r,s.length),a[a.length-1]=nt,await this.link.write(a)}},Hn=20,lf=0,xc=3,cf=4,Af=2,ma=6,hf=0,xa=3,Ca=4;Ba=class{constructor(e){this.buffer=[];this.disposed=!1;this.lastReceivedPayload=null;this.commandSeq=0;this.pendingResponse=null;this.link=e}dispose(){this.disposed=!0,this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.reject(new Error("CPC client disposed")),this.pendingResponse=null)}buildFrame(e,t,n){let r=t.length>0?t.length+2:0,s=n??xc<<6,a=new Uint8Array([Hn,e&15,r&255,r>>8&255,s]),o=Cc(a);if(t.length===0){let h=new Uint8Array(7),d=0;return h[d++]=Hn,h[d++]=e&15,h[d++]=r&255,h[d++]=r>>8&255,h[d++]=s,h[d++]=o&255,h[d++]=o>>8&255,h}let c=Cc(t),l=new Uint8Array(7+t.length+2),A=0;return l[A++]=Hn,l[A++]=e&15,l[A++]=r&255,l[A++]=r>>8&255,l[A++]=s,l[A++]=o&255,l[A++]=o>>8&255,l.set(t,A),A+=t.length,l[A++]=c&255,l[A++]=c>>8&255,l}buildUnnumberedPayload(e,t,n=new Uint8Array(0)){let r=new Uint8Array(4+n.length);r[0]=t&255,r[1]=t>>8&255,r[2]=t>>16&255,r[3]=t>>24&255,r.set(n,4);let s=new Uint8Array(4+r.length);return s[0]=e,s[1]=this.commandSeq,s[2]=r.length&255,s[3]=r.length>>8&255,s.set(r,4),this.commandSeq=this.commandSeq+1&255,s}async sendUnnumberedCommand(e,t=new Uint8Array(0),n=1e3){let r=this.buildUnnumberedPayload(Af,e,t),s=xc<<6|cf,a=this.buildFrame(lf,r,s);return new Promise((o,c)=>{this.pendingResponse={resolve:o,reject:c,timer:window.setTimeout(()=>{this.pendingResponse=null,c(new Error("CPC response timeout"))},n)},this.link.write(a)})}async requestVersion(){try{let e=await this.sendUnnumberedCommand(xa,new Uint8Array(0),1e3);if(e.length>=8&&e[0]===ma&&(e[2]|e[3]<<8)>=16&&e.length>=20&&(e[4]|e[5]<<8|e[6]<<16|e[7]<<24)===xa){let r=e[8]|e[9]<<8|e[10]<<16|e[11]<<24,s=e[12]|e[13]<<8|e[14]<<16|e[15]<<24,a=e[16]|e[17]<<8|e[18]<<16|e[19]<<24;return`${r}.${s}.${a}`}}catch{}try{let e=await this.sendUnnumberedCommand(Ca,new Uint8Array(0),1e3);if(e.length>=8&&e[0]===ma){let t=e[2]|e[3]<<8;if(t>=4&&e.length>=4+t&&(e[4]|e[5]<<8|e[6]<<16|e[7]<<24)===Ca){let r=e.slice(8,4+t),s=new TextDecoder().decode(r).replace(/\0/g,"").trim();if(s&&s!=="UNDEFINED")return s}}}catch{}return null}handleData(e){if(!this.disposed){for(let t of e)this.buffer.push(t);this.processBuffer()}}processBuffer(){for(;this.buffer.length>0;){let e=this.buffer.indexOf(Hn);if(e===-1){this.buffer=[];return}if(e>0&&(this.buffer=this.buffer.slice(e)),this.buffer.length<7)return;let t=this.buffer[1]&15,n=this.buffer[2]|this.buffer[3]<<8,r=this.buffer[4],s=7+n;if(this.buffer.length<s)return;let a=new Uint8Array(this.buffer.slice(0,s));this.buffer=this.buffer.slice(s),this.buffer.length>0&&this.buffer[0]===Hn&&(this.buffer=this.buffer.slice(1));let o=r>>6&3,c=r&63;if(n>0){let l=a.slice(7,7+n);this.lastReceivedPayload=l,this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.resolve(l),this.pendingResponse=null)}}}getLastPayload(){return this.lastReceivedPayload}parseVersionFromPayload(e){if(!e||e.length<2)return null;if(e[0]===ma){if(e[1]===hf)return"detected";if(e.length>=5){let s=e[1]|e[2]<<8|e[3]<<16|e[4]<<24;if(s===xa&&e.length>=17){let a=e[5]|e[6]<<8|e[7]<<16|e[8]<<24,o=e[9]|e[10]<<8|e[11]<<16|e[12]<<24,c=e[13]|e[14]<<8|e[15]<<16|e[16]<<24;return`${a}.${o}.${c}`}if(s===Ca&&e.length>7){let a=e.slice(5,-2),o=new TextDecoder().decode(a).replace(/\0/g,"").trim();if(o)return o}}}try{let r=new TextDecoder().decode(e),s=r.match(/(\d+\.\d+\.\d+)/);if(s)return s[1];if(/^[\x20-\x7e]+$/.test(r))return r.trim()}catch{}return`raw:${Array.from(e.slice(0,Math.min(8,e.length))).map(r=>r.toString(16).padStart(2,"0")).join("")}`}},Ia=class{constructor(e){this.link=e,this.cpc=new Ba(e)}dispose(){this.cpc.dispose()}handleData(e){this.cpc.handleData(e)}async init(){await x(200)}async getVersion(){let e=this.cpc.getLastPayload();if(!e)throw new Error("No CPC data received - device may not be MultiPAN RCP");if(!this.cpc.parseVersionFromPayload(e))throw new Error("Invalid CPC data received");let n=await this.cpc.requestVersion();return n?`${n} (MultiPAN RCP)`:"? (MultiPAN RCP)"}},ff=/stack ver\. \[([^\]]+)\]/,Sa=class{constructor(e){this.buffer="";this.disposed=!1;this.pendingResponse=null;this.link=e}dispose(){this.disposed=!0,this.pendingResponse&&(window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.reject(new Error("Router client disposed")),this.pendingResponse=null)}handleData(e){if(this.disposed)return;let t=new TextDecoder().decode(e);if(this.buffer+=t,this.buffer.includes(">")){let n=ff.exec(this.buffer);if(n&&this.pendingResponse){let r=n[1];window.clearTimeout(this.pendingResponse.timer),this.pendingResponse.resolve(r),this.pendingResponse=null,this.buffer="";return}}}hasPrompt(){return this.buffer.includes(">")}clearBuffer(){this.buffer=""}async activatePrompt(e=2e3){return this.buffer="",new Promise(t=>{let n=window.setTimeout(()=>{t(!1)},e),r=()=>{this.hasPrompt()?(window.clearTimeout(n),t(!0)):setTimeout(r,50)};this.link.write(new Uint8Array([13,10])),r()})}async getVersion(e=2e3){return this.buffer="",new Promise((t,n)=>{this.pendingResponse={resolve:t,reject:n,timer:window.setTimeout(()=>{this.pendingResponse=null,n(new Error("Router version timeout"))},e)};let r=new TextEncoder().encode(`version\r
`);this.link.write(r)})}}});function Ic(i){let e=i.split(/\r?\n/),t=[],n=null,r=0;for(let s=0;s<e.length;s++){let a=e[s].trim();if(!a)continue;if(!a.startsWith(":"))throw new Error(`Invalid HEX record at line ${s+1}: Missing ':'`);if(a.length%2!==1)throw new Error(`Invalid HEX record at line ${s+1}: Odd length`);let o=parseInt(a.substring(1,3),16);if(isNaN(o))throw new Error(`Invalid HEX record at line ${s+1}: Invalid byte count`);if(a.length!==11+o*2)throw new Error(`Invalid HEX record at line ${s+1}: Length mismatch (expected ${11+o*2}, got ${a.length})`);let c=parseInt(a.substring(3,7),16),l=parseInt(a.substring(7,9),16),A=a.substring(9,9+o*2),h=parseInt(a.substring(9+o*2,9+o*2+2),16);if(isNaN(c)||isNaN(l)||isNaN(h))throw new Error(`Invalid HEX record at line ${s+1}: Invalid hex digits`);let d=o+(c>>8)+(c&255)+l+h,f=new Uint8Array(o);for(let g=0;g<o;g++){let w=parseInt(A.substring(g*2,g*2+2),16);if(isNaN(w))throw new Error(`Invalid HEX record at line ${s+1}: Invalid data byte`);f[g]=w,d+=w}if(d&255)throw new Error(`Checksum mismatch at line ${s+1}`);if(l===0){let g=r|c;if(n&&n.address+n.data.length===g){let w=new Uint8Array(n.data.length+f.length);w.set(n.data),w.set(f,n.data.length),n.data=w}else n&&t.push(n),n={address:g,data:f}}else{if(l===1)break;l===2?r=(f[0]<<8|f[1])<<4:l===4&&(r=(f[0]<<8|f[1])<<16)}}return n&&t.push(n),t}var E,Hr,Sc=D(()=>{"use strict";Vt();_n();Sn();ze();E=class E{constructor(){this.device=null;this.interfaceNumber=0;this.endpointIn=null;this.endpointOut=null;this.logger=()=>{};this.progressCallback=()=>{};this.initialized=!1;this.debugLogging=!1}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setDebugLogging(e){this.debugLogging=e}logTX(e,t=""){if(!this.debugLogging)return;let n=e instanceof Uint8Array?e:new Uint8Array(e),r=Array.from(n).map(s=>s.toString(16).padStart(2,"0")).join(" ");this.logger(`TX ${t}(${n.length}): ${r}`)}logRX(e,t=""){if(!this.debugLogging)return;let n=Array.from(new Uint8Array(e.buffer)).map(r=>r.toString(16).padStart(2,"0")).join(" ");this.logger(`RX ${t}(${e.byteLength}): ${n}`)}async connect(){try{if(this.device=await navigator.usb.requestDevice({filters:[{vendorId:E.VID_CC,productId:E.PID_CC},{vendorId:E.VID_RF,productId:E.PID_RF}]}),!this.device)throw new Error("Device not selected");await this.device.open(),await this.device.selectConfiguration(1);let e=this.device.configuration?.interfaces[0];if(!e)throw new Error("Interface 0 not found");this.interfaceNumber=e.interfaceNumber,await this.device.claimInterface(this.interfaceNumber);for(let t of e.alternate.endpoints)t.type==="bulk"&&t.endpointNumber===4&&(t.direction==="in"?this.endpointIn=t:t.direction==="out"&&(this.endpointOut=t));if(!this.endpointIn||!this.endpointOut)throw new Error("Bulk endpoints not found");this.logger("Connected to "+this.device.productName+" by "+this.device.manufacturerName+" (SN: "+this.device.serialNumber+")")}catch(e){throw console.error("Connection failed:",e),e}}async disconnect(){this.device&&(await this.device.close(),this.device=null)}isConnected(){return this.device!==null&&this.device.opened}async setSpeed(e){if(!this.device)throw new Error("Device not connected 1");await this.controlTransferOut(E.REQ_SET_SPEED,e?0:1,0)}async controlTransferOut(e,t,n,r){if(!this.device)throw new Error("Device not connected 2");let s=await this.device.controlTransferOut({requestType:"vendor",recipient:"device",request:e,value:t,index:n},r);if(s.status!=="ok")throw this.logger(`Control transfer OUT failed: ${s.status}`),new Error(`Control transfer OUT failed: ${s.status}`)}async controlTransferIn(e,t,n,r){if(!this.device)throw new Error("Device not connected 3");let s=await this.device.controlTransferIn({requestType:"vendor",recipient:"device",request:e,value:t,index:n},r);if(s.status!=="ok"||!s.data)throw new Error(`Control transfer failed: ${s.status}`);return this.logRX(s.data,"Control"),s.data}async getDeviceInfo(){if(!this.device)throw new Error("Device not connected 4");let e=await this.controlTransferIn(E.REQ_GET_STATE,0,0,8),t=new DataView(e.buffer),n=t.getUint16(0,!0),r=t.getUint16(2,!0),s=t.getUint16(4,!0);return{chipId:n,fwVersion:r,fwRevision:s}}async prepareDebugMode(){if(!this.device)throw new Error("Device not connected 5");await this.controlTransferOut(E.REQ_PREPARE_DEBUG_MODE,0,0);let e=48,t=new Uint8Array(e);t.fill(32);let n=await this.getDeviceInfo(),r="CC"+(n.chipId>>8&255).toString(16).padStart(2,"0").toUpperCase()+(n.chipId&255).toString(16).padStart(2,"0").toUpperCase(),s=new TextEncoder().encode(r);t.set(s,0);let a=new TextEncoder().encode("DID:");t.set(a,16);let o=(n.fwVersion>>8&255).toString(16).padStart(2,"0").toUpperCase()+(n.fwVersion&255).toString(16).padStart(2,"0").toUpperCase(),c=new TextEncoder().encode(o);t.set(c,21),await this.controlTransferOut(E.REQ_SET_CHIP_INFO,1,0,t)}async initDebugInterface(){if(!this.device)throw new Error("Device not connected 6");this.logger("Initializing debug interface..."),await this.prepareDebugMode(),await this.reset(),await new Promise(e=>setTimeout(e,1e3));try{await this.sendDebugInstructions(new Uint8Array([E.WRAPPER_DEBUG_EXEC_READ,E.DEBUG_CMD_READ_STATUS]));let e=await this.readBulkData(1);await this.sendDebugInstructions(new Uint8Array([E.WRAPPER_DEBUG_EXEC_ARG,E.DEBUG_CMD_WR_CONFIG,34])),this.initialized=!0,this.logger("Initialized successfully WITH reset")}catch(e){throw this.logger(`FAILED even with reset: ${e}`),new Error(`Cannot establish bulk communication: ${e}`)}}async sendDebugInstructions(e){if(!this.device||!this.endpointOut)throw new Error("Device not connected 7");this.logTX(e);let t=await this.device.transferOut(this.endpointOut.endpointNumber,e);if(t.status!=="ok")throw new Error(`Bulk OUT failed: ${t.status}`)}async sendRawData(e){if(!this.device||!this.endpointOut)throw new Error("Device not connected 8");this.logTX(e,"(RAW)");let t=await this.device.transferOut(this.endpointOut.endpointNumber,e);if(t.status!=="ok")throw new Error(`Raw Bulk OUT failed: ${t.status}`)}async readBulkData(e){if(!this.device||!this.endpointIn)throw new Error("Device not connected 9");let t=new Promise((s,a)=>setTimeout(()=>a(new Error("Bulk read timed out")),1e4)),n=this.device.transferIn(this.endpointIn.endpointNumber,e),r=await Promise.race([n,t]);if(r.status!=="ok"||!r.data)throw new Error("Bulk read failed");if(r.data.byteLength===0&&e>0)throw this.logger("Error: Bulk read returned 0 bytes"),new Error("Bulk read returned 0 bytes");return this.logRX(r.data),r.data}async readXData(e,t){this.initialized||await this.initDebugInterface();let n=new Uint8Array(t),r=512;for(let s=0;s<t;s+=r){let a=Math.min(r,t-s),o=e+s,c=[];E.CMD_HEADER.forEach(A=>c.push(A)),c.push(E.CMD_EXEC_3BYTE,E.DEBUG_CMD_DEBUG_INSTR_3,E.ASM_MOV_DPTR_IMM16,o>>8&255,o&255);for(let A=0;A<a;A++){let h=E.CMD_EXEC_1BYTE_READ;(A===a-1||(A+1)%64===0)&&(h|=1),c.push(h,E.DEBUG_CMD_DEBUG_INSTR_1,E.ASM_MOVX_A_AT_DPTR),c.push(E.CMD_EXEC_1BYTE,E.DEBUG_CMD_DEBUG_INSTR_1,E.ASM_INC_DPTR)}E.CMD_FOOTER.forEach(A=>c.push(A)),await this.sendDebugInstructions(new Uint8Array(c));let l=await this.readBulkData(a);for(let A=0;A<a;A++)n[s+A]=l.getUint8(A)}return n}async writeXData(e,t,n=!1){this.initialized||await this.initDebugInterface();let r=512;for(let s=0;s<t.length;s+=r){if(!n){let l=Math.round(s/t.length*100);this.progressCallback(l,`Writing XDATA... ${l}%`)}let a=Math.min(r,t.length-s),o=e+s,c=[];E.CMD_HEADER.forEach(l=>c.push(l)),c.push(E.CMD_EXEC_3BYTE,E.DEBUG_CMD_DEBUG_INSTR_3,E.ASM_MOV_DPTR_IMM16,o>>8&255,o&255);for(let l=0;l<a;l++){let A=t[s+l];c.push(E.CMD_EXEC_2BYTE,E.DEBUG_CMD_DEBUG_INSTR_2,E.ASM_MOV_A_IMM8,A),c.push(E.CMD_EXEC_1BYTE,E.DEBUG_CMD_DEBUG_INSTR_1,E.ASM_MOVX_AT_DPTR_A),c.push(E.CMD_EXEC_1BYTE,E.DEBUG_CMD_DEBUG_INSTR_1,E.ASM_INC_DPTR)}E.CMD_FOOTER.forEach(l=>c.push(l)),await this.sendDebugInstructions(new Uint8Array(c))}}async readIEEEAddress(){this.initialized||await this.initDebugInterface();let e=await this.readXData(E.ADDR_IEEE_PRIMARY,8);return Array.from(e).reverse().map(n=>n.toString(16).padStart(2,"0").toUpperCase()).join(":")}async chipErase(){if(!this.device)throw new Error("Device not connected 10");this.initialized||await this.initDebugInterface(),this.progressCallback(0,"Erasing chip..."),await this.sendDebugInstructions(new Uint8Array([E.WRAPPER_DEBUG_EXEC,E.DEBUG_CMD_CHIP_ERASE]));let e=8e3,t=Date.now(),n=!1;for(;Date.now()-t<e;){if(await this.sendDebugInstructions(new Uint8Array([E.WRAPPER_DEBUG_EXEC_READ,E.DEBUG_CMD_READ_STATUS])),!((await this.readBulkData(1)).getUint8(0)&128)){n=!0;break}await new Promise(a=>setTimeout(a,100)),this.progressCallback(0,"Erasing...")}if(!n)throw new Error("Chip erase timed out");this.progressCallback(100,"Erase complete"),this.initialized=!1}async reset(e=!0){if(!this.device)throw new Error("Device not connected 11");this.logger(`Resetting target to ${e?"Debug":"Normal"} mode...`),await this.controlTransferOut(E.REQ_RESET,0,e?1:0),await new Promise(t=>setTimeout(t,100)),this.initialized=!1}async writeSfr(e,t){let n=[];n.push(64,85,0),n.push(E.CMD_EXEC_3BYTE,E.DEBUG_CMD_DEBUG_INSTR_3,E.ASM_MOV_DIRECT_IMM,e,t),n.push(144,86,116),await this.sendDebugInstructions(new Uint8Array(n))}async readSfr(e){for(let t=1;t<=3;t++)try{let n=[];n.push(64,85,0),n.push(127,86,229,e),n.push(144,86,116),await this.sendDebugInstructions(new Uint8Array(n));let r=await this.readBulkData(1);if(r.byteLength<1)throw new Error("Bulk read returned 0 bytes");return r.getUint8(0)}catch(n){if(t<3)this.logger(`readSfr(0x${e.toString(16)}) attempt ${t} failed: ${n}. Retrying...`),await new Promise(r=>setTimeout(r,100));else throw n}throw new Error("readSfr failed after retries")}async writeFlashBlockFast(e,t){let h=new Uint8Array([98,96,0,0,4,0,31,17,98,96,4,0,4,0,31,17,0,0,98,115,4,0,18,66,4,0,98,115,4,0,18,66]);await this.writeXData(2048,h,!0),await this.writeXData(28882,new Uint8Array([0]),!0),await this.writeXData(28883,new Uint8Array([8]),!0);let d=t;await this.writeXData(E.XREG_FADDRL,new Uint8Array([d&255]),!0),await this.writeXData(E.XREG_FADDRH,new Uint8Array([d>>8&255]),!0);let f=Math.ceil(e.length/1024)*1024,g=new Uint8Array(f);g.set(e),g.fill(255,e.length);let w,m;for(let I=0;I<g.length/1024;I++){I&1?(w=4,m=16):(w=2,m=8),await this.writeXData(28886,new Uint8Array([w]),!0);let p=new Uint8Array(1027);p[0]=238,p[1]=132,p[2]=0,p.set(g.slice(I*1024,(I+1)*1024),3),await this.sendRawData(p);let B;do B=(await this.readXData(E.XREG_FCTL,1))[0];while(B&128);await this.writeXData(28886,new Uint8Array([m]),!0),await this.writeXData(E.XREG_FCTL,new Uint8Array([6]),!0),this.progressCallback(Math.min(100,Math.round((I+1)*1024/g.length*100)),`Writing ${Math.min((I+1)*1024,g.length)} / ${g.length}`)}let C;do C=(await this.readXData(E.XREG_FCTL,1))[0];while(C&128)}async writeFlashBlockSlow(e,t,n=0,r=100){let o=Math.ceil(e.length/512)*512,c=new Uint8Array(o);c.set(e),c.fill(255,e.length);let l=512,A=E.ADDR_BUFFER,h=25203,d=new Uint8Array([A>>8&255,A&255,h>>8&255,h&255,l>>8&255,l&255,18,66]);await this.writeXData(512,d,!0),await this.writeXData(E.XREG_DMA0CFGH,new Uint8Array([2]),!0),await this.writeXData(E.XREG_DMA0CFGL,new Uint8Array([0]),!0);for(let f=0;f<c.length;f+=512){let g=f/c.length,w=Math.round(n+g*(r-n));this.progressCallback(w,`Writing ${f}/${c.length}`);let m=c.slice(f,f+512),C=!0;for(let p=0;p<m.length;p++)if(m[p]!==255){C=!1;break}if(C){this.logger(`Skipping empty block at offset 0x${(t+f).toString(16)} (Slow Write)`);continue}let I=(t+f)/4;await this.writeXData(E.XREG_FADDRL,new Uint8Array([I&255]),!0),await this.writeXData(E.XREG_FADDRH,new Uint8Array([I>>8&255]),!0);try{await this.writeXData(E.ADDR_BUFFER,m,!0),await this.writeXData(E.XREG_DMAARM,new Uint8Array([1]),!0),await this.writeXData(E.XREG_FCTL,new Uint8Array([6]),!0);let p=!0,B=0;for(;p&&B<500;)(await this.readXData(E.XREG_FCTL,1))[0]&128?B++:p=!1;if(p)throw new Error(`Flash write timed out (DMA) at block ${f}`)}catch(p){throw this.logger(`Failed to write block at offset ${f} (0x${f.toString(16)}): ${p}`),p}}}async flashReadStart(){if(!this.device)throw new Error("Device not connected 12");await this.controlTransferIn(198,0,0,1);let e=new Uint8Array([64,85,0,114,86,229,208,116,86,229,146,190,87,117,146,0,118,86,229,131,120,86,229,130,122,86,229,159]);await this.sendRawData(e)}async flashReadEnd(){let e=new Uint8Array([202,87,117,159,214,87,144,196,87,117,146,194,87,117,208,144,86,116]);await this.sendRawData(e)}createReadProc(e){let t=new Uint8Array([94,85,228]),n=new Uint8Array([78,85,147]),r=new Uint8Array([94,85,163]),s=[];for(let a=0;a<e;a++)s.push(...t),((a+1)%64===0||a===e-1)&&(n[0]|=1),s.push(...n),n[0]&=-2,s.push(...r);return new Uint8Array(s)}async flashReadNear(e,t){let r=[],s=new Uint8Array([190,87,144,e>>8&255,e&255]);await this.sendRawData(s);for(let o=0;o<Math.floor(t/128);o++){let c=this.createReadProc(128);await this.sendRawData(c);let l=await this.readBulkData(128);for(let A=0;A<128;A++)r.push(l.getUint8(A))}let a=t%128;if(a>0){let o=this.createReadProc(a);await this.sendRawData(o);let c=await this.readBulkData(a);for(let l=0;l<a;l++)r.push(c.getUint8(l))}return new Uint8Array(r)}async flashRead(e,t){let a=[],o=255;for(;t>0;){let c=e%32768,l=Math.min(t,32768),A=Math.floor(e/32768),h=Math.floor((e+l)/32768);A!==h&&(l=32768-e%32768),o!==A&&(o=A,await this.writeXData(28831,new Uint8Array([o]),!0));let d=await this.flashReadNear(c+32768,l);a.push(...d),t-=l,e+=l}return new Uint8Array(a)}calculateCRC16(e){let t=65535;for(let n=0;n<e.length;n++){t^=e[n]<<8;for(let r=0;r<8;r++)t&32768?t=t<<1^32773:t=t<<1}return t&65535}async calcBlockCRC(){await this.writeXData(E.XREG_RNDL,new Uint8Array([255]),!0),await this.writeXData(E.XREG_RNDL,new Uint8Array([255]),!0),await this.writeXData(E.XREG_DMAARM,new Uint8Array([1]),!0),await this.writeXData(E.XREG_DMAREQ,new Uint8Array([1]),!0);let e=0;for(;!(e&1);)e=(await this.readXData(E.XREG_DMAIRQ,1))[0];let t=await this.readXData(E.XREG_RNDL,2);return t[0]|t[1]<<8}async verifyByCRC(e){let t=new Uint8Array([E.XBANK_OFFSET>>8&255,E.XBANK_OFFSET&255,E.XREG_RNDH>>8&255,E.XREG_RNDH&255,E.VERIFY_BLOCK_SIZE>>8&255,E.VERIFY_BLOCK_SIZE&255,32,66]);await this.writeXData(E.XREG_DMAARM,new Uint8Array([0]),!0),await this.writeXData(E.XREG_DMA0CFGL,new Uint8Array([E.ADDR_DMA_DESC&255]),!0),await this.writeXData(E.XREG_DMA0CFGH,new Uint8Array([E.ADDR_DMA_DESC>>8&255]),!0);let n=255,r=0;for(let o of e)r+=o.data.length;let s=0,a=0;this.progressCallback(0,"Verifying...");for(let o of e){let c=o.address,l=o.data.length;for(;l>0;){let A=Math.min(l,E.VERIFY_BLOCK_SIZE),h=Math.floor(c/E.FLASH_BANK_SIZE),d=Math.floor((c+A)/E.FLASH_BANK_SIZE),f=A;h!==d&&(f=E.FLASH_BANK_SIZE-c%E.FLASH_BANK_SIZE),n!==h&&(n=h,await this.writeXData(E.XREG_MEMCTR,new Uint8Array([n]),!0));let g=c%E.FLASH_BANK_SIZE,w=new Uint8Array(t);w[0]=g+E.XBANK_OFFSET>>8&255,w[1]=g+E.XBANK_OFFSET&255,w[4]=f>>8&255,w[5]=f&255,await this.writeXData(E.ADDR_DMA_DESC,w,!0);let m=o.data.length-l,C=o.data.slice(m,m+f),I=this.calculateCRC16(C),p=await this.calcBlockCRC();if(p!==I)return this.logger(`CRC mismatch at address 0x${c.toString(16)}: expected 0x${I.toString(16).padStart(4,"0")}, got 0x${p.toString(16).padStart(4,"0")}`),this.progressCallback(100,"Verify FAILED"),!1;l-=f,c+=f,s+=f;let B=Math.floor(s/r*100);for(;a<B;)a++,this.progressCallback(a,`Verifying... ${a}%`)}}return this.progressCallback(100,"Verify OK"),!0}async verifyBin(e,t="read"){if(this.logger(`Verifying BIN: ${e.length} bytes using ${t.toUpperCase()} method`),this.initialized||await this.initDebugInterface(),t==="crc"){let o=[{address:0,data:e}];return await this.verifyByCRC(o)}let n=await this.getDeviceInfo(),s=this.getFlashSize(n.chipId)*1024,a=Math.min(e.length,s);e.length>s&&this.logger(`WARNING: Data size (${e.length} bytes) exceeds flash size (${s} bytes). Will verify only first ${s} bytes.`),this.progressCallback(0,"Verifying..."),await this.flashReadStart();try{let c=0;for(let l=0;l<a;l+=4096){let A=Math.min(4096,a-l),h=await this.flashRead(l,A);for(let d=0;d<A;d++){let f=l+d,g=Math.floor(f/a*100);for(;c<g;)c++,this.progressCallback(c,`Verifying... ${c}%`);if(h[d]!==e[f])return this.logger(`Verify FAILED at offset ${f} (0x${f.toString(16)}): expected 0x${e[f].toString(16).padStart(2,"0")}, got 0x${h[d].toString(16).padStart(2,"0")}`),await this.flashReadEnd(),this.progressCallback(100,"Verify FAILED"),!1}}return await this.flashReadEnd(),this.progressCallback(100,"Verify OK"),!0}catch(o){throw await this.flashReadEnd(),this.logger(`Verify error: ${o}`),o}}getFlashSize(e){switch(e){case 9520:case 9521:case 9523:return 128;case 9536:case 9537:return 128;case 9539:case 9540:case 9541:return 32;default:return 128}}async getActualFlashSize(e){let t=e===9539||e===9540||e===9541,r=(await this.readXData(25206,2))[0]>>4&7,s=0;if(t)r===1?s=18:r===7&&(s=32);else switch(r){case 1:s=32;break;case 2:s=64;break;case 3:s=e===9523?96:128;break;case 4:s=256;break}return s===0&&(s=this.getFlashSize(e)),this.logger(`Detected flash size: ${s} KB (flash_size_id=0x${r.toString(16)})`),s}async verifyHex(e,t="read"){let n=Ic(e);if(n.length===0)return!0;if(this.logger(`Verifying HEX: ${n.length} sections using ${t.toUpperCase()} method`),this.initialized||await this.initDebugInterface(),t==="crc")return await this.verifyByCRC(n);this.progressCallback(0,"Verifying..."),await this.flashReadStart();try{let r=0;for(let o of n)r+=o.data.length;let s=0,a=0;for(let o of n){this.logger(`Verifying section: ${o.data.length} bytes at 0x${o.address.toString(16)}`);let c=await this.flashRead(o.address,o.data.length);for(let l=0;l<o.data.length;l++){let A=s+l,h=Math.floor(A/r*100);for(;a<h;)a++,this.progressCallback(a,`Verifying... ${a}%`);if(c[l]!==o.data[l])return this.logger(`Verify FAILED at address 0x${(o.address+l).toString(16)}: expected 0x${o.data[l].toString(16).padStart(2,"0")}, got 0x${c[l].toString(16).padStart(2,"0")}`),await this.flashReadEnd(),this.progressCallback(100,"Verify FAILED"),!1}s+=o.data.length}return await this.flashReadEnd(),this.progressCallback(100,"Verify OK"),!0}catch(r){throw await this.flashReadEnd(),this.logger(`Verify error: ${r}`),r}}async writeBin(e,t="fast"){if(this.logger(`Writing BIN data: ${e.length} bytes using ${t} method`),this.initialized||await this.initDebugInterface(),t==="fast"){this.logger("Using FAST flash write");let r=1024,s=Math.ceil(e.length/r)*r,a=e;e.length<s&&(a=new Uint8Array(s),a.fill(255),a.set(e)),this.logger(`Writing full image: ${a.length} bytes starting at 0x0000`),await this.writeFlashBlockFast(a,0)}else this.logger("Using SLOW flash write"),await this.writeFlashBlockSlow(e,0);this.progressCallback(100,"Write complete")}async writeHex(e,t="fast"){let n=Ic(e);if(n.length===0)return;if(this.logger(`Parsed ${n.length} sections from HEX file using ${t} method`),this.initialized||await this.initDebugInterface(),t==="fast"){this.logger("Using FAST flash write");let s=0;for(let A of n){let h=A.address+A.data.length;h>s&&(s=h)}let a=new Uint8Array(s);a.fill(255);for(let A of n)a.set(A.data,A.address);let o=1024,c=Math.ceil(a.length/o)*o,l=a;a.length<c&&(l=new Uint8Array(c),l.fill(255),l.set(a)),this.logger(`Writing full image: ${l.length} bytes starting at 0x0000`),await this.writeFlashBlockFast(l,0)}else{this.logger("Using SLOW flash write");let s=0;for(let o of n){let c=o.address+o.data.length;c>s&&(s=c)}let a=new Uint8Array(s);a.fill(255);for(let o of n)a.set(o.data,o.address);this.logger(`Writing full image (slow): ${a.length} bytes starting at 0x0000`),await this.writeFlashBlockSlow(a,0,0,100)}this.progressCallback(100,"Write complete")}async readFlash(e){this.initialized||await this.initDebugInterface();let t=await this.getDeviceInfo(),n;e?n=e:n=await this.getActualFlashSize(t.chipId)*1024,this.logger(`Reading ${n} bytes from flash...`),this.progressCallback(0,"Reading..."),await this.flashReadStart();try{let s=[],a=0;for(let o=0;o<n;o+=4096){let c=Math.min(4096,n-o),l=await this.flashRead(o,c);s.push(...l);let A=Math.floor((o+c)/n*100);for(;a<A;)a++,this.progressCallback(a,`Reading... ${a}%`)}return await this.flashReadEnd(),this.progressCallback(100,"Read complete"),this.logger(`Read ${s.length} bytes from flash`),new Uint8Array(s)}catch(r){throw await this.flashReadEnd(),this.logger(`Read error: ${r}`),r}}async dumpFlash(){if(!this.device)throw new Error("Device not connected");this.initialized||await this.initDebugInterface(),this.logger("Reading flash memory...");let e=await this.readFlash(),t=or(e,0);this.logger(`Flash read complete: ${e.length} bytes`),this.progressCallback(100,"Done");let n=Se(t,"text/plain","hex","dump",ce?.value,Ae?.value);this.logger(`Flash saved to ${n}`),await this.reset(!1)}async refreshInfo(){try{let e=await this.getDeviceInfo(),t=await this.readIEEEAddress();pt&&(pt.textContent=`v${(e.fwVersion>>8).toString(16)}.${(e.fwVersion&255).toString(16).toUpperCase()}`),ce&&(ce.textContent=`CC${e.chipId.toString(16).toUpperCase()}`),Ae&&(Ae.textContent=t)}catch(e){this.logger(`Failed to read info: ${e.message}`)}}async flashAction(){let e=pe.files?.[0];if(!me.checked&&!te.checked&&!W.checked){this.logger("Please select at least one operation");return}if((te.checked||W.checked)&&!e){this.logger("Please select a firmware file for write/verify operations");return}try{if(me.checked&&(this.logger("Erasing chip..."),await this.chipErase(),this.logger("Chip erase complete!")),te.checked&&e){this.logger(`Writing firmware: ${e.name}`);let t=new FileReader,n=Pt?.value;if(e.name.toLowerCase().endsWith(".bin")){let r=await new Promise((s,a)=>{t.onload=o=>s(o.target?.result),t.onerror=a,t.readAsArrayBuffer(e)});await this.writeBin(new Uint8Array(r),n)}else{let r=await new Promise((s,a)=>{t.onload=o=>s(o.target?.result),t.onerror=a,t.readAsText(e)});await this.writeHex(r,n)}this.logger("Write complete!"),W.checked||await this.reset(!1)}if(W.checked&&e){this.logger(`Verifying firmware: ${e.name}`);let t=new FileReader,n=!1,r=Ut?.value;if(e.name.toLowerCase().endsWith(".bin")){let s=await new Promise((a,o)=>{t.onload=c=>a(c.target?.result),t.onerror=o,t.readAsArrayBuffer(e)});n=await this.verifyBin(new Uint8Array(s),r)}else{let s=await new Promise((a,o)=>{t.onload=c=>a(c.target?.result),t.onerror=o,t.readAsText(e)});n=await this.verifyHex(s,r)}n?this.logger("Verify successful - firmware matches!"):this.logger("Verify FAILED - firmware does not match!"),await this.reset(!1)}this.logger("All operations complete!")}catch(t){this.logger(`Operation failed: ${t.message}`)}}};E.VID_CC=1105,E.PID_CC=5794,E.VID_RF=4512,E.PID_RF=60192,E.REQ_GET_STATE=192,E.REQ_SET_SPEED=207,E.REQ_PREPARE_DEBUG_MODE=197,E.REQ_SET_CHIP_INFO=200,E.REQ_RESET=201,E.CMD_EXEC_3BYTE=190,E.CMD_EXEC_2BYTE=142,E.CMD_EXEC_2BYTE_READ=143,E.CMD_EXEC_1BYTE=94,E.CMD_EXEC_1BYTE_READ=78,E.ASM_MOV_DPTR_IMM16=144,E.ASM_MOV_A_IMM8=116,E.ASM_MOVX_A_AT_DPTR=224,E.ASM_MOVX_AT_DPTR_A=240,E.ASM_INC_DPTR=163,E.ASM_MOV_DIRECT_IMM=117,E.ASM_MOV_A_DIRECT=229,E.XREG_FWDATA=25203,E.XREG_FCTL=25200,E.XREG_FADDRL=25201,E.XREG_FADDRH=25202,E.XREG_DMA0CFGH=28885,E.XREG_DMA0CFGL=28884,E.XREG_DMAARM=28886,E.XREG_DMAREQ=28887,E.XREG_DMAIRQ=28881,E.XREG_RNDL=28860,E.XREG_RNDH=28861,E.XREG_MEMCTR=28871,E.ADDR_DMA_DESC=3840,E.ADDR_BUFFER=0,E.VERIFY_BLOCK_SIZE=1024,E.XBANK_OFFSET=32768,E.FLASH_BANK_SIZE=32768,E.DEBUG_CMD_CHIP_ERASE=20,E.DEBUG_CMD_WR_CONFIG=29,E.DEBUG_CMD_READ_STATUS=52,E.DEBUG_CMD_DEBUG_INSTR_1=85,E.DEBUG_CMD_DEBUG_INSTR_2=86,E.DEBUG_CMD_DEBUG_INSTR_3=87,E.WRAPPER_DEBUG_EXEC=28,E.WRAPPER_DEBUG_EXEC_READ=31,E.WRAPPER_DEBUG_EXEC_ARG=76,E.CMD_FOOTER=new Uint8Array([212,87,144,194,87,117,146,144,86,116]),E.ADDR_INFO_PAGE=30720,E.ADDR_IEEE_PRIMARY=30732,E.CMD_HEADER=new Uint8Array([64,85,0,114,86,229,146,190,87,117,146,0,116,86,229,131,118,86,229,130]);Hr=E});var df,gf,uf,Ef,wf,_a,pf,mf,Or,_c=D(()=>{"use strict";Rt();_n();Vt();ze();df=1,gf=2,uf=3,Ef=4,wf=5,_a=17,pf=18,mf=19,Or=class{constructor(e){this.buffer=new Uint8Array(0);this.state="idle";this.firmware=null;this.blockTotal=0;this.blockNum=0;this.flashResolve=null;this.flashReject=null;this.verifyMode=!1;this.dumpData=[];this.dumpResolve=null;this.dumpReject=null;this.chipIdResolve=null;this.chipIdReject=null;this.chipIdTimeout=null;this.timeoutTimer=null;this.boundDataHandler=e=>this.dataReceived(e);this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=()=>{};this.link=e,this.ensureListener()}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}async setLines(e,t){if(!this.setLinesHandler)throw new Error("setLinesHandler not set");this.setLinesHandler(e,t)}ensureListener(){this.link.offData&&this.link.offData(this.boundDataHandler),this.link.onData(this.boundDataHandler)}dataReceived(e){let t=new Uint8Array(this.buffer.length+e.length);t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t,this.processBuffer()}processBuffer(){if(this.buffer.length!==0)for(;this.buffer.length>0;){let e=this.buffer[0],t=!1;switch(e){case _a:if(t=this.handleChipId(),!t)return;break;case uf:this.handleResponse();break;case mf:if(t=this.handleFlashBlock(),!t)return;break;case wf:this.handleError();break;default:this.buffer=this.buffer.slice(1);break}}}handleChipId(){return this.buffer.length>=11?(this.chipIdTimeout&&(clearTimeout(this.chipIdTimeout),this.chipIdTimeout=null),this.processChipId(!0),!0):(this.buffer.length>=3&&(this.chipIdTimeout||(this.chipIdTimeout=setTimeout(()=>{this.chipIdTimeout=null,this.buffer.length>=3&&this.buffer[0]===_a&&(this.processChipId(!1),this.processBuffer())},100))),!1)}processChipId(e){let t=this.buffer[1],n=this.buffer[2],r;this.buffer.length>=11?(r=this.buffer.slice(3,11),this.buffer=this.buffer.slice(11)):this.buffer=this.buffer.slice(3);let s=this.parseChipId(t,n,r);this.chipIdResolve&&(this.chipIdResolve(s),this.chipIdResolve=null,this.chipIdReject=null),this.state==="waiting_for_chip_id"&&(this.state="completed")}parseChipId(e,t,n){let s={165:"CC2530",181:"CC2531",149:"CC2533",141:"CC2540",65:"CC2541",145:"CC2543",67:"CC2543",68:"CC2544",69:"CC2545"}[e]||"Unknown",a;if(n&&n.length===8){let o=[];for(let c=7;c>=0;c--)o.push(n[c].toString(16).padStart(2,"0").toUpperCase());a=o.join(":")}return{manufacturer:"Texas Instruments",chipId:e,chipName:s,revision:t,ieee:a}}handleResponse(){this.buffer=this.buffer.slice(1),this.resetTimeout(),this.state==="flashing"&&(this.blockNum>=this.blockTotal?(this.sendEndCommand(),this.state="completed",this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.flashResolve&&(this.flashResolve(),this.flashResolve=null,this.flashReject=null)):this.sendNextBlock())}handleFlashBlock(){if(this.buffer.length<515)return!1;let e=this.buffer.slice(1,513),t=this.buffer[513]<<8|this.buffer[514];if(this.buffer=this.buffer.slice(515),this.resetTimeout(),this.state==="completed"||this.blockNum>=this.blockTotal)return console.warn("Received extra flash block after completion, ignoring."),!0;let n=0;for(let r=0;r<e.length;r++)n+=e[r];if(n&=65535,n!==t&&console.warn(`Block ${this.blockNum+1}: checksum mismatch (calc: ${n.toString(16)}, recv: ${t.toString(16)})`),this.dumpData.push(e),this.blockNum++,this.progressCallback&&this.progressCallback(Math.round(this.blockNum/this.blockTotal*100),`Reading ${this.blockNum} / ${this.blockTotal}`),this.blockNum>=this.blockTotal){let r=new Uint8Array(this.blockTotal*512);for(let s=0;s<this.dumpData.length;s++)r.set(this.dumpData[s],s*512);this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.dumpResolve&&(console.warn("Resolving dump promise"),this.dumpResolve(r),this.dumpResolve=null,this.dumpReject=null),this.state="completed"}return!0}handleError(e){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.timeoutTimer=null,this.buffer.length>0&&(this.buffer=this.buffer.slice(1));let t=e?e.message:this.state==="flashing"?"Verify failed or flash error":"No chip detected or communication error";this.flashReject?(this.flashReject(new Error(t)),this.flashResolve=null,this.flashReject=null):this.dumpReject?(this.dumpReject(new Error(t)),this.dumpResolve=null,this.dumpReject=null):this.chipIdReject&&(this.chipIdReject(new Error(t)),this.chipIdResolve=null,this.chipIdReject=null),this.state="error"}resetTimeout(e=3e4){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(()=>{this.handleError(new Error("Timeout waiting for device response"))},e)}async sendEndCommand(){let e=new Uint8Array([Ef]);await this.link.write(e)}async sendNextBlock(){if(!this.firmware)return;let e=this.blockNum*512,t=this.firmware.slice(e,e+512),n=new Uint8Array(512);n.fill(255),n.set(t);let r=0;for(let a=0;a<512;a++)r+=n[a];let s=new Uint8Array(515);s[0]=gf,s.set(n,1),s[513]=r>>8&255,s[514]=r&255,await this.link.write(s),this.blockNum++,this.progressCallback&&this.progressCallback(Math.round(this.blockNum/this.blockTotal*100),`Writing ${this.blockNum} / ${this.blockTotal}`)}async getChipInfo(){this.ensureListener(),this.state="waiting_for_chip_id";let e=await new Promise(async(t,n)=>{this.chipIdResolve=t,this.chipIdReject=n,this.buffer=new Uint8Array(0);let r=new Uint8Array([_a,0,0,0,0]);await this.link.write(r),setTimeout(()=>{this.chipIdReject&&(this.chipIdReject(new Error("Timeout waiting for chip ID response")),this.chipIdResolve=null,this.chipIdReject=null)},1e4)});e&&this.updateChipInfoUI(e)}async flash(e,t=!1){return this.ensureListener(),this.state="flashing",this.firmware=e,this.blockTotal=Math.ceil(e.length/512),this.blockNum=0,this.verifyMode=t,new Promise(async(n,r)=>{this.flashResolve=n,this.flashReject=r,await this.resetCCLoader(0),this.buffer=new Uint8Array(0);let s=new Uint8Array([df,t?1:0,0,0,0]);await this.link.write(s),this.resetTimeout()})}async readFlash(e=0,t=512){return this.ensureListener(),this.state="reading",this.dumpData=[],this.blockTotal=t,this.blockNum=0,new Promise(async(n,r)=>{this.dumpResolve=n,this.dumpReject=r,await this.resetCCLoader(0),this.buffer=new Uint8Array(0),await x(100);let s=new Uint8Array([pf,t>>8&255,t&255,e>>8&255,e&255]);await this.link.write(s),this.resetTimeout()})}async flashAction(){try{let e=pe?.files?.[0];if(!e)throw new Error("Please select a firmware file (.bin or .hex)");if(te.checked===!1){this.logger("Write option not selected, skipping flash.");return}this.logger(`Reading firmware file: ${e.name}`);let t;if(e.name.toLowerCase().endsWith(".hex")){let n=await e.text(),{startAddress:r,data:s}=ar(n,255),a=r+s.length;t=new Uint8Array(a),t.fill(255),t.set(s,r),this.logger(`Parsed HEX: ${s.length} bytes at 0x${r.toString(16)}, total image size: ${t.length}`)}else{let n=await e.arrayBuffer();t=new Uint8Array(n)}this.logger(`Firmware size: ${t.length} bytes (${Math.ceil(t.length/512)} blocks)`),await this.flash(t,W.checked),this.logger("Flashing complete!")}catch(e){throw this.logger("CC Loader flash error: "+(e?.message||String(e))),e}}async dumpFlash(){try{this.logger("Reading flash memory..."),this.progressCallback(0,"Reading flash...");let e=await this.readFlash(0,512);this.logger(`Flash read complete: ${e.length} bytes`),this.progressCallback(100,"Done");let t=Se(e,"application/octet-stream","bin","dump",ce?.value,Ae?.value);this.logger(`Flash dump saved to ${t}`)}catch(e){throw this.logger("Flash read error: "+(e?.message||String(e))),e}}dispose(){this.link.offData&&this.link.offData(this.boundDataHandler),this.chipIdTimeout&&(clearTimeout(this.chipIdTimeout),this.chipIdTimeout=null),this.buffer=new Uint8Array(0),this.state="idle",this.flashResolve=null,this.flashReject=null,this.dumpResolve=null,this.dumpReject=null,this.chipIdResolve=null,this.chipIdReject=null}async resetCCLoader(e=0){this.logger(`CC Loader reset: device type ${e}`),e===0?(this.logger("Setting DTR=off, RTS=off for UNO-like device"),await this.setLines(!1,!1)):(this.logger("Setting DTR=on, RTS=off for Leonardo-like device"),await this.setLines(!0,!1)),await x(3e3)}updateChipInfoUI(e){ce&&(ce.value=e.chipName),Ae&&e.ieee&&(Ae.value=e.ieee),Je&&(Je.value="CC Loader"),Ve&&(Ve.value="Arduino"),this.logger(`CC Loader connected: ${e.chipName} (ID: 0x${e.chipId.toString(16)}, Rev: 0x${e.revision.toString(16)})`),e.ieee&&this.logger(`IEEE Address: ${e.ieee}`)}}});var xf,Cf,Bf,If,Sf,_f,bf,yf,Rf,Df,Mf,Tf,kf,Ff,vf,Gr,bc=D(()=>{"use strict";Rt();Vt();_n();ze();xf=48,Cf=65,Bf=80,If=81,Sf=85,_f=100,bf=116,yf=117,Rf=86,Df=16,Mf=20,Tf=32,kf=129,Ff=130,vf={"1e950f":{name:"ATmega328P",flashSize:32768},"1e9801":{name:"ATmega2560",flashSize:262144},"1e9587":{name:"ATmega32U4",flashSize:32768},"1e9514":{name:"ATmega328",flashSize:32768},"1e9406":{name:"ATmega168",flashSize:16384},"1e9307":{name:"ATmega88",flashSize:8192}},Gr=class{constructor(e){this.buffer=new Uint8Array(0);this.responseQueue=[];this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=null;this.boundDataHandler=e=>this.dataReceived(e);this.link=e,this.ensureListener()}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}async reset(){if(!this.setLinesHandler)throw new Error("setLinesHandler not set");this.logger("Resetting Arduino..."),this.setLinesHandler(!1,!0),await x(250),this.setLinesHandler(!0,!0),await x(50)}ensureListener(){this.link.offData&&this.link.offData(this.boundDataHandler),this.link.onData(this.boundDataHandler)}dataReceived(e){let t=new Uint8Array(this.buffer.length+e.length);t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t,this.processBuffer()}processBuffer(){for(;this.responseQueue.length>0&&this.buffer.length>0;){let e=this.responseQueue[0],t=this.buffer.indexOf(Mf);if(t===-1){this.buffer.length>200&&(this.buffer=new Uint8Array(0),this.responseQueue.shift(),e.resolve(null));return}t>0&&(this.buffer=this.buffer.slice(t));let n=1+e.expectedSize+1;if(this.buffer.length<n)return;let r=1+e.expectedSize;if(this.buffer[r]!==Df){this.buffer=new Uint8Array(0),this.responseQueue.shift(),e.resolve(null);return}let s=this.buffer.slice(1,r);this.buffer=this.buffer.slice(r+1),this.responseQueue.shift(),e.resolve(s)}}async sendCommand(e,t=[],n=400,r=0){let s=new Uint8Array([e,...t,Tf]);return await this.link.write(s),new Promise(a=>{let o={resolve:a,expectedSize:r};this.responseQueue.push(o),setTimeout(()=>{let c=this.responseQueue.indexOf(o);c!==-1&&(this.responseQueue.splice(c,1),a(null))},n)})}async sync(e=3){for(let t=0;t<e;t++){this.buffer=new Uint8Array(0),this.responseQueue=[];let n=await this.sendCommand(xf,[],400,0);if(n!==null&&n.length===0)return this.logger("Sync successful"),!0;t<e-1&&await x(100)}return this.logger("Sync failed after "+e+" attempts"),!1}async getParameter(e){let t=await this.sendCommand(Cf,[e],400,1);return t!==null&&t.length===1?t[0]:null}async readSignature(){let e=await this.sendCommand(yf,[],400,3);return e!==null&&e.length===3?Array.from(e):null}async universalCommand(e,t,n,r){let s=await this.sendCommand(Rf,[e,t,n,r],400,1);return s!==null&&s.length===1?s[0]:null}async readFuseBits(){try{let e=await this.universalCommand(80,0,0,0),t=await this.universalCommand(88,8,0,0),n=await this.universalCommand(80,8,0,0);if(e!==null&&t!==null&&n!==null)return{low:e,high:t,extended:n}}catch{this.logger("Note: Could not read fuse bits (not supported by this bootloader)")}return null}async getDeviceIdentifier(e){let t=await this.readFuseBits();return t?[e[0],e[1],e[2],t.low,t.high,t.extended].map(r=>r.toString(16).padStart(2,"0").toUpperCase()).join(""):e.map(n=>n.toString(16).padStart(2,"0").toUpperCase()).join("")}async getBoardInfo(){try{if(this.reset(),await x(100),!await this.sync())throw new Error("Failed to sync with bootloader");let e=await this.readSignature();if(!e)throw new Error("Failed to read device signature");let t=await this.getParameter(kf),n=await this.getParameter(Ff),r=e.map(h=>h.toString(16).padStart(2,"0")).join(""),s=vf[r],a=s?.name||"Unknown AVR",o=s?.flashSize,c="Atmel/Microchip",l=await this.getDeviceIdentifier(e),A={signature:e,chipName:a,manufacturer:c,flashSize:o,serialNumber:l,swMajor:t??void 0,swMinor:n??void 0};return this.logger(`Board detected: ${a} (Signature: ${e.map(h=>"0x"+h.toString(16).padStart(2,"0")).join(" ")})`),o&&this.logger(`Flash size: ${o} bytes (${(o/1024).toFixed(0)}KB)`),l&&this.logger(`Device ID: ${l}`),t!==null&&n!==null&&this.logger(`Bootloader version: ${t}.${n}`),A}catch(e){return this.logger("Board info error: "+(e?.message||String(e))),null}}async enterProgrammingMode(){let e=await this.sendCommand(Bf,[],400,0);return e!==null&&e.length===0?(this.logger("Entered programming mode"),!0):(this.logger("Failed to enter programming mode"),!1)}async leaveProgrammingMode(){let e=await this.sendCommand(If,[],400,0);return e!==null&&e.length===0?(this.logger("Left programming mode"),!0):(this.logger("Failed to leave programming mode"),!1)}async loadAddress(e){let t=e>>1,n=t&255,r=t>>8&255,s=await this.sendCommand(Sf,[n,r],400,0);return s!==null&&s.length===0?!0:(this.logger(`Failed to load address 0x${e.toString(16)}`),!1)}async programPage(e,t){if(!await this.loadAddress(e))return!1;let n=t.length>>8&255,r=t.length&255,a=[n,r,70,...Array.from(t)],o=await this.sendCommand(_f,a,2e3,0);return o!==null&&o.length===0?!0:(this.logger(`Failed to program page at address 0x${e.toString(16)}`),!1)}async readPage(e,t){if(!await this.loadAddress(e))return null;let n=t>>8&255,r=t&255,a=await this.sendCommand(bf,[n,r,70],2e3,t);return a!==null&&a.length===t?a:(this.logger(`Failed to read page at address 0x${e.toString(16)}`),null)}async flash(e,t=128,n=!1){try{if(this.setLinesHandler&&await this.reset(),!await this.sync())throw new Error("Failed to sync with bootloader");if(!await this.enterProgrammingMode())throw new Error("Failed to enter programming mode");let r=Math.ceil(e.length/t),s=0;this.logger(`Flashing ${e.length} bytes (${r} pages of ${t} bytes)...`);for(let a=0;a<e.length;a+=t){let o=e.slice(a,a+t),c=new Uint8Array(t);if(c.fill(255),c.set(o),!await this.programPage(a,c))throw new Error(`Failed to program page at 0x${a.toString(16)}`);s++;let l=Math.round(s/r*100);this.progressCallback(l,`Writing ${s}/${r}`)}if(this.progressCallback(100,"Writing complete"),await x(500),this.progressCallback(0,""),n){this.logger(`Verifying ${e.length} bytes...`),s=0;for(let a=0;a<e.length;a+=t){let o=e.slice(a,a+t),c=new Uint8Array(t);c.fill(255),c.set(o);let l=await this.readPage(a,t);if(!l)throw new Error(`Failed to read page at 0x${a.toString(16)}`);for(let h=0;h<t;h++)if(l[h]!==c[h])throw new Error(`Verify failed at address 0x${(a+h).toString(16)}: expected 0x${c[h].toString(16).padStart(2,"0")}, got 0x${l[h].toString(16).padStart(2,"0")}`);s++;let A=Math.round(s/r*100);this.progressCallback(A,`Verifying ${s}/${r}`)}this.logger("Verification successful"),this.progressCallback(100,"Verify complete"),await x(500)}await this.leaveProgrammingMode(),this.logger("Flashing complete!"),this.progressCallback(0,"")}catch(r){throw this.logger("Flash error: "+(r?.message||String(r))),r}}async readFlash(e,t,n=128){try{if(this.setLinesHandler&&await this.reset(),!await this.sync())throw new Error("Failed to sync with bootloader");if(!await this.enterProgrammingMode())throw new Error("Failed to enter programming mode");let r=new Uint8Array(t),s=Math.ceil(t/n),a=0;this.logger(`Reading ${t} bytes from address 0x${e.toString(16)}...`);for(let o=0;o<t;o+=n){let c=e+o,l=Math.min(n,t-o),A=await this.readPage(c,l);if(!A)throw new Error(`Failed to read page at 0x${c.toString(16)}`);r.set(A.slice(0,l),o),a++;let h=Math.round(a/s*100);this.progressCallback(h,`Reading ${a}/${s}`)}return await this.leaveProgrammingMode(),this.logger("Read complete!"),this.progressCallback(100,"Read complete"),await x(500),this.progressCallback(0,""),r}catch(r){throw this.logger("Read error: "+(r?.message||String(r))),r}}async dumpFlash(){this.logger("Reading flash memory...");let n=(Y?.value||"").match(/\((\d+)\s*bytes\)/),r=n?parseInt(n[1],10):0,s=await this.readFlash(0,r,128),a=or(s,0);this.logger(`Flash read complete: ${s.length} bytes`),this.progressCallback(100,"Done");let o=Se(a,"text/plain","hex","dump",F?.value,_e?.value);this.logger(`Flash saved to ${o}`),await this.reset()}dispose(){this.link.offData&&this.link.offData(this.boundDataHandler),this.buffer=new Uint8Array(0),this.responseQueue=[]}}});function ka(i){let e=65535;for(let t=0;t<i.length;t++)e=e>>8^Hf[(e^i[t])&255];return new Uint8Array([e&255,e>>8&255])}function Ma(i){let e=new Uint8Array(i.length+2);e.set(i);let t=ka(i);return e.set(t,i.length),e}function Ta(i){if(i.length<2)return!1;let e=i.slice(0,i.length-2),t=i.slice(i.length-2),n=ka(e);return t[0]===n[0]&&t[1]===n[1]}function Fa(i){let e=[],t=[232,239,239,239,239];for(let n=0;n<i.length;n++){let r=i[n];r&128&&(t[0]&=15),r&64&&(t[1]&=232),r&32&&(t[1]&=15),r&16&&(t[2]&=232),r&8&&(t[2]&=15),r&4&&(t[3]&=232),r&2&&(t[3]&=15),r&1&&(t[4]&=232),e.push(...t),t=[239,239,239,239,239]}return new Uint8Array(e)}function Of(i,e){let t;if(e===8250)t=new Uint8Array([90,i>>16&255,i>>8&255,i&255,128]);else if(e===8260)t=new Uint8Array([90,i>>8&255,i&255,128]);else throw new Error(`Unknown model: ${e}`);let n=Fa(t),r=Gi(),s=new Uint8Array(n.length+r.length);return s.set(n),s.set(r,n.length),s}function Gi(){return Fa(new Uint8Array([255]))}function Nr(i,e,t){let n;if(t===8250)n=new Uint8Array([90,i>>16&255,i>>8&255,i&255,0]);else if(t===8260)n=new Uint8Array([90,i>>8&255,i&255,0]);else throw new Error(`Unknown model: ${t}`);let r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);let s=Fa(r),a=Gi(),o=new Uint8Array(s.length+a.length);return o.set(s),o.set(a,s.length),o}function vc(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}var ba,yc,Uf,Pf,Lf,Qf,li,Hf,Yr,Oi,Rc,Gf,Nf,Yf,Dc,ya,Ra,Kf,Mc,Wf,zf,Tc,kc,Jf,Vf,jf,Zf,Xf,$f,Me,qf,ed,Da,Fc,td,Kr,Uc=D(()=>{"use strict";Sn();Rt();Vt();ze();hr();ba=0,yc=1,Uf=2,Pf=3,Lf=4,Qf=5,li=4096,Hf=new Uint16Array([0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448]);Yr=class{constructor(e){this.buffer=new Uint8Array(0);this.responseQueue=[];this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=null;this.boundDataHandler=e=>this.dataReceived(e);this.model=8250;this.floaderLoaded=!1;this.link=e,this.ensureListener()}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}setModel(e){if(e!==8250&&e!==8260)throw new Error(`Invalid model: ${e}. Must be 8250 or 8260`);this.model=e}ensureListener(){this.link.offData&&this.link.offData(this.boundDataHandler),this.link.onData(this.boundDataHandler)}dataReceived(e){let t=new Uint8Array(this.buffer.length+e.length);t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t,this.processBuffer()}processBuffer(){for(;this.responseQueue.length>0&&this.buffer.length>=6;){let e=this.responseQueue[0],t=1+e.expectedSize+2;if(this.buffer.length<t)return;if(this.buffer[0]!==e.expectedCmd){let s=!1,a=Math.min(this.buffer.length-t+1,100);for(let o=1;o<a;o++)if(this.buffer[o]===e.expectedCmd&&o+t<=this.buffer.length){let c=this.buffer.slice(o,o+t);if(Ta(c)){this.logger(`Skipped ${o} bytes of noise to find valid response`),this.buffer=this.buffer.slice(o),s=!0;break}}s||this.buffer.length>200&&(this.logger(`Giving up after ${this.buffer.length} bytes of garbage`),this.buffer=new Uint8Array(0),this.responseQueue.shift(),e.resolve(null));return}let n=this.buffer.slice(0,t);if(this.buffer=this.buffer.slice(t),!Ta(n)){this.logger(`CRC check failed for command 0x${e.expectedCmd.toString(16)}`),this.responseQueue.shift(),e.resolve(null);return}let r=n.slice(1,n.length-2);this.responseQueue.shift(),e.resolve(r)}}async sendCommand(e,t,n,r,s=400){let a=new Uint8Array([e,t&255,n&255,n>>8&255]),o;r&&r.length>0?(o=new Uint8Array(a.length+r.length),o.set(a),o.set(r,a.length)):o=a;let c=Ma(o);return await this.link.write(c),new Promise(l=>{let A={resolve:l,expectedCmd:e,expectedSize:3};this.responseQueue.push(A),setTimeout(()=>{let h=this.responseQueue.indexOf(A);h!==-1&&(this.responseQueue.splice(h,1),l(null))},s)})}async drainBuffer(e=100){let t=Date.now();for(this.buffer=new Uint8Array(0);Date.now()-t<e;)await x(10),this.buffer.length>0&&(this.buffer=new Uint8Array(0))}async activateBootloader(e,t=600){if(!this.setLinesHandler)throw new Error("setLinesHandler not set");let n=Nr(1538,new Uint8Array([5]),this.model);if(this.buffer=new Uint8Array(0),this.responseQueue=[],await this.link.write(Gi()),await this.link.write(n),t>0){this.logger(`Activating (${t} ms)...`),this.setLinesHandler(!0,!0),await x(50);for(let h=0;h<5;h++)await this.link.write(n);this.setLinesHandler(!0,!1);for(let h=0;h<5;h++)await this.link.write(n);this.setLinesHandler(!1,!1),await this.link.write(n);let A=Date.now();for(;Date.now()-A<t;)for(let h=0;h<5;h++)await this.link.write(n)}await x(1),this.buffer=new Uint8Array(0),await this.link.write(Gi());let r=Math.min(127,Math.floor(32e6/230400));await this.link.write(Nr(178,new Uint8Array([r]),this.model)),await this.link.write(Of(178,this.model)),await x(10),await this.link.write(new Uint8Array([255])),await x(10),await this.link.write(Gi()),await x(10),this.buffer=new Uint8Array(0);let s;if(this.model===8250)s=262144;else if(this.model===8260)s=32768;else throw new Error(`Unknown model: ${this.model}`);this.logger(`Loading floader (${e.length} bytes) to 0x${s.toString(16)}...`);let a=s,o=0,c=256;for(;o<e.length;){let A=e.slice(o,o+c);await this.link.write(Nr(a,A,this.model)),this.buffer=new Uint8Array(0),a+=A.length,o+=A.length}this.logger(`Floader loaded: ${o} bytes written to 0x${s.toString(16)}-0x${a.toString(16)}`),this.logger("Starting CPU..."),await this.link.write(Nr(1538,new Uint8Array([136]),this.model)),await this.link.write(Gi()),await x(500);let l=this.buffer.length;this.buffer=new Uint8Array(0),this.responseQueue=[],l>0&&this.logger(`Cleared ${l} bytes after CPU start`),await x(500),this.buffer=new Uint8Array(0)}async detectFloader(e=1,t=!1){for(let n=0;n<e;n++){if(n>0){let r=100;t&&(n<5?r=100:n<10?r=150:r=250),await x(r)}await this.drainBuffer(50),this.responseQueue=[];try{let r=n===0?400:1e3,s=await this.sendCommand(ba,0,0,void 0,r);if(s&&s.length>=3){let a=s[1]|s[2]<<8;if(a!==65535&&a!==0)return n>0&&this.logger(`(retry ${n+1} succeeded)`),!0}s?this.logger(`detectFloader: unexpected response length ${s.length}`):this.logger(`detectFloader retry ${n+1}: no response (timeout)`)}catch(r){this.logger(`detectFloader retry ${n+1}: ${r}`)}}return!1}async getChipInfo(){let e=null;try{let t;if(this.model===8250)t="./bins/floader_825x.bin";else if(this.model===8260)t="./bins/floader_826x.bin";else throw new Error("Floader URL not specified for the selected model");e=(await bn(t,255)).data}catch(t){return this.logger(`Failed to load floader: ${t}`),null}try{this.setLinesHandler?.(!1,!1),await x(50),this.buffer=new Uint8Array(0),this.responseQueue=[];let t=await this.detectFloader(2,!1);if(!t&&e&&(await this.activateBootloader(e),t=await this.detectFloader(3,!0)),!t)throw new Error("Failed to communicate with floader");this.floaderLoaded=!0;let n=await this.sendCommand(ba,0,0,void 0,1e3);if(!n||n.length<3)throw new Error("Failed to get version");let r=n[0],s=n[1]|n[2]<<8;if(s===0&&r===0)throw new Error("Check connection to the module");let a="Unknown";s===21858?a="TLSR825X":s===21285?a="TLSR8266":s===21287?a="TLSR8269":s===21286&&(a="TLSR8267");let o=`${r>>4&15}.${r&15}`;this.logger(`ChipID: 0x${s.toString(16).padStart(4,"0")} (${a}), Floader ver: ${o}`);let c=await this.sendCommand(Qf,0,0,void 0,400);if(!c||c.length<3)throw new Error("Failed to get JEDEC ID");let l=c[0]<<16|c[1]<<8|c[2],A=l===16777215||l===0?0:1<<c[2];if(l===16777215)throw new Error("Power off in the module, reset and restart");if(l===0)throw new Error("Check connection to the module");return this.logger(`Flash JEDEC ID: ${l.toString(16).padStart(6,"0")}, Size: ${A>>10} kbytes`),{chipId:s,chipName:a,floaderVersion:o,jedecId:l,flashSize:A}}catch(t){return this.logger(`Chip info error: ${t?.message||String(t)}`),null}}async unlockFlash(){for(let t=0;t<3;t++)if(t>0&&(await this.drainBuffer(50),await x(100),this.logger(`Unlock retry (${t}/2)`)),await this.sendCommand(ba,2,0,void 0,600)!==null)return this.logger("Flash unlocked"),!0;return this.logger("Failed to unlock flash after multiple attempts"),!1}async eraseSectors(e,t){e=e&(16777215^li-1);for(let n=0;n<t;n++){let r=e+n*li,s=3,a=s;for(;a>0&&(a<s&&(await this.drainBuffer(30),await x(100*(s-a))),await this.sendCommand(Pf,r&255,r>>8&65535,void 0,800)===null);)if(a--,a>0)this.logger(`Erase retry at 0x${r.toString(16).padStart(6,"0")} (${s-a}/${s-1})`);else return this.logger(`Error erasing sector at 0x${r.toString(16).padStart(6,"0")} after ${s} attempts`),!1}return!0}async reset(){this.logger("Resetting Telink device..."),this.setLinesHandler?.(!1,!1),await x(100),this.setLinesHandler?.(!1,!0),await x(200),this.setLinesHandler?.(!1,!1),await x(100)}async eraseAllFlash(){if(!this.floaderLoaded)throw new Error("Floader not loaded.");if(this.logger("Erasing all flash..."),await this.sendCommand(Lf,0,0,void 0,2500)!==null)return this.logger("Erased successfully"),!0;throw new Error("Failed to erase all flash")}async writeBlock(e,t){let r=3;for(;r>0;){if(r<3&&(await this.drainBuffer(30),await x(50*(3-r))),await this.sendCommand(Uf,e&255,e>>8&65535,t,600)!==null)return!0;if(r--,r>0)this.logger(`Write retry at 0x${e.toString(16).padStart(6,"0")} (${3-r}/2)`);else return this.logger(`Error writing flash at 0x${e.toString(16).padStart(6,"0")} after 3 attempts`),!1}return!1}async readBlock(e,t){let r=3;for(;r>0;){r<3&&(await this.drainBuffer(30),await x(50*(3-r)));let s=new Uint8Array([yc,e&255,e>>8&255,e>>16&255,t&255,t>>8&255]),a=Ma(s);await this.link.write(a);let o=Math.max(1500,1e3+Math.ceil(t/256)*100),c=await new Promise(l=>{let A={resolve:l,expectedCmd:yc,expectedSize:3+t};this.responseQueue.push(A),setTimeout(()=>{let h=this.responseQueue.indexOf(A);h!==-1&&(this.responseQueue.splice(h,1),l(null))},o)});if(c&&c.length>=3+t)return c.slice(3,3+t);if(r--,r>0)this.logger(`Read retry at 0x${e.toString(16).padStart(6,"0")} (${3-r}/2)`);else return this.logger(`Error reading flash at 0x${e.toString(16).padStart(6,"0")} after 3 attempts`),null}return null}async flash(e,t=0,n=!0,r=!1){if(!this.floaderLoaded)throw new Error("Floader not loaded.");try{let a=t&16777215,o=e.length,c=0,l=4294967295;for(await this.drainBuffer(50),this.logger(`Flashing ${o} bytes starting at 0x${a.toString(16).padStart(6,"0")}...`);c<o;){if(n){let g=a&(16777215^li-1);if(l!==g){if(!await this.eraseSectors(a,1))throw new Error(`Failed to erase sector at 0x${a.toString(16).padStart(6,"0")}`);l=g}}let A=Math.min(1024,o-c),h=e.slice(c,c+A),d=!1;for(let g=0;g<h.length;g++)if(h[g]!==255){d=!0;break}if(d){if(!await this.writeBlock(a,h))throw new Error(`Failed to write block at 0x${a.toString(16).padStart(6,"0")}`);if(r){let g=await this.readBlock(a,A);if(!g||!vc(h,g))throw new Error(`Verification failed at 0x${a.toString(16).padStart(6,"0")}`)}await x(5)}c+=A,a+=A;let f=Math.round(c/o*100);this.progressCallback(f,`Writing ${c}/${o}`)}this.logger("Flashing complete!"),this.progressCallback(100,"Write complete"),await x(500),this.progressCallback(0,"")}catch(s){throw this.logger("Flash error: "+(s?.message||String(s))),setTimeout(async()=>{this.progressCallback(0,"")},500),s}}async readFlash(e,t){if(!this.floaderLoaded)throw new Error("Floader not loaded.");try{let r=new Uint8Array(t),s=e&16777215,a=0;for(await this.drainBuffer(50);a<t;){let o=Math.min(1024,t-a),c=await this.readBlock(s,o);if(!c)throw new Error(`Failed to read block at 0x${s.toString(16).padStart(6,"0")}`);r.set(c,a),a+=o,s+=o;let l=Math.round(a/t*100);this.progressCallback(l,`Reading ${a}/${t}`),await x(5)}return this.logger("Read complete!"),this.progressCallback(100,"Read complete"),await x(500),this.progressCallback(0,""),r}catch(n){throw this.logger("Read error: "+(n?.message||String(n))),setTimeout(async()=>{this.progressCallback(0,"")},500),n}}async dumpFlash(){let t=(Y?.value||"").match(/\((\d+)\s*bytes\)/),n=t?parseInt(t[1],10):0;this.logger(`Dumping ${n} bytes of flash...`);let r=await this.readFlash(0,n);this.logger(`Flash read complete: ${r.length} bytes`);let s=Se(r,"application/octet-stream","bin","dump",F?.value,void 0,String(n/1024)+"KB");this.logger(`Flash saved to ${s}`)}dispose(){this.link.offData&&this.link.offData(this.boundDataHandler),this.buffer=new Uint8Array(0),this.responseQueue=[],this.floaderLoaded=!1}},Oi=0,Rc=1,Gf=2,Nf=3,Yf=4,Dc=5,ya=6,Ra=7,Kf=8,Mc=9,Wf=10,zf=11,Tc=13,kc=14,Jf=16,Vf=0,jf=2,Zf=3,Xf=4,$f=5,Me=0,qf=3,ed=1024,Da=6,Fc=["No error","Function number error!","Data length error!","SWire read timeout!","Timeout flag while reading analog register!","CRC error!","Invalid baud rate number!"],td=[115200,230400,460800,5e5,921600,1e6,15e5,2e6,3e6],Kr=class{constructor(e){this.buffer=new Uint8Array(0);this.responseQueue=[];this.logger=()=>{};this.progressCallback=()=>{};this.setLinesHandler=null;this.boundDataHandler=e=>this.dataReceived(e);this.pgmVersion=[0,0];this.pgmVersionInt=0;this.pgmChipId=0;this.pgmChipName="?";this.pgmPower=1;this.pgmSwDiv=5;this.pgmSwAddrLen=3;this.pgmSwBuf=new Uint8Array([90,0,6,2,0,5]);this.pgmClock=24;this.pgmSwsSpeed=.96;this.extChipId=0;this.extChipVersion=0;this.extChipName="?";this.extJedecId=0;this.extFlashSize=0;this.lastError=0;this.lastWcnt=0;this.connected=!1;this.link=e,this.ensureListener()}setLogger(e){this.logger=e}setProgressCallback(e){this.progressCallback=e}setSetLinesHandler(e){this.setLinesHandler=e}setAddrLen(e){this.pgmSwAddrLen=e}ensureListener(){this.link.offData&&this.link.offData(this.boundDataHandler),this.link.onData(this.boundDataHandler)}dataReceived(e){let t=new Uint8Array(this.buffer.length+e.length);t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t,this.processBuffer()}processBuffer(){for(;this.responseQueue.length>0&&this.buffer.length>=Da;){let e=this.responseQueue[0];if(this.buffer.length<Da)return;if(this.buffer[0]!==e.expectedCmd){let c=!1;for(let l=1;l<Math.min(this.buffer.length-Da+1,100);l++)if(this.buffer[l]===e.expectedCmd){this.logger(`Skipped ${l} bytes of noise`),this.buffer=this.buffer.slice(l),c=!0;break}if(!c&&this.buffer.length>200){this.logger(`Giving up after ${this.buffer.length} bytes of garbage`),this.buffer=new Uint8Array(0),this.responseQueue.shift(),e.resolve(null);return}if(!c)return}let t=this.buffer[0],n=this.buffer[1],r=this.buffer[2]|this.buffer[3]<<8,s=0;t===Ra||t===Rc||t===Mc||t===zf||t===Oi||t===Dc||t===ya?s=r:t===kc?s=0:t===Jf&&(s=r);let a=4+s+2;if(this.buffer.length<a)return;let o=this.buffer.slice(0,a);if(this.buffer=this.buffer.slice(a),!Ta(o)){this.logger(`CRC check failed for command 0x${e.expectedCmd.toString(16)}`),this.responseQueue.shift(),e.resolve(null);return}this.lastError=n,this.lastWcnt=r,this.responseQueue.shift(),e.resolve(o.slice(0,a-2))}}async sendCommand(e,t=500){let n=Ma(e);return await this.link.write(n),new Promise(r=>{let s={resolve:r,expectedCmd:e[0],expectedSize:null};this.responseQueue.push(s),setTimeout(()=>{let a=this.responseQueue.indexOf(s);a!==-1&&(this.responseQueue.splice(a,1),r(null))},t)})}async drainBuffer(e=100){let t=Date.now();for(this.buffer=new Uint8Array(0);Date.now()-t<e;)await x(10),this.buffer.length>0&&(this.buffer=new Uint8Array(0))}async getVersion(){await this.drainBuffer(50);let e=new Uint8Array([Oi,Vf,0,0]),t=await this.sendCommand(e,1e3);if(!t||t.length<17)return this.logger("Error: Failed to get PGM version"),null;if(this.lastError!==Me)return this.logger(`Error[${this.lastError}]: ${Fc[this.lastError]||"Unknown error"}`),null;this.pgmVersion=[t[5],t[4]],this.pgmVersionInt=t[5]<<8|t[4],this.pgmChipId=t[6]|t[7]<<8,this.pgmPower=t[8],this.pgmSwDiv=t[9],this.pgmSwAddrLen=t[10],this.pgmSwBuf=t.slice(11,17),this.pgmChipId===21858?(this.pgmChipName="TLSR825x",this.pgmClock=24):this.pgmChipId===21285?(this.pgmChipName="TLSR8266",this.pgmClock=32):this.pgmChipId===21286?(this.pgmChipName="TLSR8267",this.pgmClock=32):this.pgmChipId===21287?(this.pgmChipName="TLSR8269",this.pgmClock=32):(this.pgmChipName="?",this.pgmClock=32),this.pgmSwsSpeed=this.pgmClock/5/this.pgmSwDiv;let n={version:this.pgmVersion,versionInt:this.pgmVersionInt,chipId:this.pgmChipId,chipName:this.pgmChipName,power:this.pgmPower,swDiv:this.pgmSwDiv,swAddrLen:this.pgmSwAddrLen,swBuf:this.pgmSwBuf,swsClock:this.pgmClock,swsSpeed:this.pgmSwsSpeed};return this.logger(`PGM: ChipID: 0x${this.pgmChipId.toString(16).padStart(4,"0")} (${this.pgmChipName}), ver: ${this.pgmVersion[0]}.${this.pgmVersion[1]}`),this.logger(`swdiv ${this.pgmSwDiv}, addrlen ${this.pgmSwAddrLen}, pwr ${this.pgmPower?"On":"Off"}`),this.logger(`SWire bit rate: ${this.pgmSwsSpeed.toFixed(4)} Mbits/s`),this.pgmVersionInt<4&&this.logger("Warning: This program requires PGM version 0.0.0.4 or higher!"),this.connected=!0,n}async setPgmConfig(e,t,n){let r=e??this.pgmSwDiv,s=t??this.pgmSwAddrLen,a=n??this.pgmSwBuf,o=new Uint8Array(6+a.length);o[0]=Oi,o[1]=jf,o[2]=0,o[3]=0,o[4]=r,o[5]=s,o.set(a,6);let c=await this.sendCommand(o,500);return!c||this.lastError!==Me?(this.logger(`Error[${this.lastError}]: Set PGM Config failed!`),!1):(this.pgmSwDiv=c[4],this.pgmSwAddrLen=c[5],this.pgmSwBuf=c.slice(6,12),this.logger(`PGM: swdiv ${this.pgmSwDiv}, addrlen ${this.pgmSwAddrLen}, swbuf [${We(this.pgmSwBuf)}]`),!0)}async setUartBaud(e){let t=td.indexOf(e);if(t===-1)return this.logger(`Invalid PGM baud rate (${e})!`),!1;this.logger(`Set Speed UART PGM board ${e} bits/s...`);let n=new Uint8Array([Oi,$f,t&255,t>>8&255]);return!await this.sendCommand(n,500)||this.lastError!==Me?(this.logger(`Error[${this.lastError}]: Set UART baud failed!`),!1):(this.logger("ok"),!0)}async setPinRST(e){let t=new Uint8Array([Oi,Zf,e?1:0,0]);return!await this.sendCommand(t,500)||this.lastError!==Me?(this.logger(`Error[${this.lastError}]: Set pin RST/Power failed!`),!1):!0}async activate(e){let t=Math.min(65535,Math.floor(e/((this.pgmSwAddrLen+5.7)*5*this.pgmSwDiv/2400)));this.logger(`Activate ${e} ms...`);let n=new Uint8Array([Oi,Xf,t&255,t>>8&255]),r=e+500,s=await this.sendCommand(n,r);if(!s||s.length<6)return this.logger("Timeout response - Check PGM connected!"),!1;if(this.lastError!==Me)return this.lastError===qf&&this.logger("Error! Check SWM<->SWS connection or Reset/Activation time!"),this.logger(`Error[${this.lastError}]: ${Fc[this.lastError]||"Unknown error"}`),!1;if(this.lastWcnt>=4&&s.length>=8){let a=s[4]|s[5]<<8|s[6]<<16|s[7]<<24;this.logger(`ok. CPU PC=0x${a.toString(16).padStart(8,"0")}`)}return!0}async readChipID(){let e=new Uint8Array([Ra,125,0,0,3,0]),t=await this.sendCommand(e,500);return!t||this.lastWcnt!==3?(this.logger(`Error get Chip ID! (${this.lastError})`),!1):(this.extChipVersion=t[4],this.extChipId=t[5]|t[6]<<8,this.extChipId===21858?this.extChipName="TLSR825x":this.extChipId===21285?this.extChipName="TLSR8266":this.extChipId===21286?this.extChipName="TLSR8267":this.extChipId===21287?this.extChipName="TLSR8269":this.extChipName="?",this.logger(`Chip ${this.extChipName} ID: 0x${this.extChipId.toString(16).padStart(4,"0")}, rev: 0x${this.extChipVersion.toString(16).padStart(2,"0")}`),!0)}async readFlashJEDECID(){let e=new Uint8Array([Dc,0,0,0]),t=await this.sendCommand(e,500);return!t||this.lastWcnt!==3?(this.logger(`Error get Flash JEDEC ID! (${this.lastError})`),!1):(this.extJedecId=t[4]<<16|t[5]<<8|t[6],this.extFlashSize=1<<t[6],this.logger(`Flash JEDEC ID: 0x${this.extJedecId.toString(16).padStart(6,"0")}, Size: ${this.extFlashSize>>10} kbytes`),!0)}async readFlashStatus(){let e=new Uint8Array([ya,0,0,0]),t=await this.sendCommand(e,500);if(!t||this.lastWcnt!==1)return this.logger(`Error get Flash Status! (${this.lastError})`),null;let n=t[4];return this.logger(`Flash Status Register: 0x${n.toString(16).padStart(2,"0")}`),n}async waitFlashReady(e=300){for(let t=0;t<e;t++){let n=new Uint8Array([ya,0,0,0]),r=await this.sendCommand(n,100);if(!r||this.lastWcnt!==1)return this.logger(`Error get Flash Status! (${this.lastError})`),!1;if(!(r[4]&1))return!0}return this.logger("Timeout! Flash not ready"),!1}async writeFlashStatus(e){let t=new Uint8Array([Tc,0,0,0,0,0,6]),n=await this.sendCommand(t,500);return n?(t=new Uint8Array([Tc,0,0,0,0,0,1,e&255]),n=await this.sendCommand(t,500),n?!!await this.waitFlashReady(5):(this.logger(`Error Write Flash Status! (${this.lastError})`),!1)):(this.logger(`Error Write Flash Status! (${this.lastError})`),!1)}async unlockFlash(){if(this.logger("Write 0 to Flash Status Register..."),!await this.writeFlashStatus(0))return!1;let e=await this.readFlashStatus();return e===null||e!==0?(this.logger("Error unlock Flash!"),!1):!0}async readSwire(e,t){for(let r=0;r<3;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array([Ra,e&255,e>>8&255,e>>16&255,t&255,t>>8&255]),a=await this.sendCommand(s,Math.max(500,t));if(a&&this.lastError===Me&&this.lastWcnt===t)return a.slice(4,4+t);r<2&&this.logger(`Read SWire retry at 0x${e.toString(16).padStart(6,"0")} (${r+1}/2)`)}return this.logger(`Error Read SWire data at 0x${e.toString(16).padStart(6,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),null}async writeSwire(e,t){for(let r=0;r<3;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array(4+t.length);if(s[0]=Kf,s[1]=e&255,s[2]=e>>8&255,s[3]=e>>16&255,s.set(t,4),await this.sendCommand(s,500)&&this.lastError===Me&&this.lastWcnt===t.length)return!0;r<2&&this.logger(`Write SWire retry at 0x${e.toString(16).padStart(6,"0")} (${r+1}/2)`)}return this.logger(`Error Write SWire data at 0x${e.toString(16).padStart(6,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),!1}async readBlockFlash(e,t){for(let r=0;r<3;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array([Rc,e&255,e>>8&255,e>>16&255,t&255,t>>8&255]),a=Math.max(1e3,500+Math.ceil(t/256)*100),o=await this.sendCommand(s,a);if(o&&this.lastError===Me&&this.lastWcnt===t)return o.slice(4,4+t);r<2&&this.logger(`Read Flash retry at 0x${e.toString(16).padStart(6,"0")} (${r+1}/2)`)}return this.logger(`Error Read Flash data at 0x${e.toString(16).padStart(6,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),null}async writeBlockFlash(e,t){for(let r=0;r<3;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array(4+t.length);if(s[0]=Gf,s[1]=e&255,s[2]=e>>8&255,s[3]=e>>16&255,s.set(t,4),!await this.sendCommand(s,600)||this.lastError!==Me||this.lastWcnt!==t.length){r<2&&this.logger(`Write Flash retry at 0x${e.toString(16).padStart(6,"0")} (${r+1}/2)`);continue}if(!await this.waitFlashReady()){r<2&&this.logger(`Flash ready timeout, retrying... (${r+1}/2)`);continue}if(this.pgmVersionInt>=3){let o=new Uint8Array([kc,e&255,e>>8&255,e>>16&255,t.length&255,t.length>>8&255]);if(await this.sendCommand(o,500)){let l=ka(t),A=this.lastWcnt&255,h=this.lastWcnt>>8&255;if(A!==l[0]||h!==l[1]){r<2&&this.logger(`Flash CRC16 mismatch, retrying... (${r+1}/2)`);continue}}}return!0}return this.logger(`Error Write Flash data at 0x${e.toString(16).padStart(6,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),!1}async eraseSectorFlash(e){e=e&(16777215^li-1);let t=3;for(let n=0;n<t;n++){n>0&&(await this.drainBuffer(30),await x(100*n));let r=new Uint8Array([Nf,e&255,e>>8&255,e>>16&255]);if(!await this.sendCommand(r,800)||this.lastError!==Me){n<t-1&&this.logger(`Erase sector retry at 0x${e.toString(16).padStart(6,"0")} (${n+1}/${t-1})`);continue}if(!await this.waitFlashReady()){n<t-1&&this.logger(`Flash ready timeout after erase, retrying... (${n+1}/${t-1})`);continue}return!0}return this.logger(`Error Erase sector at 0x${e.toString(16).padStart(6,"0")}! (err=${this.lastError})`),!1}async eraseSectorsFlash(e,t){for(let n=0;n<t;n++){let r=(e&(16777215^li-1))+n*li;if(this.logger(`Erase sector at 0x${r.toString(16).padStart(6,"0")}...`),!await this.eraseSectorFlash(r))return!1}return!0}async eraseAllFlash(){this.logger("Erasing all flash...");let e=3;for(let t=0;t<e;t++){t>0&&(await this.drainBuffer(50),await x(200*t),this.logger(`Erase all flash retry (${t}/${e-1})`));let n=new Uint8Array([Yf,0,0,0]);if(!(!await this.sendCommand(n,3e3)||this.lastError!==Me)&&await this.waitFlashReady(3e3))return this.logger("Erased successfully"),!0}return this.logger(`Error Erase All Flash! (${this.lastError})`),!1}async enableClkALGM(){let e=await this.readSwire(97,4);if(!e)return this.logger("Error Read SWire data!"),!1;let t=this.pgmSwAddrLen===3?8:2;if(e[0]&t||!(e[3]&t)){let n=new Uint8Array(e);if(n[0]&=~t,n[3]|=t,!await this.writeSwire(97,n))return this.logger("Error Activate ALGM!"),!1}return!0}async readAnalogRegs(e,t){if(!await this.enableClkALGM())return null;let n=3;for(let r=0;r<n;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array([Mc,e&255,e>>8&255,e>>16&255,t&255,t>>8&255]),a=await this.sendCommand(s,Math.max(500,t*2));if(a&&this.lastError===Me&&this.lastWcnt===t)return a.slice(4,4+t);r<n-1&&this.logger(`Read Analog retry at 0x${e.toString(16).padStart(2,"0")} (${r+1}/${n-1})`)}return this.logger(`Error Read Analog data at 0x${e.toString(16).padStart(2,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),null}async writeAnalogRegs(e,t){if(!await this.enableClkALGM())return!1;let n=3;for(let r=0;r<n;r++){r>0&&(await this.drainBuffer(30),await x(50*r));let s=new Uint8Array(4+t.length);if(s[0]=Wf,s[1]=e&255,s[2]=e>>8&255,s[3]=e>>16&255,s.set(t,4),await this.sendCommand(s,500)&&this.lastError===Me&&this.lastWcnt===t.length)return!0;r<n-1&&this.logger(`Write Analog retry at 0x${e.toString(16).padStart(2,"0")} (${r+1}/${n-1})`)}return this.logger(`Error Write Analog data at 0x${e.toString(16).padStart(2,"0")}! (err=${this.lastError}, wcnt=${this.lastWcnt})`),!1}async stopCPU(){return this.logger("CPU Stop..."),await this.writeSwire(1538,new Uint8Array([5]))?(this.logger("ok"),!0):!1}async stallCPU(){return this.logger("CPU Stall..."),await this.writeSwire(1538,new Uint8Array([6]))?(this.logger("ok"),!0):!1}async runCPU(){return this.logger("CPU Run..."),await this.writeSwire(1538,new Uint8Array([136]))?(this.logger("ok"),!0):!1}async goCPU(){return this.logger("CPU Go..."),await this.writeSwire(1538,new Uint8Array([8]))?(this.logger("ok"),!0):!1}async mcuReboot(){return this.logger("MCU Reboot..."),await this.writeSwire(111,new Uint8Array([32]))?(this.logger("ok"),!0):!1}async readCPUPC(){let e=await this.readSwire(1724,4);if(!e)return null;let t=e[0]|e[1]<<8|e[2]<<16|e[3]<<24;return this.logger(`CPU PC=0x${t.toString(16).padStart(8,"0")}`),t}async getChipInfo(){try{return!await this.getVersion()||(this.logger("Hard reset Ext.MCU 50 ms..."),!await this.setPinRST(!1))||(await x(50),this.logger("ok"),!await this.activate(100))||!await this.stopCPU()||!await this.readChipID()||!await this.readFlashJEDECID()?null:{chipId:this.extChipId,chipName:this.extChipName,chipVersion:this.extChipVersion,jedecId:this.extJedecId,flashSize:this.extFlashSize}}catch(e){return this.logger(`Chip info error: ${e?.message||String(e)}`),null}}async flash(e,t=0,n=!0,r=!1){if(!this.connected)throw new Error("PGM board not connected");try{let a=t&16777215,o=e.length,c=0,l=4294967295;if(!await this.unlockFlash())throw new Error("Failed to unlock flash");if(!await this.stopCPU())throw new Error("Failed to stop CPU");for(this.logger(`Flashing ${o} bytes starting at 0x${a.toString(16).padStart(6,"0")}...`);c<o;){if(n){let g=a&(16777215^li-1);if(l!==g){if(!await this.eraseSectorFlash(a))throw new Error(`Failed to erase sector at 0x${a.toString(16).padStart(6,"0")}`);l=g}}let A=Math.min(256,o-c),h=e.slice(c,c+A),d=!1;for(let g=0;g<h.length;g++)if(h[g]!==255){d=!0;break}if(d&&!await this.writeBlockFlash(a,h))throw new Error(`Failed to write block at 0x${a.toString(16).padStart(6,"0")}`);if(r){let g=await this.readBlockFlash(a,A);if(!g||!vc(h,g))throw new Error(`Verification failed at 0x${a.toString(16).padStart(6,"0")}`)}await x(5),c+=A,a+=A;let f=Math.round(c/o*100);this.progressCallback(f,`Writing ${c}/${o}`)}this.logger("Flashing complete!"),this.progressCallback(100,"Write complete"),await x(500),this.progressCallback(0,""),await this.runCPU()}catch(s){throw this.logger("Flash error: "+(s?.message||String(s))),setTimeout(()=>{this.progressCallback(0,"")},500),s}}async readFlash(e,t){if(!this.connected)throw new Error("PGM board not connected");try{let n=ed,r=new Uint8Array(t),s=e&16777215,a=0;if(!await this.stopCPU())throw new Error("Failed to stop CPU");for(this.logger(`Reading ${t} bytes from address 0x${s.toString(16).padStart(6,"0")}...`);a<t;){let o=Math.min(n,t-a),c=await this.readBlockFlash(s,o);if(!c)throw new Error(`Failed to read block at 0x${s.toString(16).padStart(6,"0")}`);r.set(c,a),a+=o,s+=o;let l=Math.round(a/t*100);this.progressCallback(l,`Reading ${a}/${t}`)}return this.logger("Read complete!"),this.progressCallback(100,"Read complete"),await x(500),this.progressCallback(0,""),r}catch(n){throw this.logger("Read error: "+(n?.message||String(n))),setTimeout(()=>{this.progressCallback(0,"")},500),n}}async dumpFlash(){let t=(Y?.value||"").match(/\((\d+)\s*bytes\)/),n=t?parseInt(t[1],10):0;if(n===0){this.logger("Error: Unknown flash size");return}this.logger(`Dumping ${n} bytes of flash...`);let r=await this.readFlash(0,n);this.logger(`Flash read complete: ${r.length} bytes`);let s=Se(r,"application/octet-stream","bin","dump",F?.value,void 0,String(n/1024)+"KB");this.logger(`Flash saved to ${s}`)}dispose(){this.link.offData&&this.link.offData(this.boundDataHandler),this.buffer=new Uint8Array(0),this.responseQueue=[],this.connected=!1}pgmReboot(){if(!this.setLinesHandler){this.logger("Error: PGM reboot not supported for this link");return}this.setLinesHandler(!1,!1),x(100),this.setLinesHandler(!1,!0),x(100),this.setLinesHandler(!1,!1),x(100),this.logger("PGM board rebooted")}}});function id(i){if(ye&&i.pinMode!==void 0&&(ye.checked=i.pinMode),ie&&i.invertLevel!==void 0&&(ie.checked=i.invertLevel),Qe){if(i.bslValue!==void 0)Qe.value=i.bslValue;else{let e=Array.from(Qe.options).find(t=>t.text==="zb:boot");e&&(Qe.value=e.value)}Ki(Qe,Oe)}if(He){if(i.rstValue!==void 0)He.value=i.rstValue;else{let e=Array.from(He.options).find(t=>t.text==="zb:reset");e&&(He.value=e.value)}Ki(He,Ge)}vt&&(i.baudValue!==void 0?vt.value=i.baudValue:vt.value="none",Ki(vt,Re)),he()}function nd(){if(R==="serial")return"serial-direct";let i=(Wi.type||"").toLowerCase(),e=(Wi.protocol||"").toLowerCase();return/^(zigstar_gw|zig_star_gw|uzg-01|xzg)$/.test(i)&&e==="tcp"?"zig-http":i==="local"&&e==="serial"?"bridge-sc":"zig-http"}function rd(i,e){let t=Ji("http"),n=oi.value.trim(),r=Number(Ft.value)||0,s=(i||"").trim();return e!==void 0&&(s=s.replace(/\{SET\}/g,String(e))),s=s.replace(/\{PORT\}/g,String(r)).replace(/\{HOST\}/g,n).replace(/\{BRIDGE\}/g,t.replace(/^https?:\/\//,"")),/^https?:\/\//i.test(s)?s:/\{BRIDGE\}/.test(i)?`${t}/${s.replace(/^\/+/,"")}`:`http://${n}/${s.replace(/^\/+/,"")}`}async function Nn(i,e,t="GET"){let n=rd(i,e);(await Os(n,8e3,t)).opaque}function G(){let{getSelectedFamilyValue:i}=(ze(),Ha(ha));return i()}function Ji(i){let e=Pe?.value?.trim()||localStorage.getItem("bridgeHost")||"127.0.0.1",t=Number(Le?.value||localStorage.getItem("bridgePort")||8765)||8765;return`${i}://${e}:${t}`}function vr(){Pe&&localStorage.setItem("bridgeHost",Pe.value.trim()||"127.0.0.1"),Le&&localStorage.setItem("bridgePort",String(Number(Le.value||8765)||8765))}function sd(){try{let i=localStorage.getItem("pinModeSelect");ye&&i!==null&&(ye.checked=i==="1"),Oe&&(Oe.value=localStorage.getItem("bslUrlInput")||Oe.value),Ge&&(Ge.value=localStorage.getItem("rstUrlInput")||Ge.value),Re&&(Re.value=localStorage.getItem("baudUrlInput")||Re.value);let e=localStorage.getItem("invertLevel");ie&&e!==null&&(ie.checked=e==="1");let t=localStorage.getItem("implyGate");N&&t!==null&&(N.checked=t==="1");let n=localStorage.getItem("findBaud");ge&&n!==null&&(ge.checked=n==="1");let r=localStorage.getItem("bitrateInput");J&&r!==null&&(J.value=r);let s=localStorage.getItem("chip_family");if(s){let{setSelectedFamilyValue:c,FAMILY_VALUES:l}=(ze(),Ha(ha)),A=l.includes(s)?s:"ti";c(A),Pn()}let a=localStorage.getItem("telinkMethodSelect");it&&a!==null&&(it.value=a,kr(a));let o=localStorage.getItem("telinkFamilySelect");kt&&o!==null&&(kt.value=o)}catch{}}function he(){try{ye&&localStorage.setItem("pinModeSelect",ye.checked?"1":"0"),Oe&&localStorage.setItem("bslUrlInput",Oe.value.trim()),Ge&&localStorage.setItem("rstUrlInput",Ge.value.trim()),Re&&localStorage.setItem("baudUrlInput",Re.value.trim()),ie&&localStorage.setItem("invertLevel",ie.checked?"1":"0"),N&&localStorage.setItem("implyGate",N.checked?"1":"0"),ge&&localStorage.setItem("findBaud",ge.checked?"1":"0"),J&&localStorage.setItem("bitrateInput",J.value.trim()),localStorage.setItem("chip_family",G()),it&&localStorage.setItem("telinkMethodSelect",it.value),kt&&localStorage.setItem("telinkFamilySelect",kt.value)}catch{}}function fa(){va&&window.clearTimeout(va),va=window.setTimeout(()=>{Pa()},300)}function Vi(i,e){if(De){if(typeof i=="number"&&!Number.isNaN(i)){let t=Math.max(0,Math.min(100,Math.round(i)));De.style.width=`${t}%`,De.setAttribute("aria-valuenow",String(t)),t>=100&&(Ni&&clearTimeout(Ni),Ni=window.setTimeout(()=>{Jr("")},5e3))}e!==void 0&&(De.textContent=e||"")}}function Jr(i=""){De&&(Ni&&(clearTimeout(Ni),Ni=null),De.style.width="0%",De.setAttribute("aria-valuenow","0"),De.textContent=i)}function Ua(i){De&&(De.classList.remove("bg-primary","bg-warning","bg-danger"),De.classList.add(`bg-${i}`))}function re(i,e){if(X){if(typeof i=="number"&&!Number.isNaN(i)){let t=Math.max(0,Math.min(100,Math.round(i)));X.style.width=`${t}%`,X.setAttribute("aria-valuenow",String(t)),t>=100&&(Yi&&clearTimeout(Yi),Yi=window.setTimeout(()=>{Wr("")},5e3))}e!==void 0&&(X.textContent=e||"")}}function Wr(i=""){X&&(Yi&&(clearTimeout(Yi),Yi=null),X.style.width="0%",X.setAttribute("aria-valuenow","0"),X.textContent=i)}async function Ce(i,e){i.querySelectorAll(".btn-status").forEach(s=>s.remove());let t=i.disabled;i.disabled=!0,i.setAttribute("aria-busy","true");let n=document.createElement("span");n.className="btn-status ms-2 d-inline-flex align-items-center",n.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',i.appendChild(n);let r=!0;try{r=await e()!==!1}catch{r=!1}n.textContent=r?" \u2705":" \u274C",setTimeout(()=>{n.remove(),i.disabled=t,i.removeAttribute("aria-busy")},3e3)}function zi(i){let e=G();i?(te.checked=!0,te.disabled=!1,e!=="esp"&&(W.checked=!0,W.disabled=!1),Ut&&(Ut.disabled=!1),Pt&&(Pt.disabled=!1),xt&&(xt.disabled=!1)):(te.checked=!1,te.disabled=!0,e!=="esp"&&(W.checked=!1,W.disabled=!0),Ut&&(Ut.disabled=!0),Pt&&(Pt.disabled=!0),xt&&(xt.value="full",xt.disabled=!0))}function ci(){if(R==="serial"&&Q)return{write:i=>Q.write(i),onData:i=>Q.onData(i),offData:i=>Q.offData(i)};if(R==="tcp"&&se)return{write:i=>se.write(i),onData:i=>se.onData(i),offData:i=>se.offData(i)};throw new Error("No transport connected")}async function Vr(){let i=(Oe?.value||"").trim();if(R==="serial")u(`Entering BSL: conn=serial auto=${ki?.checked} implyGate=${N?.checked} findBaud=${ge?.checked}`);else if(R==="tcp"){let t=ye?.checked?"mode":"pin";u(`Entering BSL: conn=tcp strategy=${t} implyGate=${N?.checked} findBaud=${ge?.checked}`)}if(R==="serial"&&!ki?.checked){u("Auto BSL disabled for serial; skipping line sequence");return}if(R==="tcp"&&ye?.checked){u("Using remote pin mode to enter BSL");let t=/\{SET\}/.test(i),n=Cr?.value||"GET";await Nn(i,t?1:void 0,n);return}let e=G();(e==="ti"||e==="sl")&&await Ur(N?.checked??!1),e==="esp"&&u("ESP: Use 'Connect' to enter bootloader automatically.")}async function Ke(){let i=(Ge?.value||"").trim();if(R==="serial")u(`Resetting: conn=serial auto=${ki?.checked} implyGate=${N?.checked} findBaud=${ge?.checked}`);else if(R==="tcp"){let t=ye?.checked?"mode":"pin";u(`Resetting: conn=tcp strategy=${t} implyGate=${N?.checked} findBaud=${ge?.checked}`)}if(R==="serial"&&!ki?.checked){u("Auto reset disabled for serial; skipping line sequence");return}if(R==="tcp"&&ye?.checked){let t=/\{SET\}/.test(i),n=Br?.value||"GET";await Nn(i,t?1:void 0,n);return}let e=G();e==="ti"||e==="sl"?await Qt(N?.checked??!1):e==="esp"?(u("ESP: Resetting..."),await le.after("hard_reset")):e==="arduino"?await xe?.reset():e==="ti_old"?O?await O?.reset(!1):V&&u("Reset not supported for CC Loader"):e==="telink"&&(L?await L.reset():q&&await q?.mcuReboot())}async function zr(i=!0){let e=null;try{i&&Ct(!0);let t=G();if(t==="ti"){if(!y)throw new Error("TiTools not initialized");let n=await y.readDeviceInfo();console.log("Device info:",n),n?(F&&(F.value=n.chipModel||""),Y&&n.flashSizeBytes&&(Y.value=`${n.flashSizeBytes} bytes (${(n.flashSizeBytes/1024).toFixed(2)} KB)`),_e&&n.ieeeMac&&(_e.value=n.ieeeMac),await At(n.chipModel||"").catch(r=>u("Network FW list fetch failed: "+(r?.message||String(r)))),n.family&&(e=n.family)):u("Failed to read device info via TI BSL")}else if(t==="sl"){if(e=null,!j)throw"SilabsTools not initialized";await fe(115200);let n=await j.getChipInfo();F&&(F.value=n.chipName),Ee&&(Ee.value=n.bootloaderVersion||""),At(n.chipName).catch(r=>u("Network FW list fetch failed: "+(r?.message||String(r))))}else if(t==="esp")u("ESP: Chip info detected during connection");else if(t==="ti_old")O?await O?.refreshInfo():V&&await V?.getChipInfo();else if(t==="arduino"){if(!xe)throw new Error("ArduinoTools not initialized");try{let n=await xe.getBoardInfo();if(n){if(F&&(F.value=n.chipName),Y&&n.flashSize){let r=(n.flashSize/1024).toFixed(0);Y.value=`${r}KB (${n.flashSize} bytes)`}_e&&n.serialNumber&&(_e.value=n.serialNumber),Ee&&n.swMajor!==void 0&&n.swMinor!==void 0&&(Ee.value=`${n.swMajor}.${n.swMinor}`),u(`Arduino board connected: ${n.chipName}`),await At(F?.value||"").catch(r=>u("Network FW list fetch failed: "+(r?.message||String(r))))}else u("Warning: Could not read board information")}catch(n){u("Board detection error: "+(n?.message||String(n)))}}else if(t==="telink"){if(L)try{let n=await L.getChipInfo();if(n){if(F&&(F.value=n.chipName),Y&&n.flashSize){let r=(n.flashSize/1024).toFixed(0);Y.value=`${r}KB (${n.flashSize} bytes)`}Ee&&(Ee.value=`Floader v${n.floaderVersion}`)}else u("Warning: Could not read board information")}catch(n){u("Telink board detection error: "+(n?.message||String(n)))}else if(q)try{await q.pgmReboot();let n=await q.getVersion();n&&Ee&&(Ee.value=`PGM: ${n.chipName} (ID 0x${n.chipId.toString(16).padStart(4,"0")}) v${n.version[0]}.${n.version[1]}`);let r=await q.getChipInfo();if(r&&(F&&(F.value=r.chipName),Y&&r.flashSize)){let s=(r.flashSize/1024).toFixed(0);Y.value=`${s}KB (${r.flashSize} bytes)`}}catch(n){u("Telink PGM board detection error: "+(n?.message||String(n)))}}}catch(t){throw u("BSL sync or chip read failed: "+(t?.message||String(t))),t}finally{i&&Ct(!1)}return Ze=e,e}async function Pc(i=[115200,460800,230400]){let e=!!ge?.checked;if(!y)return!1;try{u("Pinging application...");let a=await y.pingApp();if(e&&R==="serial"||e&&R==="tcp"&&(Re?.value??"").trim()!==""){if(a)return!0}else return a}catch{}let t=parseInt(J.value,10)||115200,n=Array.from(new Set(i.concat([t])));if(n.length<=1)return!1;let r=n.indexOf(t),s=(r+1)%n.length;for(;s!==r;s=(s+1)%n.length){let a=n[s];await fe(a),await Ke(),await x(1e3);try{if(u("Pinging application..."),await y.pingApp())return u(`Ping succeeded at ${a}bps`),!0;u(`Ping at ${a}bps: timed out or no response`)}catch(o){u(`Ping error at ${a}bps: ${o?.message||String(o)}`)}}return await fe(t),!1}async function Lc(){Ct(!0);try{nd()==="bridge-sc"&&await x(250);let i=G();if(i==="arduino")await x(250),xe=new Gr(ci()),xe.setLogger(u),xe.setProgressCallback((s,a)=>{X&&(X.style.width=`${s}%`,X.textContent=a)}),xe.setSetLinesHandler((s,a)=>{Q&&Q.setSignals({dataTerminalReady:s,requestToSend:a})}),me.disabled=!0;else if(i==="telink")if(L&&(L.dispose(),L=null),it.value==="uart"){L=new Yr(ci()),L.setLogger(u),L.setProgressCallback((a,o)=>{X&&(X.style.width=`${a}%`,X.textContent=o)}),L.setSetLinesHandler((a,o)=>{Q&&Q.setSignals({dataTerminalReady:a,requestToSend:o})}),await x(100);let s=Number(kt.value);await L.setModel(s)}else it.value==="swire"&&(q=new Kr(ci()),q.setLogger(u),q.setProgressCallback((s,a)=>{X&&(X.style.width=`${s}%`,X.textContent=a)}),q.setSetLinesHandler((s,a)=>{Q&&Q.setSignals({dataTerminalReady:s,requestToSend:a})}));if(i==="arduino"||i==="telink"){await zr();return}i==="ti"?(y||(y=new Lr(ci())),y.setLogger(s=>u(s)),y.setProgressCallback((s,a)=>{re(s,a)}),y.setSetLinesHandler($)):i==="sl"&&(j||(j=new On(ci())),j.setLogger(s=>u(s)),j.setProgressCallback((s,a)=>{re(s,a)}),j.setSetLinesHandler($));let e=ie?.checked??!1,t=N?.checked??!1,n=[{invert:e,implyGate:t},{invert:!e,implyGate:t},{invert:e,implyGate:!t},{invert:!e,implyGate:!t}],r=!1;for(let s=0;s<n.length;s++){let a=n[s];ie&&(ie.checked=a.invert),N&&(N.checked=a.implyGate),s>0&&u(`Retrying with invertLevel=${a.invert}, implyGate=${a.implyGate}`);try{await Vr(),await zr(!1),r=!0,s>0&&(u(`Successfully read chip model with invertLevel=${a.invert}, implyGate=${a.implyGate}`),he());break}catch(o){u(`BSL/chip read error (attempt ${s+1}/${n.length}): ${o?.message||String(o)}`)}}if(r||(ie&&(ie.checked=e),N&&(N.checked=t),u("Failed to read chip model after all attempts. Check connection and settings.")),i=="ti"){await Ke().catch(s=>u("Reset failed: "+(s?.message||String(s)))),await x(1e3);try{await Pc()?u("App ping: successful"):u("App ping: timed out or no response")}catch{u("App ping skipped")}await x(1e3);try{if(!y)throw new Error("TiTools not initialized");u("Checking firmware version...");let s=await y.getFwVersion();if(s&&(K&&(K.value=String(s.fwRev)),u(`Zigbee FW version: ${s.fwRev}`)),!s&&(u("FW version request: timed out or no response"),Ze!=="cc2538")){await fe(460800),await Ke(),await x(1e3);let a=await y.detectOpenThreadRcp();a&&(K&&(K.value=a.version),u(`OpenThread RCP version: ${a.version}`));let o=parseInt(J.value,10)||115200;await fe(o)}}catch{u("FW version check skipped")}}else if(i==="sl")try{if(!j)throw"SilabsTools not initialized";let s=await j.probe("auto",ge?.checked?"auto":J&&Number(J.value)||115200,N?.checked??!0);K&&(K.value=s.version),F&&(F.value=s.deviceModel??"EFR32MG21"),await At(F?.value||"").catch(a=>u("Network FW list fetch failed: "+(a?.message||String(a))))}catch(s){u("Silabs probe failed: "+(s?.message||String(s)))}}finally{Ne(),Ct(!1)}}async function ad(i){ne&&ne.classList.remove("d-none");let e=G();if(e==="esp"){me.checked&&await pd(),te.checked&&await md(),ne&&(setTimeout(()=>ne?.classList.add("d-none"),500),Ke().catch(l=>u("Reset failed: "+(l?.message||String(l)))));return}if(!Ye)throw new Error("Load HEX first");e==="ti"&&await fe(5e5,460800),e==="sl"&&await fe(115200);let n=Math.max(16,Math.min(248,248)),r=Ye.startAddress,s=Ye.data,a=ci(),o=i??Ze;try{await Vr(),await x(500)}catch(l){u("Enter BSL failed: "+(l?.message||String(l)))}if(e==="sl"){if(!j)throw"SilabsTools not initialized";u(`Flashing Silabs firmware: ${s.length} bytes`),Wr("Flashing Silabs...");try{await j.flash(s),u("Silabs flash complete!"),re(100,"Done");for(let l=0;l<=10;l++)re(10*(10-l),`Resetting in ${10-l}...`),await x(1e3)}catch(l){throw u("Silabs flash error: "+(l?.message||String(l))),l}setTimeout(()=>ne?.classList.add("d-none"),500);return}if(!y)throw new Error("TiTools not initialized");if(await y.sync(),me.checked)if(o==="cc26xx"){u("Erase..."),re(50,"Erasing...");try{await y.bankErase(),u("Bank erase done"),re(100,"Erase done"),await x(500)}catch{u("Bank erase not supported or failed, erasing sectors...");let l=4096,A=r&~(l-1),h=r+s.length+l-1&~(l-1);for(let d=A;d<h;d+=l){re(Math.min(100,Math.round((d-A)/(h-A)*100)),`Erasing... ${yt(d,8)}`);try{await y.sectorErase(d)}catch{}}u("Sector erase done"),re(100,"Erase done"),await x(500)}}else o==="cc2538"&&(u("Erase "+s.length+" bytes at "+yt(r,8)+"..."),re(50,"Erasing..."),await y.erase(r,s.length),u("Erase done"),re(100,"Erase done"),await x(500));if(te.checked){u(`Writing ${s.length} bytes @ ${yt(r,8)}...`),Wr("Writing...");let l=0;for(let A=0;A<s.length;A+=n){let h=Math.min(A+n,s.length),d=s.subarray(A,h),f=!0,g=d[0];if(g!==l)f=!1;else for(let C=1;C<d.length;C++)if(d[C]!==g){f=!1;break}f||await y.downloadTo(r+A,d);let w=A+d.length,m=Math.min(100,Math.round(w/s.length*100));re(m,`Writing ${w} / ${s.length}`),R==="serial"&&await x(1)}u("Write done"),re(100,"Done")}if(W.checked){u("Verify...");let l=!1;try{if(o==="cc26xx"){let A=await y.crc32Cc26xx(r,s.length),h=new Uint8Array(s.length);h.fill(255);let d=0;for(let g=0;g<s.length;g+=n){let w=Math.min(g+n,s.length),m=s.subarray(g,w),C=!0,I=m[0];if(I!==d)C=!1;else for(let p=1;p<m.length;p++)if(m[p]!==I){C=!1;break}C||h.set(m,g)}let f=ga(h);u(`CRC32(dev)=0x${A.toString(16).toUpperCase().padStart(8,"0")}`),u(`CRC32(loc)=0x${f.toString(16).toUpperCase().padStart(8,"0")}`),l=A===f}else if(o==="cc2538"){let A=await y.crc32(r,s.length),h=new Uint8Array(s.length);h.fill(255);let d=0;for(let g=0;g<s.length;g+=n){let w=Math.min(g+n,s.length),m=s.subarray(g,w),C=!0,I=m[0];if(I!==d)C=!1;else for(let p=1;p<m.length;p++)if(m[p]!==I){C=!1;break}C||h.set(m,g)}let f=ga(h);u(`CRC32(dev)=0x${A.toString(16).toUpperCase().padStart(8,"0")}`),u(`CRC32(loc)=0x${f.toString(16).toUpperCase().padStart(8,"0")}`),l=A===f}}catch(A){u(`Verify error: ${A?.message||String(A)}`)}u(l?"Verify OK":"Verify FAILED")}let c=parseInt(J.value,10)||115200;await fe(c),setTimeout(()=>ne?.classList.add("d-none"),500)}async function od(){if(Ua("primary"),await x(500),!y)throw new Error("TiTools not initialized");return await y.nvramReadAll(Vi)}async function ld(){if(Ua("danger"),await x(500),!y)throw new Error("TiTools not initialized");await y.nvramEraseAll(Vi)}async function cd(i){if(Ua("warning"),await x(500),!y)throw new Error("TiTools not initialized");await y.nvramWriteAll(i,e=>u(e),Vi)}async function Ad(){let i=G();if(i==="ti"){if(!y)throw new Error("TiTools not initialized");if(await Vr(),await zr(),!Ze)throw new Error("Chip family not detected. Connect to device first.");let e=await y.readSecondaryIeeeAddress(Ze);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join(":").toUpperCase()}else if(i==="sl"){if(!j)throw new Error("SilabsTools not initialized");await Ke(),await x(1e3);let e=await j.readSecondaryIeeeAddress();return Array.from(e).reverse().map(n=>n.toString(16).padStart(2,"0")).join(":").toUpperCase()}else throw new Error("IEEE address read/write is only supported for TI and SiLabs chips")}async function hd(i){let e=G();if(e==="ti"){if(!y)throw new Error("TiTools not initialized");if(!Ze)throw new Error("Chip family not detected. Connect to device first.");await y.writeSecondaryIeeeAddress(i,Ze)}else if(e==="sl"){if(!j)throw new Error("SilabsTools not initialized");let t=i.trim(),n;if(t.includes(":"))n=t.split(":");else if(t.includes("-"))n=t.split("-");else{if(t=t.replace(/^0x/i,""),t.length!==16)throw new Error("IEEE address hex string must be exactly 16 characters");n=t.match(/.{1,2}/g)||[]}if(n.length!==8)throw new Error("IEEE address must contain exactly 8 bytes");let r=new Uint8Array(8);for(let a=0;a<8;a++){let o=parseInt(n[a],16);if(isNaN(o)||o<0||o>255)throw new Error(`Invalid byte value in IEEE address: ${n[a]}`);r[a]=o}let s=new Uint8Array(r).reverse();await j.writeSecondaryIeeeAddress(s,oa?.checked??!1)}else throw new Error("IEEE address read/write is only supported for TI and SiLabs chips")}async function fe(i,e=i){try{R==="serial"?(await Q?.reopenWithBaudrate?.(i),u(`Serial: switched baud to ${i}`),Dt&&(Dt.value=`serial @ ${i}bps`)):R==="tcp"&&Re?.value?.trim()!==""&&(await fd(e),u(`TCP: switched baud to ${e}`))}catch(t){u("Serial: failed to switch baud "+(t?.message||String(t)))}}async function fd(i){if(R!=="tcp"||!se)throw new Error("No TCP connection");let e=(Re?.value||"").trim(),t=/\{SET\}/.test(e),n=na?.value||"GET";await Nn(e,t?i:void 0,n).catch(a=>{u("Baud change failed: "+(a?.message||String(a))),x(1e3)}),await x(1e3);let r=oi.value.trim(),s=parseInt(Ft.value||"",10);if(!r||!s)throw new Error("Host/port not set for reconnect");try{try{se.close()}catch{}let a=Ji("ws");se=new Bn(a),await se.connect(r,s).catch,se.onData(o=>u(`RX: ${We(o)}`,"rx")),se.onTx?.(o=>u(`TX: ${We(o)}`,"tx")),R="tcp",Ne(),u(`TCP reconnected to ${r}:${s} after baud change`),await x(1e3)}catch(a){throw u(`TCP reconnect error after baud change: ${a?.message||String(a)}`),a}}function Ki(i,e){if(!i||!e)return;let t=(i.value||"").trim();if(!t){e.value="",he();return}if(t==="sp:dtr")e.value="http://{BRIDGE}/sc?port={PORT}&dtr={SET}";else if(t==="sp:rts")e.value="http://{BRIDGE}/sc?port={PORT}&rts={SET}";else if(t.startsWith("gpio:")||t.startsWith("led:")){let n=t.indexOf(":"),r=n>=0?t.substring(n+1):t;e.value=`http://{BRIDGE}/gpio?path=${r}&set={SET}`}else if(t==="bridge")e.value="http://{BRIDGE}/sc?port={PORT}&baud={SET}";else if(t==="none")e.value="";else if(t.startsWith("url:")){let n=t.indexOf(":"),r=n>=0?t.substring(n+1):t;e.value=`http://{HOST}/${r}`}he()}async function Pa(){if(be){if(window.location.protocol==="https:"){console.warn("Secure page - no request to bridge");return}Aa(),dd();try{let i=["_zig_star_gw._tcp.local.","_zigstar_gw._tcp.local.","_uzg-01._tcp.local.","_tubeszb._tcp.local.","_xzg._tcp.local.","local.serial"].join(","),t=`${Ji("http")}/mdns?types=${encodeURIComponent(i)}&timeout=3000`,n=await fetch(t);if(!n.ok)throw new Error(`mdns http ${n.status}`);let s=(await n.json()).devices||[];be.innerHTML="";let a=document.createElement("option");a.value="",a.textContent=s.length?"\u2014 Discovered devices \u2014":"\u2014 No devices found \u2014",be.appendChild(a);for(let c of s){let l=document.createElement("option");l.value=`${c.host}:${c.port}`;let A=[];c.type&&A.push(c.type);let h=c.txt||{};h.board&&A.push(`board=${String(h.board)}`),h.serial_number&&A.push(`sn=${String(h.serial_number)}`),h.radio_type&&A.push(`radio=${String(h.radio_type)}`);let d=A.length?` \u2014 ${A.join(", ")}`:"",f=`${c.host}:${c.port}`;l.textContent=c.name?`${c.name} (${f})${d}`:`${f}${d}`,l.setAttribute("data-host",c.host),l.setAttribute("data-port",String(c.port)),c.type&&l.setAttribute("data-type",c.type),c.protocol&&l.setAttribute("data-protocol",c.protocol),h.board&&l.setAttribute("data-board",String(h.board)),h.serial_number&&l.setAttribute("data-serial-number",String(h.serial_number)),h.radio_type&&l.setAttribute("data-radio-type",String(h.radio_type)),c.fqdn&&(l.title=c.fqdn),be.appendChild(l)}let o=document.createElement("option");o.value="manual",o.textContent="Manual",o.setAttribute("data-protocol","tcp"),o.setAttribute("data-type","manual"),o.setAttribute("data-port","6638"),o.setAttribute("data-host",""),be.appendChild(o),Fr(!0)}catch(i){u("mDNS refresh error: "+(i?.message||String(i))),Fr(!1),be.innerHTML="";let e=document.createElement("option");e.value="",e.textContent="\u2014 No connection \u2014",be.appendChild(e)}}}async function dd(){if(!(!Qe||!He))try{let a=function(o,c){o.innerHTML="";let l=document.createElement("optgroup");o===Qe?l.label="\u{1F7E8} BSL":o===He&&(l.label="\u{1F7E9} Reset");let A=document.createElement("option");A.value="",A.textContent="None",l.appendChild(A),o.appendChild(l),c===""&&(A.selected=!0),gd(o,c||null);let h=document.createElement("optgroup");if(h.label="GPIOs",r.length){for(let f of r){let g=document.createElement("option"),w=f.label||f.name||f.path||String(f),m=f.path||f.name||w;g.value=`gpio:${m}`,g.textContent=`${w}`,h.appendChild(g)}o.appendChild(h)}else{let f=document.createElement("option");f.disabled=!0,f.textContent="no exported GPIOs",h.appendChild(f),o.appendChild(h)}let d=document.createElement("optgroup");if(d.label="LEDs",s.length){for(let f of s){let g=document.createElement("option"),w=f.label||f.name||f.path||String(f),m=f.path||w;g.value=`led:${m}`,g.textContent=`${w}`,d.appendChild(g)}o.appendChild(d)}else{let f=document.createElement("option");f.disabled=!0,f.textContent="no exported LEDs",d.appendChild(f),o.appendChild(d)}Ed(o,c||null)};var i=a;let t=`${Ji("http")}/gl`,n={};try{let o=await fetch(t);if(!o.ok)throw new Error(`gl http ${o.status}`);n=await o.json()}catch(o){u("Control lists fetch failed: "+(o?.message||String(o)))}let r=[];if(n&&n.gpio){if(Array.isArray(n.gpio))r.push(...n.gpio);else if(typeof n.gpio=="object")for(let o of Object.keys(n.gpio)){let c=n.gpio[o];c&&typeof c=="object"?r.push(c):r.push({path:String(o),label:String(o),value:String(c)})}}let s=Array.isArray(n?.leds)?n.leds:[];a(Qe,""),a(He,"")}catch(e){u("Control lists refresh error: "+(e?.message||String(e)))}}function gd(i,e){let t=document.createElement("optgroup");t.label="Serial";let n=document.createElement("option");n.value="sp:dtr",n.textContent="DTR";let r=document.createElement("option");if(r.value="sp:rts",r.textContent="RTS",t.appendChild(n),t.appendChild(r),i.appendChild(t),e)try{i.value=e}catch{}}function Ed(i,e){if(ud.forEach(t=>{let n=document.createElement("optgroup");n.label=t.label,t.options.forEach(r=>{let s=document.createElement("option");s.value=r.value,s.textContent=r.text,n.appendChild(s)}),i.appendChild(n)}),e)try{i.value=e}catch{}}function wd(){let i=document.createElement("div");return i.className="d-flex gap-2 mb-2 multi-file-row align-items-stretch",i.innerHTML=`
    <input type="text" class="form-control font-monospace multi-addr-input" placeholder="0x1000" style="width: 100px;" value="0x0">
    <input class="form-control multi-file-input flex-grow-1" type="file" accept=".bin" />
    <button class="btn btn-outline-danger remove-row" type="button"><i class="bi bi-x-circle"></i></button>
  `,i.querySelector(".remove-row")?.addEventListener("click",()=>{i.remove(),mt&&mt.children.length===0&&(zi(!1),La())}),i.querySelector(".multi-file-input")?.addEventListener("change",()=>{let e=document.querySelectorAll(".multi-file-row"),t=!1;for(let n of Array.from(e))if(n.querySelector(".multi-file-input")?.files?.[0]){t=!0;break}zi(t)}),i}function La(){mt&&mt.appendChild(wd())}function Qc(i){return new Promise((e,t)=>{let n=new FileReader;n.onload=()=>{n.result?e(n.result):t(new Error("Empty file"))},n.onerror=()=>t(n.error),n.readAsBinaryString(i)})}async function pd(){if(!le)throw new Error("ESP loader not initialized");re(50,"Erasing ESP...");try{await le.eraseFlash(),u("ESP Erase complete!"),re(100,"Erase Done"),await x(500)}catch(i){throw u("ESP Erase error: "+(i?.message||String(i))),i}}async function md(){if(!le)throw new Error("ESP loader not initialized");let i=[];if(z&&z.value&&Ye){u("Using pre-loaded firmware image...");let t="",n=Ye.data,r=n.byteLength;for(let s=0;s<r;s++)t+=String.fromCharCode(n[s]);i.push({data:t,address:0})}if(i.length===0){let t=document.querySelectorAll(".multi-file-row");for(let n=0;n<t.length;n++){let r=t[n],s=r.querySelector(".multi-addr-input"),o=r.querySelector(".multi-file-input").files?.[0];if(!o)continue;let c=s.value.trim();c||(c="0x0");let l=parseInt(c,16);if(isNaN(l))throw new Error(`Invalid address: ${c}`);u(`Reading ${o.name} for address 0x${l.toString(16)}...`);let A=await Qc(o);i.push({data:A,address:l})}}if(i.length===0)throw new Error("No files selected for flashing");u(`Flashing ${i.length} files...`),Wr("Flashing ESP...");let e={fileArray:i,flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0,reportProgress:(t,n,r)=>{let s=Math.round(n/r*100);re(s,`File ${t+1}/${i.length}: ${n}/${r}`)}};await le.writeFlash(e),u("ESP Flash complete!"),re(100,"Done")}var Wi,O,V,xe,L,q,R,le,Q,se,Ye,j,y,Ze,va,Ni,Yi,$,ud,yn=D(()=>{Jl();Vl();jl();wc();Bc();Sc();_c();bc();Uc();hr();Rt();Pr();Vt();Ln();ze();Sn();Wi={},O=null,V=null,xe=null,L=null,q=null,R=null,le=null,Q=null,se=null,Ye=null,j=null,y=null,Ze=null;ea.addEventListener("click",async()=>{if(R){u("Error: a connection is already active");return}try{if(!("serial"in navigator))throw new Error("Web Serial not supported");let i=parseInt(J.value,10)||115200;Ct(!0);let e=await navigator.serial.requestPort();if(!e)throw new Error("No port selected");let t=G();if(t==="esp"){u("Port selected, initializing ESP transport...");let n=new zt(e),r={clean:()=>{},writeLine:a=>u(a),write:a=>u(a)};le=new xn({transport:n,baudrate:i,terminal:r,romBaudrate:i}),u("Connecting to ESP..."),R="serial",Qi(i);let s=await le.main("default_reset");if(F&&(F.value=s||le.chip.CHIP_NAME||"ESP Unknown"),At(F?.value).catch(a=>u("Network FW list fetch failed: "+(a?.message||String(a)))),_e)try{let a=await le.chip.readMac(le);a&&(_e.value=a.toUpperCase())}catch{}if(Y)try{await le.flashId();let a=await le.readFlashId(),o=a>>16&255,c=le.DETECTED_FLASH_SIZES?.[o];c||(a===0&&u("WARNING: Failed to communicate with the flash chip."),u("Could not auto-detect Flash size. Defaulting to 4MB"),c="4MB",Y.classList.add("border-warning","bg-warning-subtle")),Y.value=c}catch(a){u("Flash detection failed: "+(a?.message||String(a))),Y.classList.add("border-warning","bg-warning-subtle")}Ne(),Ct(!1);return}t==="arduino"?(u("Initializing Arduino connection..."),i=parseInt(ta.value,10)||115200):t==="telink"&&(u("Initializing Telink connection..."),i=230400),await e.open({baudRate:i}),Q?.close(),Q=new Cn(i),Q.useExistingPortAndStart(e),Q.onData(n=>{u(`RX: ${We(n)}`,"rx")}),Q.onTx(n=>{u(`TX: ${We(n)}`,"tx")}),u("Serial selected and opened"),R="serial",Qi(i),await Lc()}catch(i){u(`Serial error: ${i?.message||String(i)}`)}});Mt.addEventListener("click",async()=>{if(R){if(j=null,y=null,Ze=null,xe=null,L=null,Ye=null,R==="serial"){try{if(le){try{await le.transport?.disconnect?.()}catch{}try{await le.transport?.device?.close?.()}catch{}le=null}await Q?.close()}catch{}Q=null,R=null,Wi={},u("Serial disconnected")}else if(R==="tcp"){try{se?.close()}catch{}se=null,R=null,Wi={},u("TCP disconnected")}Qi(),Ct(!1),Ne()}});ra.addEventListener("click",async()=>{if(R){u("Error: a connection is already active");return}try{let i=oi.value.trim(),e=parseInt(Ft.value,10);if(!i||!e)throw new Error("Enter host/port");se!==null&&se.close();let t=Ji("ws");se=new Bn(t);try{await se.connect(i,e)}catch(n){throw u("TCP connect error: "+(n?.message||String(n))),n}se.onData(n=>u(`RX: ${We(n)}`,"rx")),se.onTx?.(n=>u(`TX: ${We(n)}`,"tx")),u(`TCP connected to ${i}:${e}`),R="tcp",Qi(),await Lc()}catch(i){u(`TCP error: ${i?.message||String(i)}`)}});z?.addEventListener("change",async()=>{if(!z||!_r)return;let i=Ar();_r.disabled=!i;let t=z.selectedOptions[0]?.getAttribute("data-link");if(t)try{let n=G()==="arduino"?255:0,r=await bn(t,n);Ye=r,zi(!0),u(`Image loaded from network: ${r.data.length} bytes @ ${yt(r.startAddress,8)}`)}catch(n){u("HEX download error: "+(n?.message||String(n)))}});pe.addEventListener("change",async()=>{let i=pe.files?.[0];if(!i){zi(!1);return}try{u(`File selected: ${i.name} size=${i.size} bytes type=${i.type||"unknown"}`);let e=await i.slice(0,i.size).arrayBuffer();e.byteLength!==i.size&&u(`Warning: read length (${e.byteLength}) != file.size (${i.size})`);let t=G()==="arduino"?255:0,n=Ks(new Uint8Array(e),t);Ye=n,u(`Image loaded: ${i.name}, ${n.data.length} bytes, start ${yt(n.startAddress,8)}`),zi(!0)}catch(e){u("File load error: "+(e?.message||String(e)))}});vn?.addEventListener("click",()=>{let i=F?.value||"";At(i)});Dr?.addEventListener("click",async()=>{await Ce(Dr,async()=>{try{let i=await od(),e=JSON.stringify(i,null,2)+`
`,t=Se(e,"application/json","json","NVRAM",F?.value,_e?.value);return u("NVRAM backup saved to "+t),Vi(100,"Done"),!0}catch(i){throw u("NVRAM read error: "+(i?.message||String(i))),Jr("Error"),i}})});Mr?.addEventListener("click",async()=>{await Ce(Mr,async()=>{try{await ld(),u("NVRAM erase done. Resetting...");try{await Ke()}catch{}return Vi(100,"Done"),!0}catch(i){throw u("NVRAM erase error: "+(i?.message||String(i))),Jr("Error"),i}})});ft?.addEventListener("click",async()=>{await Ce(ft,async()=>{await Vr()})});Pi?.addEventListener("click",async()=>{await Ce(Pi,async()=>{try{await Ke()}catch(i){return u("Reset error: "+(i?.message||String(i))),!1}})});Li?.addEventListener("click",async()=>{await Ce(Li,async()=>{if(G()!=="ti"){u("Ping not supported for this family");return}if(!y)throw new Error("TiTools not initialized");if(u("Pinging application..."),!await y.pingApp())throw new Error("Ping failed")})});dt?.addEventListener("click",async()=>{await Ce(dt,async()=>{u("Checking firmware version...");let i=G();if(i==="esp"&&u("ESP: Firmware version check not implemented"),i==="ti"){if(!y)throw new Error("TiTools not initialized");let e=await y.getFwVersion().catch(()=>null);if(e){K&&(K.value=String(e.fwRev)),u(`Zigbee FW version: ${e.fwRev}`);return}if(u("FW version request: timed out or no response"),Ze!=="cc2538"){await fe(460800),await Ke(),await x(1e3);let t=await y.detectOpenThreadRcp().catch(()=>null);if(t){K&&(K.value=t.version),u(`OpenThread RCP version: ${t.version}`);return}let n=parseInt(J.value,10)||115200;await fe(n)}throw new Error("Version not available")}if(i==="sl"){if(!j)throw"SilabsTools not initialized";let e=await j.probe("auto",ge?.checked?"auto":J&&Number(J.value)||115200,N?.checked??!0);K&&(K.value=e.version),F&&(F.value=e.deviceModel??"EFR32MG21"),await At(F?.value||"").catch(t=>u("Network FW list fetch failed: "+(t?.message||String(t))))}})});gt?.addEventListener("click",async()=>{await Ce(gt,async()=>{await zr()})});Tr?.addEventListener("click",async()=>{await Ce(Tr,async()=>{try{let i=null,e=typeof window.showOpenFilePicker=="function";if(e)try{let n=await window.showOpenFilePicker({multiple:!1,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),r=n&&n[0];r&&(i=await(await r.getFile()).text())}catch(n){if(n&&(n.name==="AbortError"||n.code===20))throw u("NVRAM JSON file not selected"),n}if(i==null&&!e){let n=document.createElement("input");n.type="file",n.accept="application/json",n.style.position="fixed",n.style.left="-10000px",document.body.appendChild(n);let r=await new Promise(s=>{let a=!1,o=()=>{n.removeEventListener("change",c),window.removeEventListener("focus",l)},c=()=>{if(a)return;a=!0;let A=n.files&&n.files[0]?n.files[0]:null;o(),s(A)},l=()=>{setTimeout(()=>{a||(a=!0,o(),s(null))},1e4)};n.addEventListener("change",c,{once:!0}),window.addEventListener("focus",l,{once:!0}),n.click()});r&&(i=await r.text()),n.remove()}if(!i){let n=new Error("NVRAM JSON file not selected");throw u(n.message),n}let t=JSON.parse(i);await cd(t),u("NVRAM write done. Resetting...");try{await Ke()}catch{}return Vi(100,"Done"),!0}catch(i){throw u("NVRAM write error: "+(i?.message||String(i))),Jr("Error"),i}})});yr?.addEventListener("click",async()=>{await Ce(yr,async()=>{try{let i=await Ad();return Ti&&(Ti.value=i),G()==="ti"?u(`Secondary IEEE address: ${i}`):u(`Primary IEEE address: ${i}`),!0}catch(i){throw u("IEEE read error: "+(i?.message||String(i))),i}})});Rr?.addEventListener("click",async()=>{await Ce(Rr,async()=>{try{let i=Un?.value?.trim();if(!i){let e=new Error("Please enter a new IEEE address");throw u(e.message),e}await hd(i),G()==="ti"?u(`Secondary IEEE address written: ${i}`):u(`Primary IEEE address written: ${i}`),u("Resetting device...");try{await Ke()}catch{}return Un&&(Un.value=""),!0}catch(i){throw u("IEEE write error: "+(i?.message||String(i))),i}})});br.addEventListener("click",async()=>{await Ce(br,async()=>{let i=G();if(i==="ti_old"){ne?.classList.remove("d-none"),V?await V?.flashAction():O&&await O?.flashAction(),setTimeout(()=>ne?.classList.add("d-none"),500);return}else if(i==="arduino"){if(!xe)throw new Error("ArduinoTools not initialized");if(!Ye)throw new Error("No firmware loaded. Please select a firmware file first.");ne?.classList.remove("d-none");try{let e=Ye.data,t=128;if(await x(100),te.checked)u(`Flashing ${e.length} bytes to Arduino...`),await xe.flash(e,t,W.checked),W.checked&&u("Verification successful!");else if(W.checked){u("Verify-only mode: reading flash and comparing...");let n=await xe.readFlash(0,e.length,t),r=0;for(let s=0;s<e.length;s++)n[s]!==e[s]&&(r++,r<=10&&u(`Verify error at 0x${s.toString(16)}: expected 0x${e[s].toString(16).padStart(2,"0")}, got 0x${n[s].toString(16).padStart(2,"0")}`));if(r>0)throw new Error(`Verification failed: ${r} byte(s) mismatch`);u("Verification successful!")}else throw new Error("Please enable Write or Verify option");await x(100),await xe.reset()}catch(e){throw u("Arduino flash error: "+(e?.message||String(e))),e}finally{setTimeout(()=>ne?.classList.add("d-none"),500)}return!0}else if(i==="telink"){if(!L&&!q)throw new Error("Any TelinkTools not initialized");if(me.checked&&xt?.value==="full")try{u("Erasing flash..."),L?await L.eraseAllFlash():q&&await q.eraseAllFlash(),u("Erase complete.")}catch(e){throw u("Telink erase error: "+(e?.message||String(e))),e}if(te.checked){let e=[];if(mt){if(e.length===0){let t=document.querySelectorAll(".multi-file-row");for(let n=0;n<t.length;n++){let r=t[n],s=r.querySelector(".multi-addr-input"),o=r.querySelector(".multi-file-input").files?.[0];if(!o)continue;let c=s.value.trim();c||(c="0x0");let l=parseInt(c,16);if(isNaN(l))throw new Error(`Invalid address: ${c}`);u(`Reading ${o.name} for address 0x${l.toString(16)}...`);let A=await Qc(o);e.push({filename:o.name,data:A,startAddress:l})}}if(e.length===0)throw new Error("No firmware files selected. Please select firmware files first.");ne?.classList.remove("d-none");try{for(let t of e){u(`Flashing file: ${t.filename}, ${t.data.length} bytes...`);let n=new Uint8Array(t.data.length);for(let s=0;s<t.data.length;s++)n[s]=t.data.charCodeAt(s)&255;let r=!1;me.checked&&xt?.value==="sector"&&(r=!0),L?await L.flash(n,t.startAddress,r,W.checked):q&&await q.flash(n,t.startAddress,r,W.checked),u(`Flashing of ${t.filename} complete!`)}L?await L.reset():q&&await q.mcuReboot()}catch(t){throw u("Telink flash error: "+(t?.message||String(t))),t}finally{setTimeout(()=>ne?.classList.add("d-none"),500)}}}return!0}else try{await ad(Ze),u("Flashing finished. Restarting device...");try{await Ke(),u("Restart done")}catch(e){u("Restart error: "+(e?.message||String(e)))}if(i=="esp")return!0;if(i=="ti"){await x(1e3);try{await Pc()||u("Ping: timed out or no response")}catch(e){u("Ping error: "+(e?.message||String(e)))}}if(u("Checking firmware version..."),i=="sl"){if(await x(1e3),!j)throw"SilabsTools not initialized";let e=await j.probe("auto",ge?.checked?"auto":J&&Number(J.value)||115200,N?.checked??!0);K&&(K.value=e.version),F&&(F.value=e.deviceModel??"EFR32MG21"),await At(F?.value||"").catch(t=>u("Network FW list fetch failed: "+(t?.message||String(t))))}if(i=="ti"){if(!y)throw new Error("TiTools not initialized");let e=await y.getFwVersion();if(e&&(K&&(K.value=String(e.fwRev)),u(`Zigbee FW version: ${e.fwRev}`)),!e&&(u("FW version request: timed out or no response"),Ze!=="cc2538")){await fe(460800),await Ke(),await x(1e3);let t=await y.detectOpenThreadRcp();t&&(K&&(K.value=t.version),u(`OpenThread RCP version: ${t.version}`));let n=parseInt(J.value,10)||115200;await fe(n)}}return!0}catch(e){throw u("Flash error: "+(e?.message||String(e))),e}})});ai.addEventListener("click",async()=>{await Ce(ai,async()=>{if(G()==="telink"){if(!L)throw new Error("TelinkTools not initialized");u("Preparing to flash uart2swire...");let e;try{try{e=(await bn("./bins/uart2swire.bin",255)).data}catch(t){throw u(`Failed to load uart2swire: ${t}`),t}return await L.eraseAllFlash(),ne?.classList.remove("d-none"),await L.flash(e,0,!1,W.checked),u("Flashing of uart2swire complete!"),await L.reset(),!0}catch(t){throw u("Telink flash error: "+(t?.message||String(t))),t}finally{setTimeout(()=>ne?.classList.add("d-none"),500)}}})});Qe?.addEventListener("change",()=>Ki(Qe,Oe));He?.addEventListener("change",()=>Ki(He,Ge));vt?.addEventListener("change",()=>Ki(vt,Re));la?.addEventListener("click",()=>{ri.innerHTML=""});ca?.addEventListener("click",async()=>{let i=Array.from(ri.querySelectorAll(".log-line")).filter(e=>!(typeof ut<"u"&&ut!==null&&!ut.checked&&(e.classList.contains("log-rx")||e.classList.contains("log-tx")))).map(e=>e.innerText).join(`
`);try{await navigator.clipboard.writeText(i),u("Log copied to clipboard")}catch(e){u("Copy failed: "+(e?.message||String(e)))}});Et?.addEventListener("click",async()=>{if(O&&O.device){try{await O.disconnect(),O=null,Et&&(Et.classList.replace("btn-danger","btn-primary"),Et.innerHTML='<i class="bi bi-usb-plug-fill me-1"></i>Connect Debugger'),Je&&(Je.value=""),Ve&&(Ve.value=""),vi&&(vi.value=""),pt&&(pt.value=""),ce&&(ce.value=""),Ae&&(Ae.value=""),u("CC Debugger disconnected"),R=null,Ye=null,Ne()}catch(i){u("Disconnect error: "+(i?.message||String(i)))}Sr?.classList.remove("d-none")}else{Fi?.classList.remove("d-none");try{O=new Hr,O.setLogger(t=>u(t)),O.setProgressCallback((t,n)=>{re(t,n)}),await O.connect(),Et&&(Et.classList.replace("btn-primary","btn-danger"),Et.innerHTML='<i class="bi bi-x-octagon-fill me-1"></i>Disconnect'),Sr?.classList.add("d-none");let i=await O.getDeviceInfo();Je&&(Je.value=O.device?.productName||""),Ve&&(Ve.value=O.device?.manufacturerName||""),vi&&(vi.value=O.device?.serialNumber||""),pt&&(pt.value=`v${(i.fwVersion>>8).toString(16)}.${(i.fwVersion&255).toString(16).toUpperCase()}`),ce&&(ce.value=`CC${i.chipId.toString(16).toUpperCase()}`);let e=await O.readIEEEAddress();Ae&&(Ae.value=e),u("CC Debugger connected successfully"),R="serial",Ne()}catch(i){u("Connection error: "+(i?.message||String(i))),O=null}finally{Fi?.classList.add("d-none")}}});si?.addEventListener("click",async()=>{await Ce(si,async()=>{if(ne?.classList.remove("d-none"),V)await V?.dumpFlash();else if(O)await O?.dumpFlash();else if(y){await fe(5e5,460800),await y?.dumpFlash();let i=parseInt(J.value,10)||115200;await fe(i)}else xe?await xe?.dumpFlash():L?await L.dumpFlash():q&&await q.dumpFlash();setTimeout(()=>ne?.classList.add("d-none"),500)})});Lt?.addEventListener("click",async()=>{await Ce(Lt,async()=>{try{if(O)await O?.reset(!0);else if(V)return u("Reset not supported for CC Loader"),!1}catch(i){u("Reset error: "+(i?.message||String(i)))}})});wt?.addEventListener("click",async()=>{if(V){try{V.dispose(),V=null,Q?.close(),Q=null,wt&&(wt.classList.replace("btn-danger","btn-warning"),wt.innerHTML='<i class="bi bi-usb-plug-fill me-1"></i>Connect Loader'),ce&&(ce.value=""),Ae&&(Ae.value=""),Je&&(Je.value=""),Ve&&(Ve.value=""),u("CC Loader disconnected"),R=null,Ye=null,Ne()}catch(i){u("Disconnect error: "+(i?.message||String(i)))}Ui?.classList.remove("d-none"),Ir?.classList.remove("d-none"),me.disabled=!1,Pi?.classList.remove("d-none"),Lt?.classList.remove("d-none")}else{Fi?.classList.remove("d-none");try{if(!("serial"in navigator))throw new Error("Web Serial not supported");let i=115200,e=await navigator.serial.requestPort();if(!e)throw new Error("No port selected");ie&&(ie.checked=!1),await e.open({baudRate:i}),Q?.close(),Q=new Cn(i),Q.useExistingPortAndStart(e),Q.onData(n=>{u(`RX: ${We(n)}`,"rx")}),Q.onTx(n=>{u(`TX: ${We(n)}`,"tx")}),u("Serial selected and opened"),R="serial";let t=ci();if(!t)throw new Error("No active connection. Please connect Serial or TCP first.");V=new Or(t),V.setLogger(n=>u(n)),V.setProgressCallback((n,r)=>{re(n,r)}),V.setSetLinesHandler($),wt&&(wt.classList.replace("btn-warning","btn-danger"),wt.innerHTML='<i class="bi bi-x-octagon-fill me-1"></i>Disconnect Loader'),Ui?.classList.add("d-none"),Ir?.classList.add("d-none"),me.checked=!0,me.disabled=!0,Pi?.classList.add("d-none"),Lt?.classList.add("d-none"),u("Waiting for Arduino loader to initialize..."),await V.resetCCLoader(0),await V.getChipInfo(),R="serial",Ne()}catch(i){u("CC Loader connection error: "+(i?.message||String(i))),V&&(V.dispose(),V=null)}finally{Fi?.classList.add("d-none")}}});ia?.addEventListener("click",()=>{R||Pa()});be?.addEventListener("change",()=>{if(!be)return;be.selectedOptions[0].value==="manual"&&yi?.classList.remove("d-none");let i=be.selectedOptions[0],e=i?.getAttribute("data-host")||"",t=Number(i?.getAttribute("data-port")||0);e&&(oi.value=e),t&&(Ft.value=String(t));let n=i?.getAttribute("data-type")||void 0,r=i?.getAttribute("data-protocol")||void 0;Wi={type:n,protocol:r},id(Ec(Wi)),Ne()});sa?.addEventListener("click",La);Pe&&(Pe.value=localStorage.getItem("bridgeHost")||Pe.value);Le&&(Le.value=localStorage.getItem("bridgePort")||Le.value);try{let i=localStorage.getItem("bridgeHost"),e=localStorage.getItem("bridgePort"),t=window.location,n=t.protocol==="http:",r=t.hostname==="localhost",a=/^\d{1,3}(\.\d{1,3}){3}$/.test(t.hostname)||t.hostname.includes(":"),o=!!t.port;if(n&&(r||a)&&!i&&!e&&(o||r)){let c=t.hostname,l="8765";Pe&&(Pe.value=c),Le&&(Le.value=l),vr()}}catch{}sd();va=null;Ni=null;Yi=null;$=async(i,e)=>{let t=ie?.checked?!i:i,r=ie?.checked?!e:e,s=t;if(R==="serial"){let a=Q;if(!a||typeof a.setSignals!="function")throw new Error("setSignals unsupported");await a.setSignals({dataTerminalReady:r,requestToSend:s});return}if(R==="tcp"){let a=(Oe?.value||"").trim(),o=(Ge?.value||"").trim(),c=/\{SET\}/.test(a),l=/\{SET\}/.test(o);if(/\{BRIDGE\}/.test(a)&&/\{BRIDGE\}/.test(o)&&c&&l&&a.split("&")[0]===o.split("&")[0]){let I=a.split("&")[0].replace(/^http:\/\//,""),p=`rts=${s?"1":"0"}&dtr=${r?"1":"0"}`,_=I.replace("{BRIDGE}",Ji("http")).replace("{PORT}",Ft.value||"")+`&${p}`;await Os(_).catch(P=>{u("send request failed: "+(P?.message||String(P))),x(1e3)});return}let h=c?r?1:0:void 0,d=l?s?1:0:void 0,f=Cr?.value||"GET",g=Br?.value||"GET",w=Nn(a,h,f),m=Nn(o,d,g);await Promise.all([w,m]);return}};ud=[{label:"XZG Firmware",options:[{value:"url:cmdZigBSL",text:"BSL mode"},{value:"url:cmdZigRST",text:"RST make"}]},{label:"ESP Home",options:[{value:"url:switch/zBSL/{SET}",text:"BSL pin"},{value:"url:switch/zRST_gpio/{SET}",text:"RST pin"}]},{label:"Tasmota",options:[{value:"url:cm?cmnd=Power1%20{SET}",text:"Relay 1"},{value:"url:cm?cmnd=Power2%20{SET}",text:"Relay 2"}]},{label:"SLS",options:[{value:"url:zigbee/startbsl",text:"BSL mode"},{value:"url:zigbee/softreset",text:"RST make"}]}];mt&&mt.children.length===0&&La();Pn();zi(!1);Ne();Pa().catch(()=>{})});yn();})();
